{"version":3,"sources":["webpack://audicom/webpack/universalModuleDefinition","webpack://audicom/webpack/bootstrap","webpack://audicom/(webpack)-plugin-serve/lib/client/log.js","webpack://audicom/(webpack)-plugin-serve/lib/client/overlays/util.js","webpack://audicom/(webpack)-plugin-serve/client.js","webpack://audicom/(webpack)-plugin-serve/lib/client/client.js","webpack://audicom/(webpack)-plugin-serve/lib/client/ClientSocket.js","webpack://audicom/(webpack)-plugin-serve/lib/client/hmr.js","webpack://audicom/(webpack)-plugin-serve/lib/client/overlays/progress-minimal.js","webpack://audicom/(webpack)-plugin-serve/lib/client/overlays/progress.js","webpack://audicom/(webpack)-plugin-serve/lib/client/overlays/status.js","webpack://audicom/./lib/js/three/Math.js","webpack://audicom/./lib/js/three/Matrix4.js","webpack://audicom/./lib/js/three/Vector3.js","webpack://audicom/./lib/js/three/Quaternion.js","webpack://audicom/./src/AGPhysics.js","webpack://audicom/./src/Collision.js","webpack://audicom/./src/IDGenerator.js","webpack://audicom/./src/Event.js","webpack://audicom/./src/GlobalEvent.js","webpack://audicom/./src/AGItem.js","webpack://audicom/./src/AGEventHandler.js","webpack://audicom/./src/AGNavigation.js","webpack://audicom/./src/AGPlayer.js","webpack://audicom/./src/AGPortal.js","webpack://audicom/./src/AGRoomExit.js","webpack://audicom/./src/AGEngine.js","webpack://audicom/./src/AGInventory.js","webpack://audicom/./src/AGSaLo.js","webpack://audicom/./src/AGGameArea.js","webpack://audicom/./src/AGRoom.js","webpack://audicom/./src/AGSoundSource.js","webpack://audicom/./src/AGObject.js","webpack://audicom/./src/AGCondition.js","webpack://audicom/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","i","dep","length","hotStatusHandlers","err","request","status","e","parents","b","outdatedModules","j","disposeHandlers","children","moduleOutdatedDependencies","callbacks","outdatedSelfAcceptedModules","err2","enumerable","get","getter","value","key","bind","Object","prototype","hasOwnProperty","call","object","property","hotCurrentHash","error","info","warn","console","log","refresh","noop","silent","webpackPluginServe","addCss","css","style","document","createElement","type","styleSheet","cssText","appendChild","createTextNode","head","addHtml","html","parent","div","nodes","innerHTML","trim","firstChild","push","body","socketMessage","socket","handler","addEventListener","message","action","data","JSON","parse","run","options","hash","buildHash","address","client","progress","secure","firstInstance","compilers","ClientSocket","replace","compilerName","close","errors","warnings","shortHash","slice","identifier","compiler","wpsId","done","location","reload","init","liveReload","ignoreCodes","args","this","attempts","eventHandlers","retrying","connect","connecting","WebSocket","retry","event","includes","code","reconnect","onclose","name","fn","timeout","setTimeout","filter","removeEventListener","latest","hmr","async","apply","check","hot","hmrStatus","modules","ns","update","percent","querySelector","width","Math","floor","wrapper","classList","remove","add","reset","offset","setAttribute","toString","svg","hidden","aside","beacon","problems","preErrors","preWarnings","titleErrors","titleWarnings","hasProblems","className","innerText","min","stopImmediatePropagation","addErrors","contains","warning","addWarnings","keys","vector","matrix","x","y","z","zero","one","v1","max","quaternion","_Math","DEG2RAD","PI","RAD2DEG","generateUUID","lut","d0","random","d1","d2","d3","toUpperCase","clamp","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","lerp","t","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","LN2","floorPowerOfTwo","Matrix4","elements","arguments","Quaternion","w","_x","_y","_z","_w","undefined","Vector3","colliding","obj1","obj2","position","size","isPointInsideAABB","point","obj","isAABBInsideAABB","isAABBInsideRoom","room","frbIntersectionPoint","target","source","direction","whichPlane","v_minB","v_maxB","v_origin","v_direction","minB","maxB","origin","dir","coord","inside","quadrant","maxT","candidatePlane","hitBoundingBox","collisionIsInArray","arr","col","len","objectPartOfCollisions","returnarr","assign","isMatrix4","set","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","identity","clone","fromArray","copy","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","setFromMatrixColumn","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","euler","isEuler","a","cos","sin","c","d","f","order","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","q","compose","lookAt","eye","up","subVectors","lengthSq","normalize","crossVectors","abs","multiply","multiplyMatrices","premultiply","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","multiplyScalar","s","applyToBufferAttribute","attribute","l","count","getX","getY","getZ","applyMatrix4","setXYZ","determinant","transpose","tmp","setPosition","v","getInverse","throwOnDegenerate","t11","t12","t13","t14","det","msg","Error","detInv","scale","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","sqrt","makeTranslation","makeRotationX","theta","makeRotationY","makeRotationZ","makeRotationAxis","axis","angle","tx","ty","makeScale","makeShear","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","decompose","invSX","invSY","invSZ","setFromRotationMatrix","makePerspective","left","right","top","bottom","near","far","makeOrthographic","h","p","equals","array","toArray","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","sqrSin","Number","EPSILON","atan2","tDir","defineProperties","onChangeCallback","isQuaternion","constructor","setFromEuler","c1","c2","c3","s1","s2","s3","setFromAxisAngle","halfAngle","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","r","vFrom","vTo","dot","angleTo","acos","rotateTowards","step","inverse","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","onChange","callback","isVector3","setScalar","scalar","setX","setY","setZ","setComponent","index","getComponent","addVectors","addScalar","addScaledVector","sub","subScalar","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","applyMatrix3","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","matrixWorld","transformDirection","divide","divideScalar","clampScalar","minVal","maxVal","clampLength","round","roundToZero","negate","manhattanLength","setLength","alpha","lerpVectors","v2","cross","ax","ay","az","bx","by","bz","projectOnVector","projectOnPlane","planeNormal","reflect","normal","distanceTo","distanceToSquared","dx","dy","dz","manhattanDistanceTo","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","fromBufferAttribute","Collision","_obj1","_obj2","IncrementOneCounter","next","new_counter","Event","_origin","originID","go","getReferenceById","g_loading","g_playing","g_history","ike","_ID","getOwnPropertyDescriptor","_repeat","_trigger","_action","_addObject","addObjectID","_object","objectID","trigger","repeat","g_references","GlobalEvent","_conditionObject","_funcOfConditionObject","_funcArgs","_value","conditionObject","funcOfConditionObject","funcArgs","getFunction","AGItem","_name","_description","_charges","addCharge","removeCharge","_type","description","charges","deleteItemInReferences","delete","AGEventHandler","_events","addEvent","eventID","removeEventByID","removeEvent","ID","splice","findEventIndex","removeGlobalEventByID","removeGlobalEvent","_globalEvents","findGlobalEventIndex","evaluateGlobalEvents","evaluateGlobalEvent","addGlobalEvent","inventory","fireAction","g_gamearea","listener","solved","addObject","deleteEventsContainingItemById","itemID","agitem","that","forEach","item","deleteEventsContainingObjectById","agobject","deleteGlobalEventsContainingObjectById","findEventsAfterCall","events","addItem","removeItem","gForward","gBackward","gLeft","gRight","gInteract","move","timeStamp","timeDiff","Date","speed","checkForCollision","PoC","collisions","collArray","allowedCollision","collisionObject","p1","p2","p3","p4","p1TOP","extractPlanePoint","p1BOTTOM","p2TOP","p2BOTTOM","p3TOP","p3BOTTOM","p4TOP","p4BOTTOM","rotateAroundPoint","getAngle","points","dirs","intersectPoints","smallest","smallestDist","MAX_VALUE","pairDistancePoint","g_IAudiCom","deleteDots","dist","extractPointToArray","drawDot","hitSound","playOnceAtPosition","pointOfIntersectionForSound","pointInsideRoom","center","nx","nz","arrToAdd","pt","AGNavigation","forward","backward","interact","draw","player","onkeydown","keyCode","AGPlayer","AGObject","super","g_controls","onCollisionEnter","_hitSound","audioElement","currentTime","play","dangerous","_interactionCDTimestamp","_interactionCooldown","hits","objectsRayIntersect","doDamage","AGPortal","_conditions","_exit","tag","_blockedObjects","evaluateAll","blockedObjects","setLoading","linkPortals","portalID","portal","exit","unlink","addConditionById","condition","cond","deleteConditionById","indexOf","getConditionById","kill","element","AGRoomExit","_reached","onCollisionExit","Map","AGSaLo","g_eventHandler","AGGameArea","setIAudiCom","IAC","setGameArea","gameArea","setEventHandler","eventHandler","deleteItem","k","removeItemById","deleteCondition","conditionID","getOwnerIdOfItemById","searchItemById","attachedTo","rebuildHandlerGameArea","setControl","controls","id","getIdByReference","entries","1","map","getReferencesOfType","returnArr","bool","animate","requestAnimationFrame","state","cancelAnimationFrame","stop","unsolveRooms","AGInventory","_attachedTo","_inventory","addItemById","countByName","localeCompare","countByType","indexToDelete","searchItemByName","searchItem","hasItemById","changeItemCharge","changeBy","_savedObjects","_classes","AGRoom","AGSoundSource","AGCondition","objID","func","fclass","_args","Array","SaLoCommand","cloneArguments","printLevel","stringify","saveValueToClipboard","val","dummy","select","execCommand","removeChild","items","navigator","clipboard","read","textBlob","getType","text","Response","rebuild","saveLevelToClipboard","lvl","clear","_func","_fclass","getConstructor","newObject","Reflect","construct","applyFunc","_objID","classname","funct","returnFunc","substring","getPrototypeOf","_audioContext","_resonanceAudioScene","_listener","_AGRooms","_size","AGRooms","AudioContext","ResonanceAudio","output","destination","addRoom","clearRooms","live","_collisions","_live","_positionOnGameArea","_gameArea","_solved","valueID","_AGobjects","positionOnGrid","resonanceAudioScene","roomDimensions","height","depth","roomMaterials","front","back","down","setRoomProperties","_lastTime","gameObjectID","gameObject","addCollision","betweenPlayerObjectRayIntersect","collidable","predictCollisionByPoint","collisionArray","removeAGObject","removeCollisionWithObject","predictCollisionByPointAndSize","getTime","setListenerPosition","setListenerOrientation","_update","_room","_looping","_playing","_audioElement","_tag","_maxDistance","setMaxDistance","_volume","_gainNode","gain","file","looping","interval","roomID","audioContext","src","audioElementSource","createMediaElementSource","createGain","createSource","_obstructionFilter","createBiquadFilter","frequency","setRolloff","input","loop","disconnect","playing","pause","pos","toFixed","_deathSound","soundID","deathSound","_AGSoundSources","clearDeathSound","_aliveSound","aliveSound","clearAliveSound","_interactionSound","interactionSound","clearInteractionSound","_movementSound","movementSound","_route","_damage","_dangerous","_range","_destructible","_health","_collidable","_movable","_direction","_position","_speed","setSpeedSkalar","getSpeedSkalar","_runaway","_circle","addRoute","routes","addRouteNode","node","clearRoute","_currentRoute","_moveableSign","_movementSoundLastPosition","addSoundSource","sourceID","clearSoundSources","getSoundSources","onDeath","lastIndexOf","destructible","health","damage","evaluate","conditions"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,IACQ,mBAAXG,QAAyBA,OAAOC,IAC9CD,OAAO,UAAW,GAAIH,GACI,iBAAZC,QACdA,QAAiB,QAAID,IAErBD,EAAc,QAAIC,IARpB,CASGK,QAAQ,WACX,O,YCPA,qCACA,+BACA,eAgRA,cACA,gBACA,OAEA,aADA,QACA,EACA,4CACA,WAGA,eACA,IAzRA,MACA,WAuDA,IAKA,EALA,KAEA,yBAEA,KAGA,KAEA,KAGA,cACA,WACA,eACA,kBAsBA,OArBA,cACA,MACA,6BACA,sBAGA,MACA,MAEA,2BACA,qBAGA,aACA,4BACA,EACA,0BACA,GAEA,MAEA,MAEA,cACA,OACA,gBACA,cACA,eACA,aAEA,gBACA,UAIA,eAEA,2CACA,SACA,SAEA,gCA2BA,OAxBA,gBAGA,MAFA,0BACA,IACA,2BAEA,MADA,IACA,KAGA,aACA,IACA,gBACA,MACA,KAEA,cACA,OAKA,kBAEA,OADA,cACA,aAEA,EAIA,cACA,OAEA,yBACA,yBACA,iBACA,iBACA,oBACA,YAGA,UACA,qBACA,sCACA,+CACA,sBACA,YAAsBC,EAAIC,EAAIC,OAAQF,IACtC,mDACA,4CAEA,oBACA,sCACA,sBACA,YAAsBA,EAAIC,EAAIC,OAAQF,IACtC,sCACA,+BAEA,oBACA,4BAEA,8BACA,4BAEA,iCACA,oCACA,sCAIA,QACA,QACA,mBACA,eACA,WAEA,6BACA,WAEA,gCACA,mBACA,qBAIA,WAGA,OADA,SACA,EAGA,SACA,SAEA,cACA,IACA,YAAmBA,EAAIG,EAAkBD,OAAQF,IACjD,kBAIA,IAKA,EAGA,IARA,IACA,IACA,KACA,KACA,KAMA,cAEA,OADA,UACA,IAGA,cACA,cACA,0DAIA,OAFA,IACA,YA5NA,EA6CA,IA5CA,SACA,2BACA,sCACA,0CAEA,IACA,yBACA,6BACA,mBACA,YACA,aACM,MAAOI,GACb,YAEA,gCACA,oBACA,gBAEA,EACA,wDAEY,GAAuB,MAAnBC,EAAQC,OAExB,SACY,GAAuB,MAAnBD,EAAQC,QAAqC,MAAnBD,EAAQC,OAElD,sDACY,CAEZ,IACA,iCACQ,MAAOC,GAEf,YADA,KAGA,WAyLA,kBACA,MAEA,OADA,UACA,KAEA,KACA,KACA,MACA,MAEA,aACA,iCACA,GACA,UACA,aAGA,KAcA,OATA,EAJA,GAOA,eACA,OACA,OAEA,IAEA,KA5PA,MA+QA,cACA,MAGA,QACA,IA7RA,YACA,uCACA,kBACA,qCAEA,6BAyRA,KAJA,QAQA,aACA,WACA,QAEA,GADA,OACA,EACA,KAIA,kBACA,iBACA,eAEA,MACA,YACA,gBAEA,YACA,mBAGU,CACV,SACA,eACA,2CACA,aAGA,cAIA,cACA,eACA,2DAGA,MACA,EACA,EACA,EACA,EAEA,cAUA,IATA,UACA,KAEA,6BACA,OACA,UACA,SAGA,aACA,cACA,OACA,UAEA,IADA,UACA,qBACA,uBACA,OACA,qBACA,QACA,YAGA,eACA,OACA,kBACA,QACA,YAGA,YAAqBP,EAAIJ,EAAOY,QAAQN,OAAQF,IAAK,CACrD,mBACA,OACA,MACA,kCACA,OACA,gBACA,oBACA,WACA,aAGA,mBACA,gCACA,OACA,SACA,qBAGA,KACA,UACA,QACA,oBACA,YAKA,OACA,gBACA,WACA,kBACA,wBAIA,gBACA,YAAoBA,EAAIS,EAAEP,OAAQF,IAAK,CACvC,YACA,6BA7EA,QAmFA,SACA,KACA,KAEA,aACA,aACA,gEAIA,eACA,8CAGA,MAFA,OAYA,SACA,KACA,KACA,KAIA,QAfA,EADA,KACA,KAEA,CACA,gBACA,aAQA,QACA,iDAEA,QACA,oBACA,8BACA,mBACA,YACA,oCACA,WACA,IAEA,MACA,eACA,8BACA,mBACA,YACA,2CACA,WACA,OACA,WACA,IAEA,MACA,iBACA,kCACA,qBACA,YACA,4CAEA,MACA,eACA,8BACA,KACA,MACA,eACA,8BACA,KACA,MACA,QACA,4CAEA,KAEA,OADA,WACA,kBAEA,KAGA,SAFA,UACA,uBACA,uBAEA,qCACA,uBACA,KAGA,OACA,SACA,EACA,KACA,4BAKA,IACA,kBACA,QAMA,IAqBA,EAr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","file":"audicom.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"audicom\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"audicom\"] = factory();\n\telse\n\t\troot[\"audicom\"] = factory();\n})(window, function() {\nreturn "," \tfunction hotDisposeChunk(chunkId) {\n \t\tdelete installedChunks[chunkId];\n \t}\n \tvar parentHotUpdateCallback = window[\"webpackHotUpdateaudicom\"];\n \twindow[\"webpackHotUpdateaudicom\"] = // eslint-disable-next-line no-unused-vars\n \tfunction webpackHotUpdateCallback(chunkId, moreModules) {\n \t\thotAddUpdateChunk(chunkId, moreModules);\n \t\tif (parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);\n \t} ;\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadUpdateChunk(chunkId) {\n \t\tvar script = document.createElement(\"script\");\n \t\tscript.charset = \"utf-8\";\n \t\tscript.src = __webpack_require__.p + \"d750cf1-\" + chunkId + \"-wps-hmr.js\";\n \t\tif (null) script.crossOrigin = null;\n \t\tdocument.head.appendChild(script);\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotDownloadManifest(requestTimeout) {\n \t\trequestTimeout = requestTimeout || 10000;\n \t\treturn new Promise(function(resolve, reject) {\n \t\t\tif (typeof XMLHttpRequest === \"undefined\") {\n \t\t\t\treturn reject(new Error(\"No browser support\"));\n \t\t\t}\n \t\t\ttry {\n \t\t\t\tvar request = new XMLHttpRequest();\n \t\t\t\tvar requestPath = __webpack_require__.p + \"d750cf1-wps-hmr.json\";\n \t\t\t\trequest.open(\"GET\", requestPath, true);\n \t\t\t\trequest.timeout = requestTimeout;\n \t\t\t\trequest.send(null);\n \t\t\t} catch (err) {\n \t\t\t\treturn reject(err);\n \t\t\t}\n \t\t\trequest.onreadystatechange = function() {\n \t\t\t\tif (request.readyState !== 4) return;\n \t\t\t\tif (request.status === 0) {\n \t\t\t\t\t// timeout\n \t\t\t\t\treject(\n \t\t\t\t\t\tnew Error(\"Manifest request to \" + requestPath + \" timed out.\")\n \t\t\t\t\t);\n \t\t\t\t} else if (request.status === 404) {\n \t\t\t\t\t// no update available\n \t\t\t\t\tresolve();\n \t\t\t\t} else if (request.status !== 200 && request.status !== 304) {\n \t\t\t\t\t// other failure\n \t\t\t\t\treject(new Error(\"Manifest request to \" + requestPath + \" failed.\"));\n \t\t\t\t} else {\n \t\t\t\t\t// success\n \t\t\t\t\ttry {\n \t\t\t\t\t\tvar update = JSON.parse(request.responseText);\n \t\t\t\t\t} catch (e) {\n \t\t\t\t\t\treject(e);\n \t\t\t\t\t\treturn;\n \t\t\t\t\t}\n \t\t\t\t\tresolve(update);\n \t\t\t\t}\n \t\t\t};\n \t\t});\n \t}\n\n \tvar hotApplyOnUpdate = true;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentHash = \"4dcd8c02613b427c913a\";\n \tvar hotRequestTimeout = 10000;\n \tvar hotCurrentModuleData = {};\n \tvar hotCurrentChildModule;\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParents = [];\n \t// eslint-disable-next-line no-unused-vars\n \tvar hotCurrentParentsTemp = [];\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateRequire(moduleId) {\n \t\tvar me = installedModules[moduleId];\n \t\tif (!me) return __webpack_require__;\n \t\tvar fn = function(request) {\n \t\t\tif (me.hot.active) {\n \t\t\t\tif (installedModules[request]) {\n \t\t\t\t\tif (installedModules[request].parents.indexOf(moduleId) === -1) {\n \t\t\t\t\t\tinstalledModules[request].parents.push(moduleId);\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\thotCurrentParents = [moduleId];\n \t\t\t\t\thotCurrentChildModule = request;\n \t\t\t\t}\n \t\t\t\tif (me.children.indexOf(request) === -1) {\n \t\t\t\t\tme.children.push(request);\n \t\t\t\t}\n \t\t\t} else {\n \t\t\t\tconsole.warn(\n \t\t\t\t\t\"[HMR] unexpected require(\" +\n \t\t\t\t\t\trequest +\n \t\t\t\t\t\t\") from disposed module \" +\n \t\t\t\t\t\tmoduleId\n \t\t\t\t);\n \t\t\t\thotCurrentParents = [];\n \t\t\t}\n \t\t\treturn __webpack_require__(request);\n \t\t};\n \t\tvar ObjectFactory = function ObjectFactory(name) {\n \t\t\treturn {\n \t\t\t\tconfigurable: true,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: function() {\n \t\t\t\t\treturn __webpack_require__[name];\n \t\t\t\t},\n \t\t\t\tset: function(value) {\n \t\t\t\t\t__webpack_require__[name] = value;\n \t\t\t\t}\n \t\t\t};\n \t\t};\n \t\tfor (var name in __webpack_require__) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(__webpack_require__, name) &&\n \t\t\t\tname !== \"e\" &&\n \t\t\t\tname !== \"t\"\n \t\t\t) {\n \t\t\t\tObject.defineProperty(fn, name, ObjectFactory(name));\n \t\t\t}\n \t\t}\n \t\tfn.e = function(chunkId) {\n \t\t\tif (hotStatus === \"ready\") hotSetStatus(\"prepare\");\n \t\t\thotChunksLoading++;\n \t\t\treturn __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {\n \t\t\t\tfinishChunkLoading();\n \t\t\t\tthrow err;\n \t\t\t});\n\n \t\t\tfunction finishChunkLoading() {\n \t\t\t\thotChunksLoading--;\n \t\t\t\tif (hotStatus === \"prepare\") {\n \t\t\t\t\tif (!hotWaitingFilesMap[chunkId]) {\n \t\t\t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t\t\t}\n \t\t\t\t\tif (hotChunksLoading === 0 && hotWaitingFiles === 0) {\n \t\t\t\t\t\thotUpdateDownloaded();\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t};\n \t\tfn.t = function(value, mode) {\n \t\t\tif (mode & 1) value = fn(value);\n \t\t\treturn __webpack_require__.t(value, mode & ~1);\n \t\t};\n \t\treturn fn;\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotCreateModule(moduleId) {\n \t\tvar hot = {\n \t\t\t// private stuff\n \t\t\t_acceptedDependencies: {},\n \t\t\t_declinedDependencies: {},\n \t\t\t_selfAccepted: false,\n \t\t\t_selfDeclined: false,\n \t\t\t_disposeHandlers: [],\n \t\t\t_main: hotCurrentChildModule !== moduleId,\n\n \t\t\t// Module API\n \t\t\tactive: true,\n \t\t\taccept: function(dep, callback) {\n \t\t\t\tif (dep === undefined) hot._selfAccepted = true;\n \t\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function() {};\n \t\t\t\telse hot._acceptedDependencies[dep] = callback || function() {};\n \t\t\t},\n \t\t\tdecline: function(dep) {\n \t\t\t\tif (dep === undefined) hot._selfDeclined = true;\n \t\t\t\telse if (typeof dep === \"object\")\n \t\t\t\t\tfor (var i = 0; i < dep.length; i++)\n \t\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n \t\t\t\telse hot._declinedDependencies[dep] = true;\n \t\t\t},\n \t\t\tdispose: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\taddDisposeHandler: function(callback) {\n \t\t\t\thot._disposeHandlers.push(callback);\n \t\t\t},\n \t\t\tremoveDisposeHandler: function(callback) {\n \t\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n \t\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t// Management API\n \t\t\tcheck: hotCheck,\n \t\t\tapply: hotApply,\n \t\t\tstatus: function(l) {\n \t\t\t\tif (!l) return hotStatus;\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\taddStatusHandler: function(l) {\n \t\t\t\thotStatusHandlers.push(l);\n \t\t\t},\n \t\t\tremoveStatusHandler: function(l) {\n \t\t\t\tvar idx = hotStatusHandlers.indexOf(l);\n \t\t\t\tif (idx >= 0) hotStatusHandlers.splice(idx, 1);\n \t\t\t},\n\n \t\t\t//inherit from previous dispose call\n \t\t\tdata: hotCurrentModuleData[moduleId]\n \t\t};\n \t\thotCurrentChildModule = undefined;\n \t\treturn hot;\n \t}\n\n \tvar hotStatusHandlers = [];\n \tvar hotStatus = \"idle\";\n\n \tfunction hotSetStatus(newStatus) {\n \t\thotStatus = newStatus;\n \t\tfor (var i = 0; i < hotStatusHandlers.length; i++)\n \t\t\thotStatusHandlers[i].call(null, newStatus);\n \t}\n\n \t// while downloading\n \tvar hotWaitingFiles = 0;\n \tvar hotChunksLoading = 0;\n \tvar hotWaitingFilesMap = {};\n \tvar hotRequestedFilesMap = {};\n \tvar hotAvailableFilesMap = {};\n \tvar hotDeferred;\n\n \t// The update info\n \tvar hotUpdate, hotUpdateNewHash;\n\n \tfunction toModuleId(id) {\n \t\tvar isNumber = +id + \"\" === id;\n \t\treturn isNumber ? +id : id;\n \t}\n\n \tfunction hotCheck(apply) {\n \t\tif (hotStatus !== \"idle\") {\n \t\t\tthrow new Error(\"check() is only allowed in idle status\");\n \t\t}\n \t\thotApplyOnUpdate = apply;\n \t\thotSetStatus(\"check\");\n \t\treturn hotDownloadManifest(hotRequestTimeout).then(function(update) {\n \t\t\tif (!update) {\n \t\t\t\thotSetStatus(\"idle\");\n \t\t\t\treturn null;\n \t\t\t}\n \t\t\thotRequestedFilesMap = {};\n \t\t\thotWaitingFilesMap = {};\n \t\t\thotAvailableFilesMap = update.c;\n \t\t\thotUpdateNewHash = update.h;\n\n \t\t\thotSetStatus(\"prepare\");\n \t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\thotDeferred = {\n \t\t\t\t\tresolve: resolve,\n \t\t\t\t\treject: reject\n \t\t\t\t};\n \t\t\t});\n \t\t\thotUpdate = {};\n \t\t\tvar chunkId = 0;\n \t\t\t// eslint-disable-next-line no-lone-blocks\n \t\t\t{\n \t\t\t\t/*globals chunkId */\n \t\t\t\thotEnsureUpdateChunk(chunkId);\n \t\t\t}\n \t\t\tif (\n \t\t\t\thotStatus === \"prepare\" &&\n \t\t\t\thotChunksLoading === 0 &&\n \t\t\t\thotWaitingFiles === 0\n \t\t\t) {\n \t\t\t\thotUpdateDownloaded();\n \t\t\t}\n \t\t\treturn promise;\n \t\t});\n \t}\n\n \t// eslint-disable-next-line no-unused-vars\n \tfunction hotAddUpdateChunk(chunkId, moreModules) {\n \t\tif (!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])\n \t\t\treturn;\n \t\thotRequestedFilesMap[chunkId] = false;\n \t\tfor (var moduleId in moreModules) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\thotUpdate[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif (--hotWaitingFiles === 0 && hotChunksLoading === 0) {\n \t\t\thotUpdateDownloaded();\n \t\t}\n \t}\n\n \tfunction hotEnsureUpdateChunk(chunkId) {\n \t\tif (!hotAvailableFilesMap[chunkId]) {\n \t\t\thotWaitingFilesMap[chunkId] = true;\n \t\t} else {\n \t\t\thotRequestedFilesMap[chunkId] = true;\n \t\t\thotWaitingFiles++;\n \t\t\thotDownloadUpdateChunk(chunkId);\n \t\t}\n \t}\n\n \tfunction hotUpdateDownloaded() {\n \t\thotSetStatus(\"ready\");\n \t\tvar deferred = hotDeferred;\n \t\thotDeferred = null;\n \t\tif (!deferred) return;\n \t\tif (hotApplyOnUpdate) {\n \t\t\t// Wrap deferred object in Promise to mark it as a well-handled Promise to\n \t\t\t// avoid triggering uncaught exception warning in Chrome.\n \t\t\t// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666\n \t\t\tPromise.resolve()\n \t\t\t\t.then(function() {\n \t\t\t\t\treturn hotApply(hotApplyOnUpdate);\n \t\t\t\t})\n \t\t\t\t.then(\n \t\t\t\t\tfunction(result) {\n \t\t\t\t\t\tdeferred.resolve(result);\n \t\t\t\t\t},\n \t\t\t\t\tfunction(err) {\n \t\t\t\t\t\tdeferred.reject(err);\n \t\t\t\t\t}\n \t\t\t\t);\n \t\t} else {\n \t\t\tvar outdatedModules = [];\n \t\t\tfor (var id in hotUpdate) {\n \t\t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\t\toutdatedModules.push(toModuleId(id));\n \t\t\t\t}\n \t\t\t}\n \t\t\tdeferred.resolve(outdatedModules);\n \t\t}\n \t}\n\n \tfunction hotApply(options) {\n \t\tif (hotStatus !== \"ready\")\n \t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n \t\toptions = options || {};\n\n \t\tvar cb;\n \t\tvar i;\n \t\tvar j;\n \t\tvar module;\n \t\tvar moduleId;\n\n \t\tfunction getAffectedStuff(updateModuleId) {\n \t\t\tvar outdatedModules = [updateModuleId];\n \t\t\tvar outdatedDependencies = {};\n\n \t\t\tvar queue = outdatedModules.slice().map(function(id) {\n \t\t\t\treturn {\n \t\t\t\t\tchain: [id],\n \t\t\t\t\tid: id\n \t\t\t\t};\n \t\t\t});\n \t\t\twhile (queue.length > 0) {\n \t\t\t\tvar queueItem = queue.pop();\n \t\t\t\tvar moduleId = queueItem.id;\n \t\t\t\tvar chain = queueItem.chain;\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (!module || module.hot._selfAccepted) continue;\n \t\t\t\tif (module.hot._selfDeclined) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"self-declined\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tif (module.hot._main) {\n \t\t\t\t\treturn {\n \t\t\t\t\t\ttype: \"unaccepted\",\n \t\t\t\t\t\tchain: chain,\n \t\t\t\t\t\tmoduleId: moduleId\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n \t\t\t\t\tvar parentId = module.parents[i];\n \t\t\t\t\tvar parent = installedModules[parentId];\n \t\t\t\t\tif (!parent) continue;\n \t\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n \t\t\t\t\t\treturn {\n \t\t\t\t\t\t\ttype: \"declined\",\n \t\t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\tparentId: parentId\n \t\t\t\t\t\t};\n \t\t\t\t\t}\n \t\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n \t\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n \t\t\t\t\t\tif (!outdatedDependencies[parentId])\n \t\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n \t\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n \t\t\t\t\t\tcontinue;\n \t\t\t\t\t}\n \t\t\t\t\tdelete outdatedDependencies[parentId];\n \t\t\t\t\toutdatedModules.push(parentId);\n \t\t\t\t\tqueue.push({\n \t\t\t\t\t\tchain: chain.concat([parentId]),\n \t\t\t\t\t\tid: parentId\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t}\n\n \t\t\treturn {\n \t\t\t\ttype: \"accepted\",\n \t\t\t\tmoduleId: updateModuleId,\n \t\t\t\toutdatedModules: outdatedModules,\n \t\t\t\toutdatedDependencies: outdatedDependencies\n \t\t\t};\n \t\t}\n\n \t\tfunction addAllToSet(a, b) {\n \t\t\tfor (var i = 0; i < b.length; i++) {\n \t\t\t\tvar item = b[i];\n \t\t\t\tif (a.indexOf(item) === -1) a.push(item);\n \t\t\t}\n \t\t}\n\n \t\t// at begin all updates modules are outdated\n \t\t// the \"outdated\" status can propagate to parents if they don't accept the children\n \t\tvar outdatedDependencies = {};\n \t\tvar outdatedModules = [];\n \t\tvar appliedUpdate = {};\n\n \t\tvar warnUnexpectedRequire = function warnUnexpectedRequire() {\n \t\t\tconsole.warn(\n \t\t\t\t\"[HMR] unexpected require(\" + result.moduleId + \") to disposed module\"\n \t\t\t);\n \t\t};\n\n \t\tfor (var id in hotUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(hotUpdate, id)) {\n \t\t\t\tmoduleId = toModuleId(id);\n \t\t\t\t/** @type {TODO} */\n \t\t\t\tvar result;\n \t\t\t\tif (hotUpdate[id]) {\n \t\t\t\t\tresult = getAffectedStuff(moduleId);\n \t\t\t\t} else {\n \t\t\t\t\tresult = {\n \t\t\t\t\t\ttype: \"disposed\",\n \t\t\t\t\t\tmoduleId: id\n \t\t\t\t\t};\n \t\t\t\t}\n \t\t\t\t/** @type {Error|false} */\n \t\t\t\tvar abortError = false;\n \t\t\t\tvar doApply = false;\n \t\t\t\tvar doDispose = false;\n \t\t\t\tvar chainInfo = \"\";\n \t\t\t\tif (result.chain) {\n \t\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n \t\t\t\t}\n \t\t\t\tswitch (result.type) {\n \t\t\t\t\tcase \"self-declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"declined\":\n \t\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n \t\t\t\t\t\tif (!options.ignoreDeclined)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n \t\t\t\t\t\t\t\t\tresult.moduleId +\n \t\t\t\t\t\t\t\t\t\" in \" +\n \t\t\t\t\t\t\t\t\tresult.parentId +\n \t\t\t\t\t\t\t\t\tchainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"unaccepted\":\n \t\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n \t\t\t\t\t\tif (!options.ignoreUnaccepted)\n \t\t\t\t\t\t\tabortError = new Error(\n \t\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"accepted\":\n \t\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n \t\t\t\t\t\tdoApply = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tcase \"disposed\":\n \t\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n \t\t\t\t\t\tdoDispose = true;\n \t\t\t\t\t\tbreak;\n \t\t\t\t\tdefault:\n \t\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n \t\t\t\t}\n \t\t\t\tif (abortError) {\n \t\t\t\t\thotSetStatus(\"abort\");\n \t\t\t\t\treturn Promise.reject(abortError);\n \t\t\t\t}\n \t\t\t\tif (doApply) {\n \t\t\t\t\tappliedUpdate[moduleId] = hotUpdate[moduleId];\n \t\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n \t\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n \t\t\t\t\t\tif (\n \t\t\t\t\t\t\tObject.prototype.hasOwnProperty.call(\n \t\t\t\t\t\t\t\tresult.outdatedDependencies,\n \t\t\t\t\t\t\t\tmoduleId\n \t\t\t\t\t\t\t)\n \t\t\t\t\t\t) {\n \t\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n \t\t\t\t\t\t\taddAllToSet(\n \t\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n \t\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n \t\t\t\t\t\t\t);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t\tif (doDispose) {\n \t\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n \t\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Store self accepted outdated modules to require them later by the module system\n \t\tvar outdatedSelfAcceptedModules = [];\n \t\tfor (i = 0; i < outdatedModules.length; i++) {\n \t\t\tmoduleId = outdatedModules[i];\n \t\t\tif (\n \t\t\t\tinstalledModules[moduleId] &&\n \t\t\t\tinstalledModules[moduleId].hot._selfAccepted\n \t\t\t)\n \t\t\t\toutdatedSelfAcceptedModules.push({\n \t\t\t\t\tmodule: moduleId,\n \t\t\t\t\terrorHandler: installedModules[moduleId].hot._selfAccepted\n \t\t\t\t});\n \t\t}\n\n \t\t// Now in \"dispose\" phase\n \t\thotSetStatus(\"dispose\");\n \t\tObject.keys(hotAvailableFilesMap).forEach(function(chunkId) {\n \t\t\tif (hotAvailableFilesMap[chunkId] === false) {\n \t\t\t\thotDisposeChunk(chunkId);\n \t\t\t}\n \t\t});\n\n \t\tvar idx;\n \t\tvar queue = outdatedModules.slice();\n \t\twhile (queue.length > 0) {\n \t\t\tmoduleId = queue.pop();\n \t\t\tmodule = installedModules[moduleId];\n \t\t\tif (!module) continue;\n\n \t\t\tvar data = {};\n\n \t\t\t// Call dispose handlers\n \t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n \t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n \t\t\t\tcb = disposeHandlers[j];\n \t\t\t\tcb(data);\n \t\t\t}\n \t\t\thotCurrentModuleData[moduleId] = data;\n\n \t\t\t// disable module (this disables requires from this module)\n \t\t\tmodule.hot.active = false;\n\n \t\t\t// remove module from cache\n \t\t\tdelete installedModules[moduleId];\n\n \t\t\t// when disposing there is no need to call dispose handler\n \t\t\tdelete outdatedDependencies[moduleId];\n\n \t\t\t// remove \"parents\" references from all children\n \t\t\tfor (j = 0; j < module.children.length; j++) {\n \t\t\t\tvar child = installedModules[module.children[j]];\n \t\t\t\tif (!child) continue;\n \t\t\t\tidx = child.parents.indexOf(moduleId);\n \t\t\t\tif (idx >= 0) {\n \t\t\t\t\tchild.parents.splice(idx, 1);\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// remove outdated dependency from module children\n \t\tvar dependency;\n \t\tvar moduleOutdatedDependencies;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n \t\t\t\t\t\tidx = module.children.indexOf(dependency);\n \t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Not in \"apply\" phase\n \t\thotSetStatus(\"apply\");\n\n \t\thotCurrentHash = hotUpdateNewHash;\n\n \t\t// insert new code\n \t\tfor (moduleId in appliedUpdate) {\n \t\t\tif (Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {\n \t\t\t\tmodules[moduleId] = appliedUpdate[moduleId];\n \t\t\t}\n \t\t}\n\n \t\t// call accept handlers\n \t\tvar error = null;\n \t\tfor (moduleId in outdatedDependencies) {\n \t\t\tif (\n \t\t\t\tObject.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)\n \t\t\t) {\n \t\t\t\tmodule = installedModules[moduleId];\n \t\t\t\tif (module) {\n \t\t\t\t\tmoduleOutdatedDependencies = outdatedDependencies[moduleId];\n \t\t\t\t\tvar callbacks = [];\n \t\t\t\t\tfor (i = 0; i < moduleOutdatedDependencies.length; i++) {\n \t\t\t\t\t\tdependency = moduleOutdatedDependencies[i];\n \t\t\t\t\t\tcb = module.hot._acceptedDependencies[dependency];\n \t\t\t\t\t\tif (cb) {\n \t\t\t\t\t\t\tif (callbacks.indexOf(cb) !== -1) continue;\n \t\t\t\t\t\t\tcallbacks.push(cb);\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t\tfor (i = 0; i < callbacks.length; i++) {\n \t\t\t\t\t\tcb = callbacks[i];\n \t\t\t\t\t\ttry {\n \t\t\t\t\t\t\tcb(moduleOutdatedDependencies);\n \t\t\t\t\t\t} catch (err) {\n \t\t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n \t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\t\tdependencyId: moduleOutdatedDependencies[i],\n \t\t\t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t\t\t});\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t\t\t}\n \t\t\t\t\t\t}\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// Load self accepted modules\n \t\tfor (i = 0; i < outdatedSelfAcceptedModules.length; i++) {\n \t\t\tvar item = outdatedSelfAcceptedModules[i];\n \t\t\tmoduleId = item.module;\n \t\t\thotCurrentParents = [moduleId];\n \t\t\ttry {\n \t\t\t\t__webpack_require__(moduleId);\n \t\t\t} catch (err) {\n \t\t\t\tif (typeof item.errorHandler === \"function\") {\n \t\t\t\t\ttry {\n \t\t\t\t\t\titem.errorHandler(err);\n \t\t\t\t\t} catch (err2) {\n \t\t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n \t\t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\t\terror: err2,\n \t\t\t\t\t\t\t\toriginalError: err\n \t\t\t\t\t\t\t});\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\t\tif (!error) error = err2;\n \t\t\t\t\t\t}\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t} else {\n \t\t\t\t\tif (options.onErrored) {\n \t\t\t\t\t\toptions.onErrored({\n \t\t\t\t\t\t\ttype: \"self-accept-errored\",\n \t\t\t\t\t\t\tmoduleId: moduleId,\n \t\t\t\t\t\t\terror: err\n \t\t\t\t\t\t});\n \t\t\t\t\t}\n \t\t\t\t\tif (!options.ignoreErrored) {\n \t\t\t\t\t\tif (!error) error = err;\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t}\n \t\t}\n\n \t\t// handle errors in accept handlers and self accepted module load\n \t\tif (error) {\n \t\t\thotSetStatus(\"fail\");\n \t\t\treturn Promise.reject(error);\n \t\t}\n\n \t\thotSetStatus(\"idle\");\n \t\treturn new Promise(function(resolve) {\n \t\t\tresolve(outdatedModules);\n \t\t});\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {},\n \t\t\thot: hotCreateModule(moduleId),\n \t\t\tparents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),\n \t\t\tchildren: []\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// __webpack_hash__\n \t__webpack_require__.h = function() { return hotCurrentHash; };\n\n\n \t// Load entry module and return exports\n \treturn hotCreateRequire(2)(__webpack_require__.s = 2);\n","/*\n  Copyright  2018 Andrew Powell\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\nconst { error, info, warn } = console;\nconst log = {\n  error: error.bind(console, ' wps:'),\n  info: info.bind(console, ' wps:'),\n  refresh: 'Please refresh the page',\n  warn: warn.bind(console, ' wps:')\n};\nconst noop = () => {};\nconst silent = {\n  error: noop,\n  info: noop,\n  warn: noop\n};\n\nmodule.exports = () => (window.webpackPluginServe.silent ? silent : log);\n","/*\n  Copyright  2018 Andrew Powell\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\nconst addHtml = (html, parent) => {\n  const div = document.createElement('div');\n  const nodes = [];\n\n  div.innerHTML = html.trim();\n\n  while (div.firstChild) {\n    nodes.push((parent || document.body).appendChild(div.firstChild));\n  }\n\n  return nodes;\n};\n\nconst addCss = (css) => {\n  const style = document.createElement('style');\n\n  style.type = 'text/css';\n\n  if (css.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n\n  // append the stylesheet for the svg\n  document.head.appendChild(style);\n};\n\nconst socketMessage = (socket, handler) => {\n  socket.addEventListener('message', (message) => {\n    const { action, data = {} } = JSON.parse(message.data);\n    handler(action, data);\n  });\n};\n\nmodule.exports = { addCss, addHtml, socketMessage };\n","/*\n  Copyright  2018 Andrew Powell\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\n\n/**\n * @note This file exists merely as an easy reference for folks adding it to their configuration entries\n */\n\n(() => {\n  /* eslint-disable global-require */\n  const { run } = require('./lib/client/client');\n  let hash = '<unknown>';\n  let options;\n  try {\n    options = oss;\n  } catch (e) {\n    const { log } = require('./lib/client/log');\n    log.error(\n      'The entry for webpack-plugin-serve was included in your build, but it does not appear that the plugin was. Please check your configuration.'\n    );\n  }\n\n  try {\n    // eslint-disable-next-line camelcase\n    hash = __webpack_hash__;\n  } catch (e) {} // eslint-disable-line no-empty\n\n  run(hash, options);\n})();\n","/*\n  Copyright  2018 Andrew Powell\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\n/* eslint-disable global-require */\nconst run = (buildHash, options) => {\n  const { address, client = {}, progress, secure, status } = options;\n\n  options.firstInstance = !window.webpackPluginServe; // eslint-disable-line no-param-reassign\n\n  window.webpackPluginServe = window.webpackPluginServe || {\n    compilers: {}\n  };\n  window.webpackPluginServe.silent = !!client.silent;\n\n  const { ClientSocket } = require('./ClientSocket');\n  const { replace } = require('./hmr');\n  const { error, info, warn } = require('./log')();\n\n  const protocol = secure ? 'wss' : 'ws';\n  const socket = new ClientSocket(client, `${protocol}://${client.address || address}/wps`);\n\n  const { compilerName } = options;\n\n  window.webpackPluginServe.compilers[compilerName] = {};\n\n  // prevents ECONNRESET errors on the server\n  window.addEventListener('beforeunload', () => socket.close());\n\n  socket.addEventListener('message', (message) => {\n    const { action, data = {} } = JSON.parse(message.data);\n    const { errors, hash = '<?>', warnings } = data || {};\n    const shortHash = hash.slice(0, 7);\n    const identifier = options.compilerName ? `(Compiler: ${options.compilerName}) ` : '';\n    const compiler = window.webpackPluginServe.compilers[compilerName];\n    const { wpsId } = data;\n\n    switch (action) {\n      case 'build':\n        compiler.done = false;\n        break;\n      case 'connected':\n        info(`WebSocket connected ${identifier}`);\n        break;\n      case 'done':\n        compiler.done = true;\n        break;\n      case 'problems':\n        if (data.errors.length) {\n          error(`${identifier}Build ${shortHash} produced errors:\\n`, errors);\n        }\n        if (data.warnings.length) {\n          warn(`${identifier}Build ${shortHash} produced warnings:\\n`, warnings);\n        }\n        break;\n      case 'reload':\n        window.location.reload();\n        break;\n      case 'replace':\n        // actions with a wpsId in tow indicate actions that should only be executed when the wpsId sent\n        // matches the wpsId set in options. this is how we can identify multiple compilers in the\n        // client.\n        if (wpsId && wpsId === options.wpsId) {\n          replace(buildHash, hash);\n        }\n        break;\n      default:\n    }\n  });\n\n  if (options.firstInstance) {\n    if (progress === 'minimal') {\n      const { init } = require('./overlays/progress-minimal');\n      init(options, socket);\n    } else if (progress) {\n      const { init } = require('./overlays/progress');\n      init(options, socket);\n    }\n\n    if (status) {\n      const { init } = require('./overlays/status');\n      init(options, socket);\n    }\n\n    if (module.hot) {\n      info('Hot Module Replacement is active');\n\n      if (options.liveReload) {\n        info('Live Reload taking precedence over Hot Module Replacement');\n      }\n    } else {\n      warn('Hot Module Replacement is inactive');\n    }\n\n    if (!module.hot && options.liveReload) {\n      info('Live Reload is active');\n    }\n  }\n};\n\nmodule.exports = { run };\n","/*\n  Copyright  2018 Andrew Powell\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\nconst { error, refresh, warn } = require('./log')();\n\n// ignore 1008 (HTTP 400 equivalent) and 1011 (HTTP 500 equivalent)\nconst ignoreCodes = [1008, 1011];\nconst maxAttempts = 10;\n\nclass ClientSocket {\n  constructor(options, ...args) {\n    this.args = args;\n    this.attempts = 0;\n    this.eventHandlers = [];\n    this.options = options;\n    this.retrying = false;\n\n    this.connect();\n  }\n\n  addEventListener(...args) {\n    this.eventHandlers.push(args);\n    this.socket.addEventListener(...args);\n  }\n\n  close() {\n    this.socket.close();\n  }\n\n  connect() {\n    if (this.socket) {\n      delete this.socket;\n    }\n\n    this.connecting = true;\n\n    this.socket = new WebSocket(...this.args);\n\n    if (this.options.retry) {\n      this.socket.addEventListener('close', (event) => {\n        if (ignoreCodes.includes(event.code)) {\n          return;\n        }\n\n        if (!this.retrying) {\n          warn(`The WebSocket was closed and will attempt to reconnect`);\n        }\n\n        this.reconnect();\n      });\n    } else {\n      this.socket.onclose = () => warn(`The client WebSocket was closed. ${refresh}`);\n    }\n\n    this.socket.addEventListener('open', () => {\n      this.attempts = 0;\n      this.retrying = false;\n    });\n\n    if (this.eventHandlers.length) {\n      for (const [name, fn] of this.eventHandlers) {\n        this.socket.addEventListener(name, fn);\n      }\n    }\n  }\n\n  reconnect() {\n    this.attempts += 1;\n    this.retrying = true;\n\n    if (this.attempts > maxAttempts) {\n      error(`The WebSocket could not be reconnected. ${refresh}`);\n      this.retrying = false;\n      return;\n    }\n\n    const timeout = 1000 * this.attempts ** 2;\n\n    setTimeout(() => this.connect(this.args), timeout);\n  }\n\n  removeEventListener(...args) {\n    const [, handler] = args;\n    this.eventHandlers = this.eventHandlers.filter(([, fn]) => fn === handler);\n    this.socket.removeEventListener(...args);\n  }\n}\n\nmodule.exports = { ClientSocket };\n","/*\n  Copyright  2018 Andrew Powell\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\nconst { error, info, refresh, warn } = require('./log')();\n\nlet latest = true;\n\nconst hmr = {\n  onUnaccepted(data) {\n    warn('Change in unaccepted module(s):\\n', data);\n    warn(data);\n  },\n  onDeclined(data) {\n    warn('Change in declined module(s):\\n', data);\n  },\n  onErrored(data) {\n    error('Error in module(s):\\n', data);\n  }\n};\n\nconst replace = async (buildHash, hash) => {\n  const { apply, check, status } = module.hot;\n\n  if (hash) {\n    // eslint-disable-next-line no-undef\n    latest = hash.includes(buildHash);\n  }\n\n  if (!latest) {\n    const hmrStatus = status();\n\n    if (hmrStatus === 'abort' || hmrStatus === 'fail') {\n      warn(`An HMR update was triggered, but ${hmrStatus}ed. ${refresh}`);\n      return;\n    }\n\n    let modules;\n\n    try {\n      modules = await check(false);\n    } catch (e) {\n      // noop. this typically happens when a MultiCompiler has more than one compiler that includes\n      // this script, and an update happens with a hash that isn't part of the compiler/module this\n      // instance was loaded for.\n      return;\n    }\n\n    if (!modules) {\n      warn(`No modules found for replacement. ${refresh}`);\n      return;\n    }\n\n    modules = await apply(hmr);\n\n    if (modules) {\n      latest = true;\n      info(`Build ${hash.slice(0, 7)} replaced:\\n`, modules);\n    }\n  }\n};\n\nmodule.exports = { replace };\n","/*\n  Copyright  2018 Andrew Powell, Matheus Gonalves da Silva\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\nconst { addCss, addHtml } = require('./util');\n\nconst ns = 'wps-progress-minimal';\nconst html = `\n<div id=\"${ns}\" class=\"${ns}-hidden\">\n  <div id=\"${ns}-bar\"></div>\n</div>\n`;\nconst css = `\n#${ns} {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: 4px;\n  width: 100vw;\n  z-index: 2147483645;\n}\n\n#${ns}-bar {\n  width: 0%;\n  height: 4px;\n  background-color: rgb(186, 223, 172);\n  transition: width 1s ease-in-out;\n}\n\n.${ns}-hidden{\n  display: none;\n}\n`;\n\nconst update = (percent) => {\n  const bar = document.querySelector(`#${ns}-bar`);\n  bar.style.width = `${percent}%`;\n};\n\nconst reset = (wrapper) => {\n  wrapper.classList.add(`${ns}-hidden`);\n  setTimeout(() => update(0), 1e3);\n};\n\nconst init = (options, socket) => {\n  if (options.firstInstance) {\n    document.addEventListener('DOMContentLoaded', () => {\n      addCss(css);\n      addHtml(html);\n    });\n  }\n\n  socket.addEventListener('message', (message) => {\n    const { action, data } = JSON.parse(message.data);\n\n    if (action !== 'progress') {\n      return;\n    }\n\n    const percent = Math.floor(data.percent * 100);\n    const wrapper = document.querySelector(`#${ns}`);\n\n    wrapper.classList.remove(`${ns}-hidden`);\n\n    if (data.percent === 1) {\n      setTimeout(() => reset(wrapper), 5e3);\n    }\n\n    update(percent);\n  });\n};\n\nmodule.exports = {\n  init\n};\n","/*\n  Copyright  2018 Andrew Powell, Matheus Gonalves da Silva\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\nconst { addCss, addHtml } = require('./util');\n\nconst ns = 'wps-progress';\nconst css = `\n@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700');\n\n#${ns}{\n  width: 200px;\n  height: 200px;\n  position: absolute;\n  right: 5%;\n  top: 5%;\n  transition: opacity .25s ease-in-out;\n  z-index: 2147483645;\n}\n\n#${ns}-bg {\n  fill: #282d35;\n}\n\n#${ns}-fill {\n  fill: rgba(0, 0, 0, 0);\n  stroke: rgb(186, 223, 172);\n  stroke-dasharray: 219.99078369140625;\n  stroke-dashoffset: -219.99078369140625;\n  stroke-width: 10;\n  transform: rotate(90deg)translate(0px, -80px);\n  transition: stroke-dashoffset 1s;\n}\n\n#${ns}-percent {\n  font-family: 'Open Sans';\n  font-size: 18px;\n  fill: #ffffff;\n}\n\n#${ns}-percent-value {\n  dominant-baseline: middle;\n  text-anchor: middle;\n}\n\n#${ns}-percent-super {\n  fill: #bdc3c7;\n  font-size: .45em;\n  baseline-shift: 10%;\n}\n\n.${ns}-noselect {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  cursor: default;\n}\n\n@keyframes ${ns}-hidden-display {\n\t0% {\n\t\topacity: 1;\n\t\ttransform: scale(1);\n\t\t-webkit-transform: scale(1);\n\t}\n\t99% {\n\t\tdisplay: inline-flex;\n\t\topacity: 0;\n\t\ttransform: scale(0);\n\t\t-webkit-transform: scale(0);\n\t}\n\t100% {\n\t\tdisplay: none;\n\t\topacity: 0;\n\t\ttransform: scale(0);\n\t\t-webkit-transform: scale(0);\n\t}\n}\n\n.${ns}-hidden {\n  animation: ${ns}-hidden-display .3s;\n  animation-fill-mode:forwards;\n  display: inline-flex;\n}\n\n.${ns}-hidden-onload {\n  display: none;\n}\n`;\n\nconst html = `\n<svg id=\"${ns}\" class=\"${ns}-noselect ${ns}-hidden-onload\" x=\"0px\" y=\"0px\" viewBox=\"0 0 80 80\">\n  <circle id=\"${ns}-bg\" cx=\"50%\" cy=\"50%\" r=\"35\"></circle>\n  <path id=\"${ns}-fill\" d=\"M5,40a35,35 0 1,0 70,0a35,35 0 1,0 -70,0\" />\n  <text id=\"${ns}-percent\" x=\"50%\" y=\"51%\"><tspan id=\"${ns}-percent-value\">0</tspan><tspan id=\"${ns}-percent-super\">%</tspan></text>\n</svg>\n`;\n\nconst update = (percent) => {\n  const max = -219.99078369140625;\n  const value = document.querySelector(`#${ns}-percent-value`);\n  const track = document.querySelector(`#${ns}-fill`);\n  const offset = ((100 - percent) / 100) * max;\n\n  track.setAttribute('style', `stroke-dashoffset: ${offset}`);\n  value.innerHTML = percent.toString();\n};\n\nconst reset = (svg) => {\n  svg.classList.add(`${ns}-hidden`);\n  setTimeout(() => update(0), 1e3);\n};\n\nconst init = (options, socket) => {\n  if (options.firstInstance) {\n    document.addEventListener('DOMContentLoaded', () => {\n      addCss(css);\n      addHtml(html);\n    });\n  }\n\n  socket.addEventListener('message', (message) => {\n    const { action, data } = JSON.parse(message.data);\n\n    if (action !== 'progress') {\n      return;\n    }\n\n    const percent = Math.floor(data.percent * 100);\n    const svg = document.querySelector(`#${ns}`);\n\n    if (!svg) {\n      return;\n    }\n\n    // we can safely call this even if it doesn't have the class\n    svg.classList.remove(`${ns}-hidden`, `${ns}-hidden-onload`);\n\n    if (data.percent === 1) {\n      setTimeout(() => reset(svg), 5e3);\n    }\n\n    update(percent);\n  });\n};\n\nmodule.exports = { init };\n","/*\n  Copyright  2018 Andrew Powell\n\n  This Source Code Form is subject to the terms of the Mozilla Public\n  License, v. 2.0. If a copy of the MPL was not distributed with this\n  file, You can obtain one at http://mozilla.org/MPL/2.0/.\n\n  The above copyright notice and this permission notice shall be\n  included in all copies or substantial portions of this Source Code Form.\n*/\nconst { addCss, addHtml, socketMessage } = require('./util');\n\nconst ns = 'wps-status';\nconst css = `\n@import url('https://fonts.googleapis.com/css?family=Open+Sans:400,700');\n\n#${ns} {\n  background: #282d35;\n  border-radius: 0.6em;\n  display: flex;\n  flex-direction: column;\n\tfont-family: 'Open Sans', Helvetica, Arial, sans-serif;\n\tfont-size: 10px;\n  height: 90%;\n  min-height: 20em;\n  left: 50%;\n  opacity: 1;\n  overflow: hidden;\n  padding-bottom: 3em;\n  position: absolute;\n  top: 2rem;\n  transform: translateX(-50%);\n  transition: opacity .25s ease-in-out;\n  width: 95%;\n  z-index: 2147483645;\n}\n\n@keyframes ${ns}-hidden-display {\n\t0% {\n\t\topacity: 1;\n\t}\n\t99% {\n\t\tdisplay: inline-flex;\n\t\topacity: 0;\n\t}\n\t100% {\n\t\tdisplay: none;\n\t\topacity: 0;\n\t}\n}\n\n#${ns}.${ns}-hidden {\n  animation: ${ns}-hidden-display .3s;\n  animation-fill-mode:forwards;\n  display: none;\n}\n\n#${ns}.${ns}-min {\n  animation: minimize 10s;\n  bottom: 2em;\n  cursor: pointer;\n  height: 6em;\n  left: auto;\n  min-height: 6em;\n  padding-bottom: 0;\n  position: absolute;\n  right: 2em;\n  top: auto;\n  transform: none;\n  width: 6em;\n}\n\n#${ns}.${ns}-min #${ns}-beacon {\n  display: block;\n}\n\n#${ns}-title {\n  color: #fff;\n  font-size: 1.2em;\n  font-weight: normal;\n  margin: 0;\n  padding: 0.6em 0;\n  text-align: center;\n  width: 100%;\n}\n\n#${ns}.${ns}-min #${ns}-title {\n  display: none;\n}\n\n#${ns}-title-errors {\n  color: #ff5f58;\n  font-style: normal;\n  padding-left: 1em;\n}\n\n#${ns}-title-warnings {\n  color: #ffbd2e;\n  font-style: normal;\n  padding-left: 1em;\n}\n\n#${ns}-problems {\n  overflow-y: auto;\n  padding: 1em 2em;\n}\n\n#${ns}-problems pre {\n  color: #ddd;\n  background: #282d35;\n  display: block;\n  font-size: 1.3em;\n\tfont-family: 'Open Sans', Helvetica, Arial, sans-serif;\n  white-space: pre-wrap;\n}\n\n#${ns}-problems pre em {\n  background: #ff5f58;\n  border-radius: 0.3em;\n  color: #641e16;\n  font-style: normal;\n  line-height: 3em;\n  margin-right: 0.4em;\n  padding: 0.1em 0.4em;\n  text-transform: uppercase;\n}\n\npre#${ns}-warnings em {\n  background: #ffbd2e;\n  color: #3e2723;\n}\n\npre#${ns}-success {\n  display: none;\n  text-align: center;\n}\n\npre#${ns}-success em {\n  background: #7fb900;\n  color: #004d40;\n}\n\n#${ns}-problems.${ns}-success #${ns}-success {\n  display: block;\n}\n\n#${ns}.${ns}-min #${ns}-problems {\n  display: none;\n}\n\n#${ns}-nav {\n  opacity: 0.5;\n  padding: 1.2em;\n  position: absolute;\n}\n\n#${ns}.${ns}-min #${ns}-nav {\n  display: none;\n}\n\n#${ns}-nav:hover {\n  opacity: 1;\n}\n\n#${ns}-nav div {\n  background: #ff5f58;\n  border-radius: 1.2em;\n  cursor: pointer;\n  display: inline-block;\n  height: 1.2em;\n  position: relative;\n  width: 1.2em;\n}\n\ndiv#${ns}-min {\n  background: #ffbd2e;\n  margin-left: 0.8em;\n}\n\n#${ns}-beacon {\n  border-radius: 3em;\n  display: none;\n  font-size: 10px;\n  height: 3em;\n  margin: 1.6em auto;\n  position: relative;\n  width: 3em;\n}\n\n#${ns}-beacon:before, #${ns}-beacon:after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(127,185,0, 0.2);\n  border-radius: 3em;\n  opacity: 0;\n}\n\n#${ns}-beacon:before {\n  animation: ${ns}-pulse 3s infinite linear;\n  transform: scale(1);\n}\n\n#${ns}-beacon:after {\n  animation: ${ns}-pulse 3s 2s infinite linear;\n}\n\n\n@keyframes ${ns}-pulse {\n  0% {\n    opacity: 0;\n    transform: scale(0.6);\n  }\n  33% {\n    opacity: 1;\n    transform: scale(1);\n  }\n  100% {\n    opacity: 0;\n    transform: scale(1.4);\n  }\n}\n\n#${ns}-beacon mark {\n  background: rgba(127, 185, 0, 1);\n  border-radius: 100% 100%;\n  height: 1em;\n  left: 1em;\n  position: absolute;\n  top: 1em;\n  width: 1em;\n}\n\n#${ns}-beacon.${ns}-error mark {\n  background: #ff5f58;\n}\n\n#${ns}-beacon.${ns}-error:before, #${ns}-beacon.error:after {\n  background: rgba(255, 95, 88, 0.2);\n}\n\n#${ns}-beacon.${ns}-warning mark {\n  background: #ffbd2e;\n}\n\n#${ns}-beacon.${ns}-warning:before, #${ns}-beacon.warning:after {\n  background: rgba(255, 189, 46, 0.2);\n}\n`;\n\nconst html = `\n<aside id=\"${ns}\" class=\"${ns}-hidden\" title=\"build status\">\n  <figure id=\"${ns}-beacon\">\n    <mark/>\n  </figure>\n  <nav id=\"${ns}-nav\">\n    <div id=\"${ns}-close\" title=\"close\"></div>\n    <div id=\"${ns}-min\" title=\"minmize\"></div>\n  </nav>\n  <h1 id=\"${ns}-title\">\n    build status\n    <em id=\"${ns}-title-errors\"></em>\n    <em id=\"${ns}-title-warnings\"></em>\n  </h1>\n  <article id=\"${ns}-problems\">\n    <pre id=\"${ns}-success\"><em>Build Successful</em></pre>\n    <pre id=\"${ns}-errors\"></pre>\n    <pre id=\"${ns}-warnings\"></pre>\n  </article>\n</aside>\n`;\n\nconst init = (options, socket) => {\n  const hidden = `${ns}-hidden`;\n  let hasProblems = false;\n  let aside;\n  let beacon;\n  let problems;\n  let preErrors;\n  let preWarnings;\n  let titleErrors;\n  let titleWarnings;\n\n  const reset = () => {\n    preErrors.innerHTML = '';\n    preWarnings.innerHTML = '';\n    problems.classList.remove(`${ns}-success`);\n    beacon.className = '';\n    titleErrors.innerText = '';\n    titleWarnings.innerText = '';\n  };\n\n  const addErrors = (errors) => {\n    if (errors.length) {\n      problems.classList.remove(`${ns}-success`);\n      beacon.classList.add(`${ns}-error`);\n\n      for (const error of errors) {\n        const markup = `<div><em>Error</em> in ${error}</div>`;\n        addHtml(markup, preErrors);\n      }\n\n      titleErrors.innerText = `${errors.length} Error(s)`;\n    } else {\n      titleErrors.innerText = '';\n    }\n    aside.classList.remove(hidden);\n  };\n\n  const addWarnings = (warnings) => {\n    if (warnings.length) {\n      problems.classList.remove(`${ns}-success`);\n\n      if (!beacon.classList.contains(`${ns}-error`)) {\n        beacon.classList.add(`${ns}-warning`);\n      }\n\n      for (const warning of warnings) {\n        const markup = `<div><em>Warning</em> in ${warning}</div>`;\n        addHtml(markup, preWarnings);\n      }\n\n      titleWarnings.innerText = `${warnings.length} Warning(s)`;\n    } else {\n      titleWarnings.innerText = '';\n    }\n\n    aside.classList.remove(hidden);\n  };\n\n  if (options.firstInstance) {\n    document.addEventListener('DOMContentLoaded', () => {\n      addCss(css);\n      [aside] = addHtml(html);\n      beacon = document.querySelector(`#${ns}-beacon`);\n      problems = document.querySelector(`#${ns}-problems`);\n      preErrors = document.querySelector(`#${ns}-errors`);\n      preWarnings = document.querySelector(`#${ns}-warnings`);\n      titleErrors = document.querySelector(`#${ns}-title-errors`);\n      titleWarnings = document.querySelector(`#${ns}-title-warnings`);\n\n      const close = document.querySelector(`#${ns}-close`);\n      const min = document.querySelector(`#${ns}-min`);\n\n      aside.addEventListener('click', () => {\n        aside.classList.remove(`${ns}-min`);\n      });\n\n      close.addEventListener('click', () => {\n        aside.classList.add(`${ns}-hidden`);\n      });\n\n      min.addEventListener('click', (e) => {\n        aside.classList.add(`${ns}-min`);\n        e.stopImmediatePropagation();\n      });\n    });\n  }\n\n  socketMessage(socket, (action, data) => {\n    if (!aside) {\n      return;\n    }\n\n    const { compilers } = window.webpackPluginServe;\n\n    switch (action) {\n      case 'build':\n        // clear errors and warnings when a new build begins\n        reset();\n        break;\n      case 'problems':\n        addErrors(data.errors);\n        addWarnings(data.warnings);\n        aside.classList.remove(hidden);\n        hasProblems = data.errors.length || data.warnings.length;\n        break;\n      case 'replace':\n        // if there's a compiler that isn't done yet, hold off and let it run the show\n        for (const compilerName of Object.keys(compilers)) {\n          if (!compilers[compilerName]) {\n            return;\n          }\n        }\n\n        if (hasProblems && !preErrors.children.length && !preWarnings.children.length) {\n          reset();\n          hasProblems = false;\n          problems.classList.add(`${ns}-success`);\n          aside.classList.remove(hidden);\n\n          setTimeout(() => aside.classList.add(hidden), 3e3);\n        }\n        break;\n      default:\n    }\n  });\n};\n\nmodule.exports = { init };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: ( function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar lut = [];\n\n\t\tfor ( var i = 0; i < 256; i ++ ) {\n\n\t\t\tlut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n\t\t}\n\n\t\treturn function generateUUID() {\n\n\t\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\t\tvar uuid = lut[ d0 & 0xff ] + lut[ d0 >> 8 & 0xff ] + lut[ d0 >> 16 & 0xff ] + lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t\tlut[ d1 & 0xff ] + lut[ d1 >> 8 & 0xff ] + '-' + lut[ d1 >> 16 & 0x0f | 0x40 ] + lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t\tlut[ d2 & 0x3f | 0x80 ] + lut[ d2 >> 8 & 0xff ] + '-' + lut[ d2 >> 16 & 0xff ] + lut[ d2 >> 24 & 0xff ] +\n\t\t\t\tlut[ d3 & 0xff ] + lut[ d3 >> 8 & 0xff ] + lut[ d3 >> 16 & 0xff ] + lut[ d3 >> 24 & 0xff ];\n\n\t\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\t\treturn uuid.toUpperCase();\n\n\t\t};\n\n\t} )(),\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * _Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * _Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t}\n\n};\n\n\nexport { _Math };\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function extractRotation( m ) {\n\n\t\t\t// this method does not support reflection matrices\n\n\t\t\tvar te = this.elements;\n\t\t\tvar me = m.elements;\n\n\t\t\tvar scaleX = 1 / v1.setFromMatrixColumn( m, 0 ).length();\n\t\t\tvar scaleY = 1 / v1.setFromMatrixColumn( m, 1 ).length();\n\t\t\tvar scaleZ = 1 / v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\t\tte[ 3 ] = 0;\n\n\t\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\t\tte[ 7 ] = 0;\n\n\t\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\t\tte[ 11 ] = 0;\n\n\t\t\tte[ 12 ] = 0;\n\t\t\tte[ 13 ] = 0;\n\t\t\tte[ 14 ] = 0;\n\t\t\tte[ 15 ] = 1;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function () {\n\n\t\tvar zero = new Vector3( 0, 0, 0 );\n\t\tvar one = new Vector3( 1, 1, 1 );\n\n\t\treturn function makeRotationFromQuaternion( q ) {\n\n\t\t\treturn this.compose( zero, q, one );\n\n\t\t};\n\n\t}(),\n\n\tlookAt: function () {\n\n\t\tvar x = new Vector3();\n\t\tvar y = new Vector3();\n\t\tvar z = new Vector3();\n\n\t\treturn function lookAt( eye, target, up ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tz.subVectors( eye, target );\n\n\t\t\tif ( z.lengthSq() === 0 ) {\n\n\t\t\t\t// eye and target are in the same position\n\n\t\t\t\tz.z = 1;\n\n\t\t\t}\n\n\t\t\tz.normalize();\n\t\t\tx.crossVectors( up, z );\n\n\t\t\tif ( x.lengthSq() === 0 ) {\n\n\t\t\t\t// up and z are parallel\n\n\t\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t\tz.x += 0.0001;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz.z += 0.0001;\n\n\t\t\t\t}\n\n\t\t\t\tz.normalize();\n\t\t\t\tx.crossVectors( up, z );\n\n\t\t\t}\n\n\t\t\tx.normalize();\n\t\t\ty.crossVectors( z, x );\n\n\t\t\tte[ 0 ] = x.x; te[ 4 ] = y.x; te[ 8 ] = z.x;\n\t\t\tte[ 1 ] = x.y; te[ 5 ] = y.y; te[ 9 ] = z.y;\n\t\t\tte[ 2 ] = x.z; te[ 6 ] = y.z; te[ 10 ] = z.z;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function applyToBufferAttribute( attribute ) {\n\n\t\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\tv1.x = attribute.getX( i );\n\t\t\t\tv1.y = attribute.getY( i );\n\t\t\t\tv1.z = attribute.getZ( i );\n\n\t\t\t\tv1.applyMatrix4( this );\n\n\t\t\t\tattribute.setXYZ( i, v1.x, v1.y, v1.z );\n\n\t\t\t}\n\n\t\t\treturn attribute;\n\n\t\t};\n\n\t}(),\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( v ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 12 ] = v.x;\n\t\tte[ 13 ] = v.y;\n\t\tte[ 14 ] = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tvar x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tvar sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t        te[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t        te[ 1 ] = ( xy + wz ) * sx;\n\t        te[ 2 ] = ( xz - wy ) * sx;\n\t        te[ 3 ] = 0;\n\n\t        te[ 4 ] = ( xy - wz ) * sy;\n\t        te[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t        te[ 6 ] = ( yz + wx ) * sy;\n\t        te[ 7 ] = 0;\n\n\t        te[ 8 ] = ( xz + wy ) * sz;\n\t        te[ 9 ] = ( yz - wx ) * sz;\n\t        te[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t        te[ 11 ] = 0;\n\n\t        te[ 12 ] = position.x;\n\t        te[ 13 ] = position.y;\n\t        te[ 14 ] = position.z;\n\t        te[ 15 ] = 1;\n\n\t        return this;\n\n\t},\n\n\tdecompose: function () {\n\n\t\tvar vector = new Vector3();\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function decompose( position, quaternion, scale ) {\n\n\t\t\tvar te = this.elements;\n\n\t\t\tvar sx = vector.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\t\tvar sy = vector.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\t\tvar sz = vector.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t\t// if determine is negative, we need to invert one scale\n\t\t\tvar det = this.determinant();\n\t\t\tif ( det < 0 ) sx = - sx;\n\n\t\t\tposition.x = te[ 12 ];\n\t\t\tposition.y = te[ 13 ];\n\t\t\tposition.z = te[ 14 ];\n\n\t\t\t// scale the rotation part\n\t\t\tmatrix.copy( this );\n\n\t\t\tvar invSX = 1 / sx;\n\t\t\tvar invSY = 1 / sy;\n\t\t\tvar invSZ = 1 / sz;\n\n\t\t\tmatrix.elements[ 0 ] *= invSX;\n\t\t\tmatrix.elements[ 1 ] *= invSX;\n\t\t\tmatrix.elements[ 2 ] *= invSX;\n\n\t\t\tmatrix.elements[ 4 ] *= invSY;\n\t\t\tmatrix.elements[ 5 ] *= invSY;\n\t\t\tmatrix.elements[ 6 ] *= invSY;\n\n\t\t\tmatrix.elements[ 8 ] *= invSZ;\n\t\t\tmatrix.elements[ 9 ] *= invSZ;\n\t\t\tmatrix.elements[ 10 ] *= invSZ;\n\n\t\t\tquaternion.setFromRotationMatrix( matrix );\n\n\t\t\tscale.x = sx;\n\t\t\tscale.y = sy;\n\t\t\tscale.z = sz;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t}(),\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n","import { _Math } from './Math.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { Quaternion } from './Quaternion.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyEuler( euler ) {\n\n\t\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t\t}\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromEuler( euler ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyAxisAngle: function () {\n\n\t\tvar quaternion = new Quaternion();\n\n\t\treturn function applyAxisAngle( axis, angle ) {\n\n\t\t\treturn this.applyQuaternion( quaternion.setFromAxisAngle( axis, angle ) );\n\n\t\t};\n\n\t}(),\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t},\n\n\tunproject: function () {\n\n\t\tvar matrix = new Matrix4();\n\n\t\treturn function unproject( camera ) {\n\n\t\t\treturn this.applyMatrix4( matrix.getInverse( camera.projectionMatrix ) ).applyMatrix4( camera.matrixWorld );\n\n\t\t};\n\n\t}(),\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function () {\n\n\t\tvar min = new Vector3();\n\t\tvar max = new Vector3();\n\n\t\treturn function clampScalar( minVal, maxVal ) {\n\n\t\t\tmin.set( minVal, minVal, minVal );\n\t\t\tmax.set( maxVal, maxVal, maxVal );\n\n\t\t\treturn this.clamp( min, max );\n\n\t\t};\n\n\t}(),\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( vector ) {\n\n\t\tvar scalar = vector.dot( this ) / vector.lengthSq();\n\n\t\treturn this.copy( vector ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function () {\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function projectOnPlane( planeNormal ) {\n\n\t\t\tv1.copy( this ).projectOnVector( planeNormal );\n\n\t\t\treturn this.sub( v1 );\n\n\t\t};\n\n\t}(),\n\n\treflect: function () {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\tvar v1 = new Vector3();\n\n\t\treturn function reflect( normal ) {\n\n\t\t\treturn this.sub( v1.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t\t};\n\n\t}(),\n\n\tangleTo: function ( v ) {\n\n\t\tvar theta = this.dot( v ) / ( Math.sqrt( this.lengthSq() * v.lengthSq() ) );\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t},\n\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\n\n\t\tvar sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t},\n\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector3 };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nimport { _Math } from './Math.js';\nimport { Vector3 } from './Vector3.js';\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis.onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tisQuaternion: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function () {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar v1 = new Vector3();\n\t\tvar r;\n\n\t\tvar EPS = 0.000001;\n\n\t\treturn function setFromUnitVectors( vFrom, vTo ) {\n\n\t\t\tif ( v1 === undefined ) v1 = new Vector3();\n\n\t\t\tr = vFrom.dot( vTo ) + 1;\n\n\t\t\tif ( r < EPS ) {\n\n\t\t\t\tr = 0;\n\n\t\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\t\tv1.set( - vFrom.y, vFrom.x, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv1.set( 0, - vFrom.z, vFrom.y );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tv1.crossVectors( vFrom, vTo );\n\n\t\t\t}\n\n\t\t\tthis._x = v1.x;\n\t\t\tthis._y = v1.y;\n\t\t\tthis._z = v1.z;\n\t\t\tthis._w = r;\n\n\t\t\treturn this.normalize();\n\n\t\t};\n\n\t}(),\n\n\tangleTo: function ( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( _Math.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t},\n\n\trotateTowards: function ( q, step ) {\n\n\t\tvar angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tvar t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t},\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tvar s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\treturn this.normalize();\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis.onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tonChange: function ( callback ) {\n\n\t\tthis.onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tonChangeCallback: function () {}\n\n} );\n\n\nexport { Quaternion };\n","// @flow\nimport {AGObject} from \"./AGObject.js\";\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {AGRoom} from \"./AGRoom.js\";\n\n/**\n * Checks if two objects (AGObject) are currently colliding. AABBxAABB testing\n * @param obj1 The first object (AGObject).\n * @param obj2 The second object (AGObject).\n * @returns {boolean} Returns true if the two objects are colliding, otherwise false.\n */\nexport function colliding(obj1:AGObject, obj2:AGObject):boolean{\n    /*console.log((obj1.position.x-obj1.size.x/2 <= obj2.position.x+obj2.size.x/2 &&\n        obj1.position.x+obj1.size.x/2 >= obj2.position.x-obj2.size.x/2) + \" // \" + (obj1.position.y-obj1.size.y/2 <= obj2.position.y+obj2.size.y/2 &&\n        obj1.position.y+obj1.size.y/2 >= obj2.position.y-obj2.size.y/2) + \" // \" + (obj1.position.z-obj1.size.z/2 <= obj2.position.z+obj2.size.z/2 &&\n        obj1.position.z+obj1.size.z/2 >= obj2.position.z-obj2.size.z/2));*/\n    return (obj1.position.x-obj1.size.x/2 <= obj2.position.x+obj2.size.x/2 &&\n        obj1.position.x+obj1.size.x/2 >= obj2.position.x-obj2.size.x/2) &&\n        (obj1.position.y-obj1.size.y/2 <= obj2.position.y+obj2.size.y/2 &&\n            obj1.position.y+obj1.size.y/2 >= obj2.position.y-obj2.size.y/2) &&\n        (obj1.position.z-obj1.size.z/2 <= obj2.position.z+obj2.size.z/2 &&\n            obj1.position.z+obj1.size.z/2 >= obj2.position.z-obj2.size.z/2);\n}\n\n/**\n * Checks if a point (without size!) is inside an object.\n * @param point The point (Vector3) to be checked.\n * @param obj The object (AGObject) in which the point is to be suspected.\n * @returns {boolean} Returns true, if the point is inside the object. Otherwise false.\n */\nexport function isPointInsideAABB(point:Vector3, obj:AGObject):boolean {\n    return (point.x >= obj.position.x-obj.size.x/2 && point.x <= obj.position.x+obj.size.x/2) &&\n        (point.y >= obj.position.y-obj.size.y/2 && point.y <= obj.position.y+obj.size.y/2) &&\n        (point.z >= obj.position.z-obj.size.z/2 && point.z <= obj.position.z+obj.size.z/2);\n}\n\n/**\n * Checks if a point with a size is inside a given object.\n * @param point The point (Vector3) to be checked.\n * @param size The size(Vector3) of the point.\n * @param obj The object (AGObject) in which the point with size is to be suspected.\n * @returns {boolean} Returns true, if the point with size is inside the object. Otherwise false.\n */\nexport function isAABBInsideAABB(point:Vector3, size:Vector3, obj:AGObject):boolean {\n    return (point.x-size.x/2 <= obj.position.x+obj.size.x/2 &&\n        point.x+size.x/2 >= obj.position.x-obj.size.x/2) &&\n        (point.y-size.y/2 <= obj.position.y+obj.size.y/2 &&\n            point.y+size.y/2 >= obj.position.y-obj.size.y/2) &&\n        (point.z-size.z/2 <= obj.position.z+obj.size.z/2 &&\n            point.z+size.z/2 >= obj.position.z-obj.size.z/2);\n}\n\n/**\n * Checks if a point with a size is inside a given room.\n * @param point The point (Vector3) to be checked.\n * @param size The size(Vector3) of the point.\n * @param obj The room (AGRoom) in which the point with size is to be suspected.\n * @returns {boolean} Returns true, if the point with size is inside the room. Otherwise false.\n */\nexport function isAABBInsideRoom(point:Vector3, size:Vector3, room:AGRoom):boolean{\n    return (point.x - size.x/2 >= 0.0 &&\n    point.x + size.x/2 <= room.size.x) &&\n        (point.y - size.y/2 >= 0.0 &&\n    point.y + size.y/2 <= room.size.y) &&\n        (point.z - size.z/2 >= 0.0 &&\n    point.z + size.z/2 <= room.size.z);\n}\n\nexport function frbIntersectionPoint(target:AGObject, source:Vector3, direction:Vector3):Vector3 {\n    let v_minB:Vector3 = new Vector3(target.position.x-target.size.x/2, target.position.y-target.size.y/2, target.position.z-target.size.z/2);\n    let v_maxB:Vector3 = new Vector3(target.position.x+target.size.x/2, target.position.y+target.size.y/2, target.position.z+target.size.z/2);\n\n    let v_origin:Vector3 = source;\n    let v_direction:Vector3 = direction;\n\n    let NUMDIM:number = 3, RIGHT:number = 0, LEFT:number = 1, MIDDLE:number = 2;\n    let minB:Array<number> = [0, 0, 0], maxB:Array<number> = [0, 0, 0]; /*box*/\n    let origin:Array<number> = [0, 0, 0], dir:Array<number> = [0, 0, 0]; /*ray*/\n    let coord:Array<number> = [0, 0, 0]; /* hit point */\n\n    let inside:boolean = true;\n    let quadrant:Array<number> = [0, 0, 0];\n    let i:number;\n    let whichPlane:number;\n    let maxT:Array<number> = [0, 0, 0];\n    let candidatePlane:Array<number> = [0, 0, 0];\n\n    minB[0] = v_minB.x;\n    minB[1] = v_minB.y;\n    minB[2] = v_minB.z;\n\n    maxB[0] = v_maxB.x;\n    maxB[1] = v_maxB.y;\n    maxB[2] = v_maxB.z;\n\n    origin[0] = v_origin.x;\n    origin[1] = v_origin.y;\n    origin[2] = v_origin.z;\n\n    dir[0] = v_direction.x;\n    dir[1] = v_direction.y;\n    dir[2] = v_direction.z;\n\n    /* Find candidate planes; this loop can be avoided if\n       rays cast all from the eye(assume perpsective view) */\n    for (i=0; i<NUMDIM; i++)\n        if(origin[i] < minB[i]) {\n            quadrant[i] = LEFT;\n            candidatePlane[i] = minB[i];\n            inside = false;\n        } else if (origin[i] > maxB[i]) {\n            quadrant[i] = RIGHT;\n            candidatePlane[i] = maxB[i];\n            inside = false;\n        }else\t{\n            quadrant[i] = MIDDLE;\n        }\n\n    /* Ray origin inside bounding box */\n    if(inside)\t{\n        coord = origin;\n        return new Vector3(coord[0], coord[1], coord[2]);\n    }\n\n\n    /* Calculate T distances to candidate planes */\n    for (i = 0; i < NUMDIM; i++)\n        if (quadrant[i] != MIDDLE && dir[i] !=0.)\n            maxT[i] = (candidatePlane[i]-origin[i]) / dir[i];\n        else\n            maxT[i] = -1.;\n\n    /* Get largest of the maxT's for final choice of intersection */\n    whichPlane = 0;\n    for (i = 1; i < NUMDIM; i++)\n        if (maxT[whichPlane] < maxT[i])\n            whichPlane = i;\n\n    /* Check final candidate actually inside box */\n    if (maxT[whichPlane] < 0.) return null;\n    for (i = 0; i < NUMDIM; i++)\n        if (whichPlane != i) {\n            coord[i] = origin[i] + maxT[whichPlane] *dir[i];\n            if (coord[i] < minB[i] || coord[i] > maxB[i])\n                return null;\n        } else {\n            coord[i] = candidatePlane[i];\n        }\n    return new Vector3(coord[0], coord[1], coord[2]);\n}\n\n/*\nFast Ray-Box Intersection\nby Andrew Woo\nfrom \"Graphics Gems\", Academic Press, 1990\n*/\nexport function hitBoundingBox(target:AGObject, source:AGObject, direction?:Vector3):boolean{\n\n    let v_minB:Vector3 = new Vector3(target.position.x-target.size.x/2, target.position.y-target.size.y/2, target.position.z-target.size.z/2);\n    let v_maxB:Vector3 = new Vector3(target.position.x+target.size.x/2, target.position.y+target.size.y/2, target.position.z+target.size.z/2);\n\n    let v_origin:Vector3 = source.position;\n    let v_direction:Vector3 = direction === undefined ? source.direction : direction;\n\n\n    let NUMDIM:number = 3, RIGHT:number = 0, LEFT:number = 1, MIDDLE:number = 2;\n    let minB:Array<number> = [0, 0, 0], maxB:Array<number> = [0, 0, 0]; /*box*/\n    let origin:Array<number> = [0, 0, 0], dir:Array<number> = [0, 0, 0]; /*ray*/\n    let coord:Array<number> = [0, 0, 0]; /* hit point */\n\n    let inside:boolean = true;\n    let quadrant:Array<number> = [0, 0, 0];\n    let i:number;\n    let whichPlane:number;\n    let maxT:Array<number> = [0, 0, 0];\n    let candidatePlane:Array<number> = [0, 0, 0];\n\n    minB[0] = v_minB.x;\n    minB[1] = v_minB.y;\n    minB[2] = v_minB.z;\n\n    maxB[0] = v_maxB.x;\n    maxB[1] = v_maxB.y;\n    maxB[2] = v_maxB.z;\n\n    origin[0] = v_origin.x;\n    origin[1] = v_origin.y;\n    origin[2] = v_origin.z;\n\n    dir[0] = v_direction.x;\n    dir[1] = v_direction.y;\n    dir[2] = v_direction.z;\n\n    /* Find candidate planes; this loop can be avoided if\n       rays cast all from the eye(assume perpsective view) */\n    for (i=0; i<NUMDIM; i++)\n        if(origin[i] < minB[i]) {\n            quadrant[i] = LEFT;\n            candidatePlane[i] = minB[i];\n            inside = false;\n        } else if (origin[i] > maxB[i]) {\n            quadrant[i] = RIGHT;\n            candidatePlane[i] = maxB[i];\n            inside = false;\n        }else\t{\n            quadrant[i] = MIDDLE;\n        }\n\n    /* Ray origin inside bounding box */\n    if(inside)\t{\n        coord = origin;\n        return (true);\n    }\n\n\n    /* Calculate T distances to candidate planes */\n    for (i = 0; i < NUMDIM; i++)\n        if (quadrant[i] != MIDDLE && dir[i] !=0.)\n            maxT[i] = (candidatePlane[i]-origin[i]) / dir[i];\n        else\n            maxT[i] = -1.;\n\n    /* Get largest of the maxT's for final choice of intersection */\n    whichPlane = 0;\n    for (i = 1; i < NUMDIM; i++)\n        if (maxT[whichPlane] < maxT[i])\n            whichPlane = i;\n\n    /* Check final candidate actually inside box */\n    if (maxT[whichPlane] < 0.) return (false);\n    for (i = 0; i < NUMDIM; i++)\n        if (whichPlane != i) {\n            coord[i] = origin[i] + maxT[whichPlane] *dir[i];\n            if (coord[i] < minB[i] || coord[i] > maxB[i])\n                return (false);\n        } else {\n            coord[i] = candidatePlane[i];\n        }\n    return (true);\n\n}\n\n/*export function getMinMaxB(obj:AGObject):Array<number>{\n    let minV3:Vector3 = new Vector3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\n    let maxV3:Vector3 = new Vector3(Number.MIN_VALUE, Number.MIN_VALUE, Number.MIN_VALUE);\n\n    let coords:Array<Vector3>;\n\n    coords.push(new Vector3(obj.position.x-obj.size.x/2, obj.position.y-obj.size.y/2, obj.position.z-obj.size.z/2));\n    coords.push(new Vector3(obj.position.x+obj.size.x/2, obj.position.y+obj.size.y/2, obj.position.z+obj.size.z/2));\n\n\n\n    for(let i = 0; i <)\n}*/","// @flow\n\nimport {AGObject} from \"./AGObject.js\";\n\n/**\n * Checks if a specific Collision is inside arr-Array. Checks for order too!\n * @param arr Array of Collisions, that holds the existing collisions in the game.\n * @param col A specific Collision, to be searched in arr.\n * @returns {number} Returns the index of the Collision in arr if found, otherwise -1.\n */\nexport function collisionIsInArray(arr:Array<Collision>, col:Collision):number {\n    for(let i = 0, len = arr.length; i < len; i++){\n        if((arr[i].obj1 === col.obj1 && arr[i].obj2 === col.obj2) /*|| (arr[i].obj2 === col.obj1 && arr[i].obj1 === col.obj2)*/){\n            return i;\n        }\n    }\n    return -1;\n}\n//Is the object asked for currently part of a collision (return object) or not (return null)\n/**\n * Checks if a specific object is involved in a Collision happening in the scene.\n * @param arr Array of Collisions, that holds the existing collisions in the game.\n * @param obj A specific AGObject that is going to be looked up.\n * @returns {AGObject|null} Returns the AGObject, that obj is colliding with.\n */\nexport function objectPartOfCollisions(arr:Array<Collision>, obj:AGObject):Array<AGObject>{\n    let returnarr:Array<AGObject> = [];\n    for(let i = 0, len = arr.length; i < len; i++){\n        if(arr[i].obj1 === obj) returnarr.push(arr[i].obj2);\n        else if(arr[i].obj2 === obj) returnarr.push(arr[i].obj1);\n    }\n    return returnarr;\n}\n\n/**\n * Class that holds two AGObjects that are involved in a collision.\n */\nexport class Collision {\n    get obj1(): AGObject {\n        return this._obj1;\n    }\n\n    set obj1(value: AGObject) {\n        this._obj1 = value;\n    }\n\n    get obj2(): AGObject {\n        return this._obj2;\n    }\n\n    set obj2(value: AGObject) {\n        this._obj2 = value;\n    }\n\n    _obj1:AGObject;\n    _obj2:AGObject;\n\n    constructor(obj1:AGObject, obj2:AGObject){\n        this._obj1 = obj1;\n        this._obj2 = obj2;\n    }\n}","export interface Counter {\n    next(): number;\n    reset(): void;\n}\n\nexport function new_counter(init = 0): Counter {\n    return {\n        next: () => ++init,\n        reset: () => init = 0\n    };\n}\n\nexport const IncrementOneCounter = new_counter(0);","// @flow\n\nimport type {Action, Trigger} from \"./EventType.js\";\n\nimport {AGObject} from \"./AGObject.js\";\nimport {g_history, g_loading, g_playing, g_references, getReferenceById} from \"./AGEngine.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\n\n/**\n * Class that represents one event, including object, trigger, action, etc.\n */\nexport class Event {\n    get origin(): AGObject {\n        return this._origin;\n    }\n\n    set origin(originID:number) {\n        let go = getReferenceById(originID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(Event.prototype, 'origin').set.name, this.constructor.name, arguments);\n        this._origin = go;\n    }\n\n    get repeat(): number {\n        return this._repeat;\n    }\n\n    set repeat(value: number) {\n        this._repeat = value;\n    }\n\n    get trigger(): Trigger {\n        return this._trigger;\n    }\n\n    set trigger(value: Trigger) {\n        this._trigger = value;\n    }\n\n    get action(): Action {\n        return this._action;\n    }\n\n    set action(value:Action) {\n        this._action = value;\n    }\n\n    get addObject(): Object {\n        return this._addObject;\n    }\n\n    set addObject(addObjectID: number) {\n        let go = getReferenceById(addObjectID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(Event.prototype, 'addObject').set.name, this.constructor.name, arguments);\n        this._addObject = go;\n    }\n\n    get object(): AGObject {\n        return this._object;\n    }\n\n    set object(objectID: number) {\n        let go = getReferenceById(objectID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(Event.prototype, 'object').set.name, this.constructor.name, arguments);\n        this._object = go;\n    }\n\n    get ID() {\n        return this._ID;\n    }\n\n    set ID(value:number) {\n        this._ID = value;\n    }\n\n    _origin:AGObject;\n    _trigger:Trigger;\n    _action:Action;\n    _object:AGObject;\n    _addObject:?Object;\n    _repeat:number;\n    _ID:number;\n\n    constructor(originID: number, trigger:Trigger, action:Action, objectID: number, addObjectID: number, repeat: number) {\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n        console.log(\"[Event] Creating Event [ID: \" + this._ID + \"] with originID \" + originID + \" and objectID \" + objectID + \".\");\n\n        this._origin = getReferenceById(originID);\n        this._trigger = trigger;\n        this._action = action;\n        this._object = getReferenceById(objectID);\n        this._addObject = getReferenceById(addObjectID);\n        this._repeat = repeat;\n    }\n}","// @flow\n\nimport type {Action, ConditionObject} from \"./EventType.js\";\nimport {AGObject} from \"./AGObject.js\";\nimport {g_history, g_loading, g_playing, g_references, getReferenceById} from \"./AGEngine.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\n\n/**\n * Similar to Event class but with a focus on Global Events.\n */\nexport class GlobalEvent {\n    _object:AGObject;\n    _conditionObject:ConditionObject;\n    _funcOfConditionObject:Function;\n    _funcArgs:Array<any>;\n    _value:Object;\n    _action:Action;\n    _repeat:number;\n    _ID:number;\n\n    get object(): AGObject {\n        return this._object;\n    }\n\n    set object(objectID: number) {\n        let go = getReferenceById(objectID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(GlobalEvent.prototype, 'object').set.name, this.constructor.name, arguments);\n        this._object = go;\n    }\n\n    get conditionObject(): any {\n        return this._conditionObject;\n    }\n\n    set conditionObject(value: any) {\n        this._conditionObject = value;\n    }\n\n    get funcOfConditionObject(): Function {\n        return this._funcOfConditionObject;\n    }\n\n    set funcOfConditionObject(value: Function) {\n        this._funcOfConditionObject = value;\n    }\n\n    get funcArgs(): Array<*> {\n        return this._funcArgs;\n    }\n\n    set funcArgs(value: Array<*>) {\n        this._funcArgs = value;\n    }\n\n    get value(): Object {\n        return this._value;\n    }\n\n    set value(value: Object) {\n        this._value = value;\n    }\n\n    get action(): any {\n        return this._action;\n    }\n\n    set action(value: any) {\n        this._action = value;\n    }\n\n    get repeat(): number {\n        return this._repeat;\n    }\n\n    set repeat(value: number) {\n        this._repeat = value;\n    }\n\n    get ID() {\n        return this._ID;\n    }\n\n    set ID(value:number) {\n        this._ID = value;\n    }\n\n    constructor(objectID: number, conditionObject: ConditionObject, funcOfConditionObject: string, funcArgs: Array<*>, value: Object, action:Action, repeat:number) {\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n        console.log(\"[GlobalEvent] Creating Event [ID: \" + this._ID + \"] with objectID \" + objectID + \", conditionObject \" + conditionObject + \" and Function \" + funcOfConditionObject + \".\");\n\n        this._object = getReferenceById(objectID);\n        this._conditionObject = conditionObject;\n\n        let f:Function;\n        switch(conditionObject){\n            case \"INVENTORY\":\n                f = g_history.getFunction(\"AGInventory\", funcOfConditionObject);\n                break;\n        }\n\n        this._funcOfConditionObject = f;\n        this._funcArgs = funcArgs;\n        this._value = value;\n        this._action = action;\n        this._repeat = repeat;\n    }\n}","// @flow\n\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport {g_history, g_loading, g_playing, g_references} from \"./AGEngine.js\";\n\n/**\n * In-game item class.\n */\nexport class AGItem {\n    _name:string;\n    _description:string;\n    _charges:number;\n    _ID:number;\n    _type:string;\n\n    set name(value: string) {\n        this._name = value;\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGItem.prototype, 'name').set.name, this.constructor.name, arguments);\n    }\n\n    set description(value: string) {\n        this._description = value;\n    }\n\n    set charges(value: number) {\n        this._charges = value;\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGItem.prototype, 'charges').set.name, this.constructor.name, arguments);\n    }\n\n    addCharge(){\n        this._charges++;\n    }\n\n    removeCharge():number{\n        return --this._charges;\n    }\n\n    get name(): string {\n        return this._name;\n    }\n\n    get description(): string {\n        return this._description;\n    }\n\n    get charges(): number {\n        return this._charges;\n    }\n\n    get ID() {\n        return this._ID;\n    }\n\n    get type(): string {\n        return this._type;\n    }\n\n    set type(value: string) {\n        this._type = value;\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGItem.prototype, 'type').set.name, this.constructor.name, arguments);\n    }\n\n    constructor(name: string, description: string, type: string, charges: number) {\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        console.log(\"[AGItem] Creating AGItem object [ID: \" + this._ID + \"]: \" + name + \".\");\n        this._name = name;\n        this._description = description;\n        this._charges = charges;\n        this._type = type;\n\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n    }\n\n    deleteItemInReferences(){\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.deleteItemInReferences.name, this.constructor.name, arguments);\n        g_references.delete(this._ID);\n    }\n}","// @flow\n\nimport {Event} from \"./Event.js\";\nimport {AGObject} from \"./AGObject.js\";\nimport type {Action, Trigger} from \"./EventType.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport {g_gamearea, g_history, g_loading, g_playing, g_references, getReferenceById} from \"./AGEngine.js\";\nimport {GlobalEvent} from \"./GlobalEvent.js\";\nimport {AGItem} from \"./AGItem.js\";\n\n/**\n * Eventhandler Class\n */\nexport class AGEventHandler{\n    get ID() {\n        return this._ID;\n    }\n\n    get events(): Array<Event> {\n        return this._events;\n    }\n\n    set events(value: Array<Event>) {\n        this._events = value;\n    }\n\n    /**\n     * Adds a new event to the Eventlist.\n     * @param event The event ID of the event to be added to the Eventlist.\n     */\n    addEvent(eventID:number){\n        this._events.push(getReferenceById(eventID));\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.addEvent.name, this.constructor.name, arguments);\n    }\n\n    /**\n     * Removes an Event from the Eventlist by ID.\n     * @param eventID The ID of the Event to be removed.\n     */\n    removeEventByID(eventID:number){\n        this.removeEvent(getReferenceById(eventID));\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.removeEventByID.name, this.constructor.name, arguments);\n        g_references.delete(eventID);\n    }\n\n    /**\n     * Removes an Event from the Eventlist by Event Object.\n     * @param event The Object that should be removed.\n     */\n    removeEvent(event:Event){\n        console.log(\"[AGEventHandler] Removing Event [ID: \" + event.ID + \"].\");\n        this._events.splice(this.findEventIndex(event), 1);\n    }\n\n    /**\n     * Removes a GlobalEvent from the GlobalEventlist by ID.\n     * @param eventID The ID of the GlobalEvent to be removed.\n     */\n    removeGlobalEventByID(eventID:number){\n        this.removeEvent(getReferenceById(eventID));\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.removeGlobalEventByID.name, this.constructor.name, arguments);\n        g_references.delete(eventID);\n    }\n\n    /**\n     * Removes a GlobalEvent from the Eventlist by GlobalEvent Object.\n     * @param event The Object that should be removed.\n     */\n    removeGlobalEvent(event:GlobalEvent){\n        console.log(\"[AGEventHandler] Removing Global Event [ID: \" + event.ID + \"].\");\n        this._globalEvents.splice(this.findGlobalEventIndex(event), 1);\n    }\n\n    _ID:number;\n    _events:Array<Event>;\n    _globalEvents:Array<GlobalEvent>;\n\n    constructor(){\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n        console.log(\"[AGEventHandler] Creating AGEventHandler object [ID: \" + this._ID + \"].\");\n        this._events = [];\n        this._globalEvents = [];\n    }\n\n\n    evaluateGlobalEvents(){\n        for(let i = 0; i < this._globalEvents.length; i++){\n            this.evaluateGlobalEvent(this._globalEvents[i]);\n        }\n    }\n\n    addGlobalEvent(eventID:number){\n        this._globalEvents.push(getReferenceById(eventID));\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.addGlobalEvent.name, this.constructor.name, arguments);\n    }\n\n    /**\n     * Evaluates a GlobalEvent if the conditions are met. Returns true, if the conditions are met.\n     * @param event The GlobalEvent object to be evaluated.\n     * @returns {boolean} Returns true, if the event's conditions are met, otherwise false.\n     */\n    evaluateGlobalEvent(event:GlobalEvent):boolean {\n        //console.log(event.funcOfConditionObject.apply(event.object.inventory, event.funcArgs));\n        if((event.repeat >= 1 || event.repeat === -1)){\n            switch(event.conditionObject){\n                case \"INVENTORY\":\n                    if(event.object.inventory){\n                        if(event.funcOfConditionObject.apply(event.object.inventory, event.funcArgs) === event.value){\n                            console.log(\"[AGEventHandler] Requirements for Global Event fulfilled. Executing action.\");\n                            console.log(event);\n                            this.fireAction(event.action);\n                            if(event.repeat >= 1) event.repeat--;\n                            return true;\n                        }\n                    }\n                    break;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Triggers an action. Currently only WINGAME is available.\n     * @param action The Action to be triggered.\n     */\n    fireAction(action:Action){\n        switch(action){\n            case \"WINGAME\":\n                g_gamearea.listener.room.solved = true;\n                break;\n        }\n    }\n\n    /**\n     * Returns the index of the event.\n     * @param event Event to be queried.\n     * @returns {number} Returns the index of the event.\n     */\n    findEventIndex(event:Event):number {\n        for(let i = 0; i < this._events.length; i++){\n            if(this._events[i].origin === event.origin &&\n                this._events[i].trigger === event.trigger &&\n                this._events[i].action === event.action &&\n                this._events[i].object === event.object &&\n                this._events[i].addObject === event.addObject\n            ) return i;\n        }\n        return -1;\n    }\n\n    /**\n     * Returns the index of the GlobalEvent object in the global events list. (function deprecated)\n     * @param event The GlobalEvent object to be searched for.\n     * @returns {number} Returns the ID of the GlobalEvent.\n     */\n    findGlobalEventIndex(event:GlobalEvent):number {\n        for(let i = 0; i < this._globalEvents.length; i++){\n            if(this._globalEvents[i].ID === event.ID)\n            return i;\n        }\n        return -1;\n    }\n\n    /**\n     * Deletes all events (also removing from reference table) that contain a specific item (ID).\n     * @param itemID The ID of the AGItem.\n     */\n    deleteEventsContainingItemById(itemID:number){\n        let agitem:AGItem = getReferenceById(itemID);\n        let that = this;\n        this._events.forEach(function(item){\n            if(item.addObject === agitem){\n                that.removeEventByID(item.ID);\n                console.log(\"[AGEventHandler] Deleted Event [ID: \" + item.ID + \"] from References Table.\");\n            }\n        })\n    }\n\n    /**\n     * Deletes all events (also removing from reference table) that contain a specific object (ID).\n     * @param objectID The ID of the AGObject.\n     */\n    deleteEventsContainingObjectById(objectID:number){\n        let agobject:AGObject = getReferenceById(objectID);\n        let that = this;\n        this._events.forEach(function(item){\n            if(item.addObject === agobject ||\n                item.origin === agobject ||\n                item.object === agobject){\n                that.removeEventByID(item.ID);\n                console.log(\"[AGEventHandler] Deleted Event [ID: \" + item.ID + \"] from References Table.\");\n            }\n        })\n    }\n\n    /**\n     * Deletes all GlobalEvents (also removing from reference table) that contain a specific object (ID).\n     * @param objectID The ID of the AGObject.\n     */\n    deleteGlobalEventsContainingObjectById(objectID:number){\n        let agobject:AGObject = getReferenceById(objectID);\n        let that = this;\n        this._globalEvents.forEach(function(item){\n            if(item.object === agobject){\n                that.removeGlobalEventByID(item.ID);\n                console.log(\"[AGEventHandler] Deleted Global Event [ID: \" + item.ID + \"] from References Table.\");\n            }\n        })\n    }\n\n    /*\n    findEvent(event:Event):?Event {\n        for(let i = 0; i < this._events.length; i++){\n            if(this._events[i].origin === event.origin &&\n                this._events[i].trigger === event.trigger &&\n                this._events[i].action === event.action &&\n                this._events[i].object === event.object &&\n                this._events[i].addObject === event.addObject\n            ) return this._events[i];\n        }\n        return null;\n    }\n    */\n\n    /**\n     * Finds and returns events that are connected to a respective AGObject, triggered by a Trigger.\n     * @param object The object the Event is expected to be fired.\n     * @param trigger The trigger that fires the event.\n     * @returns {Array<Event>} Returns an Array of Events that fits the requested AGObject and Trigger.\n     */\n    findEventsAfterCall(object:AGObject, trigger:Trigger):Array<Event>{\n        let events:Array<Event> = [];\n        for(let i = 0; i < this._events.length; i++){\n            if(this._events[i].origin === object &&\n                this._events[i].trigger === trigger\n            ) {\n                events.push(this._events[i]);\n            }\n        }\n        return events;\n    }\n\n    /**\n     * Function is called if certain events happen (e.g., collision, death) and reacts by triggering the respective function.\n     * @param object The AGObject that called this function.\n     * @param trigger The Trigger (e.g., ONCONTACT, ONDEATH)\n     */\n    call(object:AGObject, trigger:Trigger){\n        //console.log(\"[AGEventHandler] Received Event-Call from \" + object.name);\n        let events:Array<Event> = this.findEventsAfterCall(object, trigger);\n        for(let i = 0; i < events.length; i++){\n            if(events[i].repeat >= 1 || events[i].repeat === -1){\n                console.log(\"[AGEventHandler] Event triggered:\");\n                console.log(events[i]);\n                switch(events[i].trigger){\n                    //TRIGGER: ON CONTACT WITH OTHER OBJECT\n                    case \"ONCONTACT\":\n                        switch(events[i].action){\n                            // TRIGGER: ONCONTACT, ACTION: ADD TO INVENTORY\n                            case \"ADD\":\n                                events[i].object.inventory.addItem(events[i].addObject);\n                                break;\n                            // TRIGGER: ONCONTACT, ACTION: REMOVE FROM INVENTORY\n                            case \"REMOVE\":\n                                events[i].origin.inventory.removeItem(events[i].addObject);\n                                break;\n                            // TRIGGER: ONCONTACT, ACTION: MOVE FROM INVENTORY TO OTHER\n                            case \"MOVE\":\n                                events[i].origin.inventory.removeItem(events[i].addObject);\n                                events[i].object.inventory.addItem(events[i].addObject);\n                                break;\n                        }\n                        break;\n                    case \"ONDEATH\":\n                        switch(events[i].action){\n                            // TRIGGER: ONDEATH, ACTION: ADD TO INVENTORY\n                            case \"ADD\":\n                                events[i].object.inventory.addItem(events[i].addObject);\n                                break;\n                            // TRIGGER: ONDEATH, ACTION: REMOVE FROM INVENTORY\n                            case \"REMOVE\":\n                                events[i].origin.inventory.removeItem(events[i].addObject);\n                                break;\n                            // TRIGGER: ONDEATH, ACTION: MOVE FROM INVENTORY TO OTHER\n                            case \"MOVE\":\n                                events[i].origin.inventory.removeItem(events[i].addObject);\n                                events[i].object.inventory.addItem(events[i].addObject);\n                                break;\n                        }\n                        break;\n                }\n                events[i].repeat--;\n            }\n        }\n    }\n}","// @flow\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {AGObject} from \"./AGObject.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport {objectPartOfCollisions} from \"./Collision.js\";\nimport {g_history, g_IAudiCom, g_loading, g_playing, g_references} from \"./AGEngine.js\";\nimport {frbIntersectionPoint} from \"./AGPhysics.js\";\n\nlet gForward, gBackward, gLeft, gRight, gInteract;\n\n//let moveTimestamp;\n\n/**\n * Private function: if a collision is allowed (e.g., collision with portal) or not.\n * @param obj The object (AGObject) to be checked with.\n * @param collArray The array of AGObjects with the current collisions.\n * @returns {boolean} Returns true if collision is allowed, otherwise false.\n */\nfunction allowedCollision(obj:AGObject, collArray:Array<AGObject>):boolean{\n    for(let i = 0; i < collArray.length; i++){\n        if(obj !== collArray[i] && collArray[i].type !== \"PORTAL\") {\n            //console.log(\"[AGNavigation] \" + obj.name + \": Condition failed at object \" + collArray[i].name + \".\");\n            return false;\n        }\n    }\n    return true;\n}\n\n/**\n * Moves the AGObject into direction, depending on speed. Needs a timeStamp for deltaTime (frame-independent movement)\n * @param object The AGObject that should be move.\n * @param direction The direction as Vector3 the object should be moved to.\n * @param timeStamp A current frame-timestamp.\n */\nexport function move(object:AGObject, direction:Vector3, timeStamp?:Date){\n    let timeDiff;\n    if(timeStamp!==undefined){\n        timeDiff = new Date() - timeStamp;\n        timeDiff /= 1000;\n    } else {\n        timeDiff = 1;\n    }\n\n    object.position.add(object.speed.clone().multiply(direction).clone().multiplyScalar(timeDiff));\n    object.room.checkForCollision();\n\n    let PoC:Array<AGObject> = objectPartOfCollisions(object.room.collisions, object);\n\n    if(!allowedCollision(object, PoC)) {\n        console.log(\"[AGNavigation] \" + object.name + \": Can't move forward. Colliding with other object.\");\n\n        //Calculate position for collision sound, can be put before or after the sub\n        pointOfIntersectionForSound(PoC[0], object);\n        object.position.sub(object.speed.clone().multiply(direction).clone().multiplyScalar(timeDiff));\n\n\n    } else if(!object.room.pointInsideRoom(object.position, object.size)){\n        console.log(\"[AGNavigation] \" + object.name + \": Can't move forward. Colliding with room boundaries.\");\n        object.position.sub(object.speed.clone().multiply(direction).clone().multiplyScalar(timeDiff));\n    }\n}\n\nfunction pointOfIntersectionForSound(collisionObject:AGObject, object:AGObject){\n    let p1:Vector3, p2:Vector3, p3:Vector3, p4:Vector3;\n\n    //get the 8 corners of the cube\n    let p1TOP:Vector3 = extractPlanePoint(object, -1,+1,-1);\n    let p1BOTTOM:Vector3 = extractPlanePoint(object, -1,-1,-1);\n\n    let p2TOP:Vector3 = extractPlanePoint(object, +1,+1,-1);\n    let p2BOTTOM:Vector3 = extractPlanePoint(object, +1,-1,-1);\n\n    let p3TOP:Vector3 = extractPlanePoint(object, -1,+1,+1);\n    let p3BOTTOM:Vector3 = extractPlanePoint(object, -1,-1,+1);\n\n    let p4TOP:Vector3 = extractPlanePoint(object, +1,+1,+1);\n    let p4BOTTOM:Vector3 = extractPlanePoint(object, +1,-1,1);\n\n    //middle it to 4\n    p1 = p1TOP.clone().sub((p1TOP.clone().sub(p1BOTTOM).clone().multiplyScalar(0.5)));\n    p2 = p2TOP.clone().sub((p2TOP.clone().sub(p2BOTTOM).clone().multiplyScalar(0.5)));\n    p3 = p3TOP.clone().sub((p3TOP.clone().sub(p3BOTTOM).clone().multiplyScalar(0.5)));\n    p4 = p4TOP.clone().sub((p4TOP.clone().sub(p4BOTTOM).clone().multiplyScalar(0.5)));\n\n    //rotate the corners according to the direction of the object\n    p1 = rotateAroundPoint(object.position, p1, getAngle(object.direction));\n    p2 = rotateAroundPoint(object.position, p2, getAngle(object.direction));\n    p3 = rotateAroundPoint(object.position, p3, getAngle(object.direction));\n    p4 = rotateAroundPoint(object.position, p4, getAngle(object.direction));\n\n    //array for the 4 points, so it is easier to iterate later on\n    let points:Array<Vector3> = [];\n    points.push(p2);\n    points.push(p3);\n    points.push(p4);\n    points.push(p1);\n\n    points.push(p4);\n    points.push(p3);\n    points.push(p2);\n    points.push(p1);\n\n    //build directions between points\n    let dirs:Array<Vector3> = [];\n    dirs.push(p1.clone().sub(p2).normalize());\n    dirs.push(p2.clone().sub(p3).normalize());\n    dirs.push(p3.clone().sub(p4).normalize());\n    dirs.push(p4.clone().sub(p1).normalize());\n    dirs.push(p1.clone().sub(p4).normalize());\n    dirs.push(p4.clone().sub(p3).normalize());\n    dirs.push(p3.clone().sub(p2).normalize());\n    dirs.push(p2.clone().sub(p1).normalize());\n\n    let intersectPoints:Array<Vector3> = [];\n\n    //closest point after iteration\n    let smallest:Vector3 = null;\n    let smallestDist:number = Number.MAX_VALUE;\n\n    //saves pair of Distance and Vector\n    let pairDistancePoint:Array<[number, Vector3]> = [];\n\n    if(g_IAudiCom) g_IAudiCom.deleteDots();\n\n    //shoot rays from 8 directions, over corners\n    for(let i = 0; i < 8; i++){\n        let dist:number = extractPointToArray(collisionObject, points[i], dirs[i], intersectPoints);\n        if(dist !== undefined && dist !== 0){\n            pairDistancePoint.push([dist, intersectPoints[intersectPoints.length-1]]);\n            //g_IAudiCom.drawDot(pairDistancePoint[pairDistancePoint.length-1][1].x, pairDistancePoint[pairDistancePoint.length-1][1].z);\n            if(pairDistancePoint[pairDistancePoint.length-1][0] < smallestDist){\n                smallestDist = pairDistancePoint[pairDistancePoint.length-1][0];\n                smallest = pairDistancePoint[pairDistancePoint.length-1][1];\n            }\n        }\n    }\n\n   //console.log(pairDistancePoint);\n\n    //console.log(extractPointToArray(collisionObject, p2, dirs[0], intersectPoints));\n    //console.log(extractPointToArray(collisionObject, p3, dirs[1], intersectPoints));\n    //console.log(extractPointToArray(collisionObject, p4, dirs[2], intersectPoints));\n    //console.log(extractPointToArray(collisionObject, p1, dirs[3], intersectPoints));\n\n    //console.log(extractPointToArray(collisionObject, p4, dirs[4], intersectPoints));\n    //console.log(extractPointToArray(collisionObject, p3, dirs[5], intersectPoints));\n    //console.log(extractPointToArray(collisionObject, p2, dirs[6], intersectPoints));\n    //console.log(extractPointToArray(collisionObject, p1, dirs[7], intersectPoints));\n\n    //console.log(smallest);\n    //console.log(smallestDist);\n\n\n\n    //console.log(intersectPoints);\n\n    //for(let i = 0; i < intersectPoints.length; i++){\n\n            if(g_IAudiCom && smallest != null) {\n                //console.log(intersectPoints[i].distanceTo(object.position));\n                g_IAudiCom.drawDot(smallest.x, smallest.z);\n                if(object.type === \"PLAYER\" && object.hitSound) object.hitSound.playOnceAtPosition(smallest);\n\n                for(let i = 0; i < 4; i++){\n                    //g_IAudiCom.drawDot(points[i].x, points[i].z);\n                }\n            }\n    //}\n}\n\nfunction getAngle(dir:Vector3):number{\n    let angle = Math.atan2(dir.x, dir.z);\n    let degrees = 180*angle/Math.PI;\n    return (180+Math.round(degrees))%360;\n}\n\nfunction rotateAroundPoint(center:Vector3, point:Vector3, angle:number):Vector3{\n    let radians = (Math.PI / 180) * angle,\n        cos = Math.cos(radians),\n        sin = Math.sin(radians),\n        nx = (cos * (point.x - center.x)) + (sin * (point.z - center.z)) + center.x,\n        nz = (cos * (point.z - center.z)) - (sin * (point.x - center.x)) + center.z;\n    return new Vector3(nx, point.y, nz);\n}\n\nfunction extractPointToArray(collisionObject:AGObject, point:Vector3, dir:Vector3, arrToAdd:Array<Vector3>):number{\n    let pt:Vector3 = frbIntersectionPoint(collisionObject, point, dir);\n    if(pt!==null) {\n        arrToAdd.push(pt);\n        return point.distanceTo(pt);\n    }\n    return 0;\n}\n/*\nfunction pointOfIntersection(PoC_arr:Array<AGObject>, obj:AGObject){\n    let point:Vector3;\n    for(let i = -1; i <= 1; i+=2){\n        for(let j = -1; j <= 1; j+=2){\n            for(let k = -1; k <= 1; k+=2){\n                point = new Vector3(obj.position.x-(obj.size.x/2)*(i), obj.position.y-(obj.size.y/2)*(j), obj.position.z-(obj.size.z/2)*(k));\n                if(isPointInsideAABB(point, PoC_arr[0])){\n                    console.log(\"[AGNavigation] \" + obj.name + \": Playing sound at position: \" + Math.round(point.x) + \" \" + Math.round(point.y) + \" \" + Math.round(point.z));\n                }\n            }\n        }\n    }\n}*/\n/*\n//https://stackoverflow.com/questions/6408670/line-of-intersection-between-two-planes\nfunction planeIntersectPlane(PoC_arr:Array<AGObject>, obj:AGObject){\n    let r_points:Array<Vector3> = [], r_normals:Array<Vector3> = [];\n    let plane1_arr:Array<Plane> = calculatePlanesCCW(PoC_arr[0]);\n    let plane2_arr:Array<Plane> = calculatePlanesCCW(obj);\n\n    if(g_IAudiCom) g_IAudiCom.deleteDots();\n\n    for(let i = 0; i < plane1_arr.length; i++){\n        for(let j = 0; j < plane2_arr.length; j++){\n            let plane1:Plane = plane1_arr[i];\n            let plane2:Plane = plane2_arr[j];\n\n            let p3_normal:Vector3 = new Vector3();\n            p3_normal.crossVectors(plane1.normal, plane2.normal);\n            const det:number = p3_normal.lengthSq();\n\n            //console.log(p3_normal.clone().cross(plane2.normal).clone().multiplyScalar(plane1.constant).clone().add(plane1.clone().normal.cross(p3_normal).clone().multiplyScalar(plane2.constant)));\n            if(det !== 0.0){\n                let vToPush:Vector3 = (p3_normal.clone().cross(plane2.normal).clone().multiplyScalar(plane1.constant).add(plane1.clone().normal.cross(p3_normal).clone().multiplyScalar(plane2.constant))).clone().divideScalar(det);\n                if(pointInsideSphere(vToPush, obj)){\n                    if(g_IAudiCom) {\n                        g_IAudiCom.drawDot(vToPush.x, vToPush.z);\n                    }\n                    r_points.push(vToPush);\n                    r_normals.push(p3_normal);\n                }\n            } else {\n                //console.log(\"nah\");\n            }\n\n        }\n    }\n\n    //console.log(r_points);\n    //console.log(r_normals);\n}\n\n */\n/*\nfunction pointInsideSphere(point:Vector3, obj:AGObject):boolean{\n    //console.log((point.clone().distanceTo(obj.position.clone())));\n    if((point.clone().distanceTo(obj.position.clone())) <= (obj.position.clone().add(obj.size)).clone().distanceTo(obj.position)) return true;\n    return false;\n}*/\n/*\nfunction calculatePlanesCCW(obj:AGObject):Array<AGObject> {\n    let return_arr:Array<AGObject> = [];\n\n    let plane_a:Plane = new Plane();\n    let plane_b:Plane = new Plane();\n    let plane_c:Plane = new Plane();\n    let plane_d:Plane = new Plane();\n    let plane_e:Plane = new Plane();\n    let plane_f:Plane = new Plane();\n    let v1:Vector3, v2:Vector3, v3:Vector3;\n\n    v1 = extractPlanePoint(obj, -1,+1,-1);\n    v2 = extractPlanePoint(obj, -1, -1, -1);\n    v3 = extractPlanePoint(obj, +1, -1, -1);\n    plane_a.setFromCoplanarPoints(v1.clone(), v2.clone(), v3.clone());\n    console.log(plane_a);\n    return_arr.push(plane_a);\n\n    v1 = extractPlanePoint(obj, +1,+1,-1);\n    v2 = extractPlanePoint(obj, +1, -1, -1);\n    v3 = extractPlanePoint(obj, +1, -1, +1);\n    plane_b.setFromCoplanarPoints(v1.clone(), v2.clone(), v3.clone());\n    return_arr.push(plane_b);\n\n    v1 = extractPlanePoint(obj, -1,+1,+1);\n    v2 = extractPlanePoint(obj, -1, +1, -1);\n    v3 = extractPlanePoint(obj, +1, +1, -1);\n    plane_c.setFromCoplanarPoints(v1.clone(), v2.clone(), v3.clone());\n    return_arr.push(plane_c);\n\n    v1 = extractPlanePoint(obj, +1,+1,+1);\n    v2 = extractPlanePoint(obj, +1, -1, +1);\n    v3 = extractPlanePoint(obj, -1, -1, +1);\n    plane_d.setFromCoplanarPoints(v1.clone(), v2.clone(), v3.clone());\n    return_arr.push(plane_d);\n\n    v1 = extractPlanePoint(obj, -1,+1,+1);\n    v2 = extractPlanePoint(obj, -1, -1, +1);\n    v3 = extractPlanePoint(obj, -1, -1, -1);\n    plane_e.setFromCoplanarPoints(v1.clone(), v2.clone(), v3.clone());\n    return_arr.push(plane_e);\n\n    v1 = extractPlanePoint(obj, +1,-1,+1);\n    v2 = extractPlanePoint(obj, +1, -1, -1);\n    v3 = extractPlanePoint(obj, -1, -1, -1);\n    plane_f.setFromCoplanarPoints(v1.clone(), v2.clone(), v3.clone());\n    return_arr.push(plane_f);\n\n    return return_arr;\n}\n */\n\nfunction extractPlanePoint(obj:AGObject, x:number, y:number, z:number):Vector3{\n    let returnV:Vector3 = new Vector3(obj.position.x+(obj.size.x/2*x), obj.position.y+(obj.size.x/2*y), obj.position.z+(obj.size.z/2*z));\n    return returnV;\n}\n\n/**\n * Class that is responsible for the movement buttons of the respective object.\n */\nexport class AGNavigation {\n\n    _ID:number;\n\n    get ID() {\n        return this._ID;\n    }\n\n\n    get forward(): number {\n        return gForward;\n    }\n\n    set forward(value: number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGNavigation.prototype, 'forward').set.name, this.constructor.name, arguments);\n        gForward = value;\n    }\n\n    get backward(): number {\n        return gBackward;\n    }\n\n    set backward(value: number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGNavigation.prototype, 'backward').set.name, this.constructor.name, arguments);\n        gBackward = value;\n    }\n\n    get left(): number {\n        return gLeft;\n    }\n\n    set left(value: number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGNavigation.prototype, 'left').set.name, this.constructor.name, arguments);\n        gLeft = value;\n    }\n\n    get right(): number {\n        return gRight;\n    }\n\n    set right(value: number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGNavigation.prototype, 'right').set.name, this.constructor.name, arguments);\n        gRight = value;\n    }\n\n    get interact(): number {\n        return gInteract;\n    }\n\n    set interact(value: number) {\n        gInteract = value;\n    }\n\n    /**\n     *\n     * @param forward Keycode for forward-movement.\n     * @param backward Keycode for backward-movement.\n     * @param left Keycode for left-turn.\n     * @param right Keycode for right-turn.\n     */\n    constructor(forward:number, backward:number, left:number, right:number, interact:number){\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        console.log(\"[AGNavigation] Creating AGNavigation object [ID: \" + this._ID + \"].\");\n        gForward = forward;\n        gBackward = backward;\n        gLeft = left;\n        gRight = right;\n        gInteract = interact;\n\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n        //moveTimestamp = new Date(0);\n    }\n\n    /**\n     * draw-loop\n     * @param player Object (AGObject) which can be moved by the player.\n     */\n    draw(player:AGObject){\n        //if(moveTimestamp.getTime() === new Date(0).getTime()) moveTimestamp = new Date();\n        window.onkeydown = function(e) {\n            if(e.keyCode===-1) return;\n            switch(e.keyCode){\n                case gForward:\n                    //move(player, true);\n                    move(player, player.direction);\n                    break;\n                case gBackward:\n                    //move(player, false);\n                    move(player, player.direction.clone().multiplyScalar(-1));\n                    break;\n                case gLeft:\n                    player.direction.applyAxisAngle(new Vector3(0,1,0), 8 * (Math.PI / 180));\n                    break;\n                case gRight:\n                    player.direction.applyAxisAngle(new Vector3(0,1,0), -8 * (Math.PI / 180));\n                    break;\n                case gInteract:\n                    player.interact();\n                    break;\n            }\n           // moveTimestamp = new Date();\n            //console.log(\"Position: \" + player.position.x + \" \" + player.position.y + \" \" + player.position.z);\n            //console.log(\"Direction: \" + player.direction.x + \" \" + player.direction.y + \" \" + player.direction.z);\n        }\n\n    }\n}","// @flow\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {AGSoundSource} from \"./AGSoundSource.js\";\nimport {AGObject} from \"./AGObject.js\";\nimport {AGNavigation} from \"./AGNavigation.js\";\nimport {g_controls} from \"./AGEngine.js\";\n\n/**\n * Player class that derives from AGObject. Allows interactions.\n */\nexport class AGPlayer extends AGObject {\n\n\n    navigation:AGNavigation;\n\n    /**\n     * Creates a player of the game.\n     * @param name Name of the player.\n     * @param position Position (Vector3) of the player.\n     * @param direction Direction (Vector3) the player is facing.\n     * @param size Size (Vector3) of the player.\n     * @param navigation Navigation (AGNavigation) that has the controls for the player.\n     * @param room\n     */\n    constructor(name:string, position:Vector3, direction:Vector3, size:Vector3){\n        console.log(\"[AGPlayer] Creating AGPlayer object: \" + name + \".\");\n\n        super(name, position, direction, size);\n        this._type = \"PLAYER\";\n\n    }\n\n    moveSound:AGSoundSource;\n\n    health:number;\n\n    /**\n     * draw-loop\n     */\n\n    draw(timeStamp:Date){\n        super.draw(timeStamp);\n        if(g_controls !== undefined) g_controls.draw(this);\n    }\n\n    /**\n     * Extends onCollisionEnter of AGObject and plays the hit sound.\n     * @param obj The object (AGObject) the player collides with.\n     */\n    onCollisionEnter(obj: AGObject) {\n        super.onCollisionEnter(obj);\n        if(this._hitSound) this._hitSound.audioElement.currentTime = 0;\n        if(this._hitSound) this._hitSound.play();\n    }\n\n    /**\n     * Called if the AGPlayer does the interact action.\n     */\n    interact() {\n\n        //damage others\n\n        if(!this.dangerous) return;\n\n        let timeDiff = new Date() - this._interactionCDTimestamp;\n        //console.log(timeDiff);\n        if(timeDiff < this._interactionCooldown) {\n            console.log(\"[AGPlayer] \" + this.name + \"still on Cooldown for \" + (this._interactionCooldown - timeDiff) + \"ms.\");\n            return;\n        }\n\n        super.interact();\n\n        let hits:Array<AGObject> = this.room.objectsRayIntersect(this);\n        for(let i = 0; i < hits.length; i++){\n            //if the object is in hit range\n            if(hits[i].position.distanceTo(this.position)<this.range){\n                console.log(\"[AGPlayer] Interaction Hits:\");\n                console.log(hits);\n                hits[i].doDamage(this);\n            }\n        }\n\n        this._interactionCDTimestamp = new Date();\n    }\n}","// @flow\nimport {AGObject} from \"./AGObject.js\";\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {AGCondition, evaluateAll} from \"./AGCondition.js\";\nimport {g_history, g_loading, g_playing, g_references, getReferenceById, setLoading} from \"./AGEngine.js\";\n\n/**\n * Portal class that offers options to move a player from X to Y via in-game objects.\n */\nexport class AGPortal extends AGObject{\n    get conditions() {\n        return this._conditions;\n    }\n\n    get exit(): ?AGPortal {\n        return this._exit;\n    }\n\n    set exit(value: ?AGPortal) {\n        this._exit = value;\n    }\n\n    _exit:?AGPortal;\n    _conditions:Array<AGCondition>;\n\n    /**\n     * Creates a portal (to and from the player can teleport)\n     * @param name The name of the portal.\n     * @param position Position (Vector3) of the portal.\n     * @param direction Direction (Vector3) of the portal.\n     * @param size Size (Vector3) of the portal.\n     */\n    constructor(name:string, position:Vector3, direction:Vector3, size:Vector3){\n        super(name, position, direction, size);\n        console.log(\"[AGPortal] Creating AGPortal object [ID: \" + this._ID + \"]: \" + name + \".\");\n        this._type = \"PORTAL\";\n        this._conditions = [];\n    }\n\n    /**\n     * Overrides onCollisionEnter of AGObject\n     * @param obj The object (AGObject) the portal collides with.\n     */\n    onCollisionEnter(obj: AGObject) {\n        //console.log(obj.type);\n        if((obj.type === \"PLAYER\" || obj.tag === \"ENEMY\") && !this._blockedObjects.includes(obj) && evaluateAll(this._conditions)){\n            //Blocks object that has just been teleported in other Portal to not get teleported again (until leave)\n            if(this._exit) this._exit.blockedObjects.push(obj);\n            if(this._exit) {\n                setLoading(true);\n                if(this._exit) obj.position = this._exit.position.clone();\n                setLoading(false);\n            }\n            if(this._exit) console.log(\"[AGPortal] Teleporting Object: \" + obj.name + \" to exit: \" + this._exit.name);\n            //this._blockedObjects.push(obj);\n\n        } else {\n            //console.log(\"[AGPortal] Registering already blocked object: \" + obj.name);\n        }\n    }\n\n    /**\n     * Links two portal with each other.\n     * @param portal Portal (AGPortal) this portal should be linked with.\n     */\n    linkPortals(portalID:number){\n        let portal:AGPortal = getReferenceById(portalID);\n        console.log(\"[AGPortal] Linking Portal: \" + this.name + \" to \" + portal.name);\n        portal.exit = (this);\n        this.exit = portal;\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.linkPortals.name, this.constructor.name, arguments);\n    }\n\n    /**\n     * Unlinks this portal and the other.\n     */\n    unlink(){\n        if(this._exit != null && this._exit.exit != null) this._exit.exit = null;\n        this._exit = null;\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.unlink.name, this.constructor.name, arguments);\n    }\n\n    /**\n     * Adds an AGCondition to this AGPortal by ID.\n     * @param condition The ID of the AGCondition to be added.\n     */\n    addConditionById(condition:number){\n        let cond:AGCondition = getReferenceById(condition);\n        this._conditions.push(cond);\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.addConditionById.name, this.constructor.name, arguments);\n    }\n\n    /**\n     * Deletes an AGCondition of this AGPortal by ID.\n     * @param condition The ID of the AGCondition to be deleted.\n     */\n    deleteConditionById(condition:number){\n        let cond:AGCondition = getReferenceById(condition);\n        let index:number = -1;\n        index = this._conditions.indexOf(cond);\n\n        if(index > -1) {\n            this._conditions.splice(index,1 );\n            console.log(\"[AGPortal] Removing Condition ID: [\" + condition + \"] from Object \" + this._name + \"'s list of conditions.\");\n        } else console.log(\"[AGPortal] Condition ID: [\" + condition + \"] not found in Object \" + this._name + \"'s list of conditions. Cannot remove.\");\n\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.deleteConditionById.name, this.constructor.name, arguments);\n        g_references.delete(condition)\n    }\n\n    getConditionById(condition:number){\n        let cond:AGCondition = getReferenceById(condition);\n        return this._conditions[this._conditions.indexOf(cond)];\n    }\n\n    /**\n     * Kills the AGPortal and triggers the kill function of the superclass.\n     */\n    kill() {\n        let that = this;\n        this._conditions.forEach(element => that.deleteConditionById(element.ID));\n        this._conditions = [];\n        super.kill();\n    }\n\n    /**\n     * draw-loop\n     */\n    /*draw(){\n        super.draw();\n        //console.log(this.position.x + \" \" + this.position.y + \" \" + this.position.z);\n    }*/\n\n    /*onCollisionExit(obj: AGObject) {\n\n    }*/\n}","// @flow\n\nimport {AGObject} from \"./AGObject.js\";\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\n\n/**\n * Exit that triggers the WINGAME if player collides with it.\n */\nexport class AGRoomExit extends AGObject {\n    get reached() {\n        return this._reached;\n    }\n\n    _reached:boolean;\n\n    constructor(name:string, position:Vector3, direction:Vector3, size:Vector3){\n        console.log(\"[AGRoomExit] Creating AGRoomExit object: \" + name + \".\");\n\n        super(name, position, direction, size);\n        this._type = \"EXIT\";\n        this._reached = false;\n    }\n\n    /**\n     * The routine that is called when there is a collision happening with this and another AGObject.\n     * @param obj The other AGObject that triggered the collision.\n     */\n    onCollisionEnter(obj: AGObject) {\n        super.onCollisionEnter(obj);\n        if(obj.type === \"PLAYER\"){\n            console.log(\"[AGRoomExit] \" + obj.name + \" reached exit.\");\n            this._reached = true;\n            obj.room.solved = true;\n        }\n\n    }\n\n    onCollisionExit(obj: AGObject) {\n        super.onCollisionExit(obj);\n    }\n}","// @flow\nimport {AGGameArea} from \"./AGGameArea.js\";\nimport {AGSaLo} from \"./AGSaLo.js\";\nimport {AGEventHandler} from \"./AGEventHandler.js\";\nimport {AGNavigation} from \"./AGNavigation.js\";\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {IAudiCom} from \"../ui/js/IAudiCom.js\";\nimport {AGItem} from \"./AGItem.js\";\n\nexport let g_loading:boolean = false;\nexport let g_playing:boolean = false;\nexport let g_references:Map<number, Object> = new Map();\nexport let g_history:AGSaLo = new AGSaLo();\nexport let g_eventHandler:AGEventHandler = new AGEventHandler();\nexport let g_gamearea:AGGameArea = new AGGameArea(\"Area\", new Vector3(30,2.5,10));\nexport let g_controls:AGNavigation;\n\n\nexport let g_IAudiCom:IAudiCom;\n\n/**\n * Sets the IAudiCom Interface that connects the GUI with the Engine. Global variable.\n * @param IAC The IAudiCom interface.\n */\nexport function setIAudiCom(IAC:IAudiCom){\n    g_IAudiCom = IAC;\n}\n\n/**\n * Sets the GameArea. Global variable.\n * @param gameArea The AGGameArea to be set.\n */\nexport function setGameArea(gameArea:AGGameArea){\n    if(g_gamearea) g_gamearea = gameArea;\n}\n\n/**\n * Sets the EventHandler. Global variable.\n * @param eventHandler The AGEventHandler to be set.\n */\nexport function setEventHandler(eventHandler:AGEventHandler){\n    if(g_eventHandler) g_eventHandler = eventHandler;\n}\n\n/**\n * Deletes an Item from the inventories, events (including the events themselves), and from the reference list.\n * @param itemID The id of the AGItem to be removed.\n */\nexport function deleteItem(itemID:number){\n    for (let [k, v] of g_references) {\n        if (v.constructor.name === \"AGInventory\") {\n           v.removeItemById(itemID);\n        }\n    }\n    g_eventHandler.deleteEventsContainingItemById(itemID);\n\n    getReferenceById(itemID).deleteItemInReferences();\n\n    console.log(\"[AGEngine] Deleted Item ID \" + itemID + \" from Inventories and References Table.\");\n}\n\n/**\n * Deletes a Condition by ID.\n * @param conditionID The ID of the AGCondition to be removed.\n */\nexport function deleteCondition(conditionID:number){\n    for (let [k, v] of g_references) {\n        if (v.constructor.name === \"AGPortal\") {\n            v.deleteConditionById(conditionID);\n        }\n    }\n\n   // g_references.delete(conditionID);\n    console.log(\"[AGEngine] Deleted Condition ID \" + conditionID + \" from Objects and References Table.\");\n}\n\n/**\n * Returns the ID of the AGObject, in which's inventory the item is.\n * @param itemID The ID of the AGItem.\n * @returns {number} Returns the ID of the AGObject.\n */\nexport function getOwnerIdOfItemById(itemID:number){\n    for (let [k, v] of g_references) {\n        if (v.constructor.name === \"AGInventory\") {\n            let item:AGItem = v.searchItemById(itemID);\n            if(item){\n                return v.attachedTo.ID;\n            }\n        }\n    }\n}\n//let resonanceAudioScene; //for first testings, maybe we will need something like AGRoom, where we can also put the resonance rooms into\n//let AGGameArea = new AGGameArea(\"main\", new Vector3(20,20,0)); //simulate something \"static\", probably (quite sure :p) not state of the art\n/*\nGame Area in which the audio game is played. It holds all audio game objects.\n */\n\n/**\n * Creates a new EventHandler and GameArea, mainly for rebuilding the whole scene or creating a new one.\n */\nexport function rebuildHandlerGameArea(){\n    g_eventHandler = new AGEventHandler();\n    g_gamearea = new AGGameArea(\"Area\", new Vector3(30,2.5,10));\n}\n\n/**\n * Sets the Navigation to be a global variable.\n * @param controls The AGNavigation controls to be set as global variable.\n */\nexport function setControl(controls:AGNavigation){\n    g_controls = controls;\n}\n\n/**\n * Looks up the reference of the ID in the Reference-ID-Table and returns the object under the saved ID.\n * @param id ID where you want to retrieve the respective object from.\n * @returns {void|Object} Return the object or void.\n */\nexport function getReferenceById(id:number):Object{\n    return g_references.get(id);\n}\n\n/**\n * Looks up the ID of the reference in the Reference-ID-Table and returns the saved ID. Every object should have an ID as well which -- again-- should be the same as in the Reference-ID-Table\n * @param obj Object where you want to retrieve the respective ID from.\n * @returns {*} Returns the ID (number).\n */\nexport function getIdByReference(obj:Object):number{\n    return [...g_references.entries()]\n    // $FlowFixMe\n        .filter(({ 1: v }) => v === obj)\n        .map(([k]) => k)[0];\n    //return Object.keys(g_references).find(key => g_references[key] === obj);\n}\n\n/**\n * Returns all IDs of a given Type (e.g., AGItem) from the references table.\n * @param type The type as string.\n * @returns {Array} Returns an array of found IDs.\n */\nexport function getReferencesOfType(type:string):Array<number> {\n    let returnArr = [];\n    for (let [k, v] of g_references) {\n        if (v.constructor.name === type) returnArr.push(k);\n    }\n    return returnArr;\n}\n\n/**\n * Public flag that should be set to true if the system loads or rebuilds a level. Disables the automated saving during loading.\n * @param bool True if the system is in loading state, false if not.\n */\nexport function setLoading(bool:boolean){\n    g_loading = bool;\n}\n/*\nconst ConditionEnum = {\n    None: 0,\n    Moving: 1,\n    Permanent: 2,\n};*/\n\nlet request;\n\n//Update Loop\nfunction animate(gameArea:AGGameArea) {\n    draw(gameArea);\n    request = window.requestAnimationFrame(function () {\n        animate(gameArea);\n    })\n}\n\n//Calling the gameArea for draw (update loop tick)\nfunction draw(gameArea:AGGameArea) {\n    g_eventHandler.evaluateGlobalEvents();\n    gameArea.draw();\n}\n\n/**\n * Starts and stops the game.\n * @param gameArea The AGGameArea the game is running in.\n * @param state Set to true, if the game should run, otherwise set to false.\n */\nexport function play(gameArea:AGGameArea, state:boolean){\n    g_playing = state;\n    if(g_playing){\n        console.log(\"[AGEngine] Playing...\");\n        animate(gameArea);\n    } else {\n        console.log(\"[AGEngine] Stop Playing...\");\n        cancelAnimationFrame(request);\n        stop(gameArea);\n        unsolveRooms(gameArea);\n    }\n}\n\n//Stop game\nfunction stop(gameArea:AGGameArea){\n    gameArea.stop();\n}\n\n/**\n * Sets a room to be unsolved again, if it has been set to solved (e.g., player has reached the goal).\n * @param gameArea The AGGameArea the game is running in.\n */\nfunction unsolveRooms(gameArea:AGGameArea){\n    gameArea.unsolveRooms();\n}","// @flow\n\nimport {AGItem} from \"./AGItem.js\";\nimport {AGObject} from \"./AGObject.js\";\nimport {g_history, g_loading, g_playing, g_references, getReferenceById} from \"./AGEngine.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\n\n/**\n * The Inventory class which can hold several items. Offers functions for inventory modification.\n */\nexport class AGInventory{\n\n    _inventory:Array<AGItem>;\n    _attachedTo:AGObject;\n    _ID:number;\n\n    get ID() {\n        return this._ID;\n    }\n\n\n    get attachedTo(): AGObject {\n        return this._attachedTo;\n    }\n\n    set attachedTo(value: AGObject) {\n        this._attachedTo = value;\n    }\n\n    constructor(object:AGObject) {\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        console.log(\"[AGInventory] Creating AGInventory object [ID: \" + this._ID + \"]. for Object: \" + object.name);\n        this._inventory = [];\n        this._attachedTo = object;\n    }\n\n\n    get inventory(): Array<AGItem> {\n        return this._inventory;\n    }\n\n    set inventory(value: Array<AGItem>) {\n        this._inventory = value;\n    }\n\n    addItemById(itemID:number){\n        let item = getReferenceById(itemID);\n        this._inventory.push(item);\n        console.log(\"[AGInventory] Adding Item [\" + item.ID + \"] \" + item.name + \" to Object \" + this._attachedTo.name + \"'s inventory.\");\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.addItemById.name, this.constructor.name, arguments);\n    }\n\n    //can only be triggered through events\n    addItem(item:AGItem){\n        this._inventory.push(item);\n        console.log(\"[AGInventory] Adding Item \" + item.name + \" to Object \" + this._attachedTo.name + \"'s inventory.\");\n    }\n\n    /**\n     * Returns the amount of items in this AGInventory with the same name.\n     * @param name The name of the AGItem.\n     * @returns {number} The amount of AGItems found with the given name.\n     */\n    countByName(name:string):number {\n        let count:number = 0;\n        for(let i = 0; i < this._inventory.length; i++){\n            if(this._inventory[i].name.localeCompare(name) === 0){\n                count++;\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Returns the amount of items in this AGInventory with the same type.\n     * @param type The type of the AGItem.\n     * @returns {number} The amount of AGItems found with the given type.\n     */\n    countByType(type:string):number {\n        let count:number = 0;\n        for(let i = 0; i < this._inventory.length; i++){\n            if(this._inventory[i].type.localeCompare(type) === 0){\n                count++;\n            }\n        }\n        return count;\n    }\n\n    /**\n     * Removes an item from this AGInventory by AGItem object.\n     * @param item The AGItem object that should be removed from the inventory.\n     */\n    removeItem(item:AGItem){\n        let indexToDelete:number = -1;\n        for(let i = 0; i < this._inventory.length; i++){\n            if(this._inventory[i] === item){\n                indexToDelete = i;\n                break;\n            }\n        }\n        if(indexToDelete > -1) {\n            this._inventory.splice(indexToDelete, 1);\n            console.log(\"[AGInventory] Removing Item \" + item.name + \" from Object \" + this._attachedTo.name + \"'s inventory.\");\n        } else console.log(\"[AGInventory] Item \" + item.name + \" not found in Object \" + this._attachedTo.name + \"'s inventory. Cannot remove.\");\n    }\n\n\n    /**\n     * Removes an item from this AGInventory by ID.\n     * @param itemID The item ID that should be removed from the inventory.\n     */\n    removeItemById(itemID:number){\n        this.removeItem(getReferenceById(itemID));\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.removeItemById.name, this.constructor.name, arguments);\n    }\n\n    searchItemByName(name:string):?AGItem{\n        for(let i = 0; i < this._inventory.length; i++){\n            if(this._inventory[i].name.localeCompare(name) === 0){\n                return this._inventory[i];\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Searches for a AGItem in this AGInventory. Returns the item if found, otherwise null.\n     * @param item The AGItem object that is being looked for.\n     * @returns {null|*} Returns the AGItem if found, otherwise null.\n     */\n    searchItem(item:AGItem):?AGItem{\n        for(let i = 0; i < this._inventory.length; i++){\n            if(this._inventory[i] === item){\n                return this._inventory[i];\n            }\n        }\n        return null;\n    }\n\n    /**\n     * Checks if a AGItem is in this AGInventory, by ID. Returns true if found, otherwise false.\n     * @param itemID The ID of the AGItem to be found.\n     * @returns {boolean} Returns true, if the inventory has the item, otherwise false.\n     */\n    hasItemById(itemID:number):boolean{\n        if(this.searchItemById(itemID)) return true;\n        return false;\n    }\n\n    /**\n     Searches for a AGItem in this AGInventory, by ID. Returns the item if found, otherwise null.\n     * @param item The AGItem object that is being looked for.\n     * @returns {?AGItem} Returns the AGItem if found, otherwise null.\n     */\n    searchItemById(itemID:number):?AGItem{\n        return(this.searchItem(getReferenceById(itemID)));\n    }\n\n    /**\n     * Changes the amount of charges of a AGItem.\n     * @param item The item for which the charges are changed.\n     * @param changeBy The amount by which the charges should be changed.\n     */\n    changeItemCharge(item:AGItem, changeBy:number){\n        if(this.searchItem(item)!==null){\n            item.charges += changeBy;\n        }\n    }\n}","// @flow\n\nimport {g_references, getReferenceById, setEventHandler, setGameArea, setLoading} from \"./AGEngine.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {AGEventHandler} from \"./AGEventHandler.js\";\nimport {AGGameArea} from \"./AGGameArea.js\";\nimport {AGNavigation} from \"./AGNavigation.js\";\nimport {AGRoom} from \"./AGRoom.js\";\nimport {AGPlayer} from \"./AGPlayer.js\";\nimport {AGRoomExit} from \"./AGRoomExit.js\";\nimport {AGObject} from \"./AGObject.js\";\nimport {AGSoundSource} from \"./AGSoundSource.js\";\nimport {AGPortal} from \"./AGPortal.js\";\nimport {AGInventory} from \"./AGInventory.js\";\nimport {GlobalEvent} from \"./GlobalEvent.js\";\nimport {Event} from \"./Event.js\";\nimport {AGItem} from \"./AGItem.js\";\nimport {AGCondition} from \"./AGCondition.js\";\n\n\n//import {clone} from \"./js/Lodash/core.js\"\n\n//let _ = require('lodash/core');\n\n/**\n * Class which is responsible for saving and loading of levels.\n */\nexport class AGSaLo {\n    _classes:Array<Function>;\n\n\n    get savedObjects() {\n        return this._savedObjects;\n    }\n\n    _savedObjects:Array<SaLoCommand>;\n\n    constructor(){\n        this._savedObjects = [];\n        this._classes = [];\n        this._classes.push(AGEventHandler.prototype, AGGameArea.prototype, AGNavigation.prototype, AGRoom.prototype, AGPlayer.prototype, AGRoomExit.prototype, AGObject.prototype, AGSoundSource.prototype, AGPortal.prototype, Event.prototype, GlobalEvent.prototype, AGInventory.prototype, AGItem.prototype, AGCondition.prototype);\n    }\n\n    ike(objID:number, func:string, fclass:string, args:Array<Object>){\n        let _args = Array.prototype.slice.call(args);\n\n        this._savedObjects.push(new SaLoCommand(objID, func, fclass, cloneArguments(_args)));\n        //g_references.set(obj.id, obj);\n    }\n\n    printLevel(){\n        console.log(JSON.stringify(this._savedObjects));\n    }\n\n    /**\n     * Saves a string to the browser's clipboard.\n     * @param val The string that should be copied to the clipboard.\n     */\n    saveValueToClipboard(val:string){\n        let dummy = document.createElement(\"textarea\");\n        // to avoid breaking orgain page when copying more words\n        // cant copy when adding below this code\n        // dummy.style.display = 'none'\n        if(document.body) document.body.appendChild(dummy);\n        //Be careful if you use texarea. setAttribute('value', value), which works with \"input\" does not work with \"textarea\".  Eduard\n        dummy.value = val;\n        dummy.select();\n        document.execCommand(\"copy\");\n        if(document.body) document.body.removeChild(dummy);\n    }\n\n    //only works outside of the little firefox world\n    async loadLevelFromClipboard(){\n        console.log(\"[AGSaLo] Loading Level from Clipboard.\");\n        const items = await navigator.clipboard.read();\n        // $FlowFixMe\n        const textBlob = await items[0].getType(\"text/plain\");\n        const text = await (new Response(textBlob)).text();\n        this.rebuild(text);\n    }\n\n    saveLevelToClipboard(){\n        console.log(\"[AGSaLo] Saving Level to Clipboard.\");\n        this.saveValueToClipboard(JSON.stringify(this._savedObjects));\n    }\n\n    /**\n     * Rebuilds the game / level based on the provided string. Only accepts a string that has been created by the export function of the engine before.\n     * @param lvl The game / level to be rebuilt.\n     */\n    rebuild(lvl?:string){\n        //console.log(g_history);\n        g_references.clear();\n        IncrementOneCounter.reset();\n\n        let serialized:string;\n        //let parsedObject:Object;\n\n        if(!lvl){\n            //serialized = JSON.stringify(this._savedObjects);\n            //this._savedObjects = JSON.parse(serialized);\n        } else {\n            console.log(\"[AGSaLo] Reading ...\");\n            this._savedObjects = JSON.parse(lvl);\n            console.log(\"[AGSaLo] Parsing complete!\");\n        }\n\n        //this.printLevel();\n        //console.log(parsedObject);\n        console.log(\"[AGSaLo] Start rebuilding. Loading Toggle has been ENABLED.\");\n        setLoading(true);\n        for(let i = 0; i < this._savedObjects.length; i++){\n            let obj = this._savedObjects[i];\n            //this._savedObjects\n\n            //console.log(prepareForStringify(this._savedObjects));\n            //obj.args\n            let args = cloneArguments(obj._args);\n\n            //prepare args (e.g., x,y,z -> Vector3)\n            for(let i = 0; i < args.length; i++){\n                let type = typeof args[i];\n                //console.log(\"[AGSaLo] Conversion from Object to Vector3. Type: \" + type.toString() + \" arg \" + args[i].toString());\n                if(type === \"object\" && args[i].x != null && args[i].y != null && args[i].z != null){\n                    args[i] = new Vector3(args[i].x, args[i].y, args[i].z);\n                }\n            }\n            //------------------------------------\n\n            if(obj._func === obj._fclass){\n                //console.log(obj._func);\n                let constructor:Function = getConstructor(obj._func, this._classes);\n                //console.log(constructor);\n                let newObject = Reflect.construct(constructor, args);\n                //TEMPORARY SOLUTION FOR EVENTHANDLER FIRST (NEEDED TO REFRESH global variables)\n                if(i === 0) setEventHandler(newObject);\n                if(i === 1) setGameArea(newObject);\n            } else {\n                let applyFunc:Function = this.getFunction(obj._fclass, obj._func);\n                \n                if(applyFunc) applyFunc.apply(getReferenceById(obj._objID), args)\n            }\n\n\n\n            //obj.func\n            /*if(obj._func.toString().startsWith('class')) {\n                let newObject = Reflect.construct(obj._func, args);\n                //g_references.set(obj.objID, newObject);\n            } else {\n                obj._func.apply(getReferenceById(obj.objID), args);\n            }*/\n        }\n        setLoading(false);\n        console.log(\"[AGSaLo] Rebuilding finished! Loading Toggle has been DISABLED.\");\n        console.log(this._savedObjects);\n        //console.log(g_history);\n        //this.saveLevel();\n    }\n\n    /**\n     * Returns a Function depending on the provided classname and name of the function.\n     * @param classname The class that entails the function.\n     * @param funct The function name provided as string.\n     * @returns {Function} The function found. Returns null if the function or the class does not exist.\n     */\n    getFunction(classname:string, funct:string):?Function{\n        let returnFunc:Function = null;\n        this._classes.forEach(function (item) {\n            if(item.constructor.name === classname){\n                //console.log(classname + \" \" + item.constructor.name);\n                if(funct.indexOf('set ') === 0){\n                    if(Object.getOwnPropertyDescriptor(item, funct.substring(4))){\n                        // $FlowFixMe\n                        returnFunc = Object.getOwnPropertyDescriptor(item, funct.substring(4)).set;\n                    } else {\n                        // $FlowFixMe\n                        returnFunc = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(item), funct.substring(4)).set;\n                    }\n                } else {\n                    if(Object.getOwnPropertyDescriptor(item, funct)){\n                        // $FlowFixMe\n                        returnFunc = Object.getOwnPropertyDescriptor(item, funct).value;\n                    } else {\n                        // $FlowFixMe\n                        returnFunc = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(item), funct).value;\n                    }\n                }\n\n                //console.log(returnFunc);\n            }\n        })\n        return returnFunc;\n        //Object.getOwnPropertyDescriptor(((class) classname).prototype, funct)\n    }\n}\n\n/**\n * Gets the constructor as function depending on the provided classname and name of the constructor.\n * @param classname The class that entails a constructor function.\n * @param obj An Array of classes.\n * @returns {null} Returns the Constructor found, otherwise null.\n */\nfunction getConstructor(classname:string, obj:Array<Function>):?Function{\n    let returnFunc = null;\n    obj.forEach(function (item) {\n        if(item.constructor.name === classname) returnFunc = item.constructor;\n    })\n    return returnFunc;\n}\n/*\nfunction prepareForStringify(obj:Array<SaLoCommand>){\n    let rString: Array<Array<string>> = [];\n    for(let i = 0; i < obj.length; i++) {\n        let string: Array<string> = [];\n        string[0] = obj[i].objID.toString();\n        string[1] = obj[i].func.name;\n        string[2] = JSON.stringify(obj[i].args);\n        rString.push(string);\n    }\n    return JSON.stringify(rString);\n}*/\n\n/**\n * Deep clones arguments and converts 3 part array back to Vector3.\n * @param args The arguments (args) provided by a function.\n * @returns {Object} Returns the new (converted) arugments array.\n */\nfunction cloneArguments(args:Array<Object>):Array<Object> {\n    let arr:Object = [];\n    for(let i = 0; i < args.length; i++){\n        if(args[i] instanceof Vector3){\n            arr.push(new Vector3(args[i].x, args[i].y, args[i].z));\n        } else {\n            arr.push(args[i]);\n        }\n    }\n\n    return arr;\n}\n\n\nexport class SaLoCommand {\n    get objID(): number {\n        return this._objID;\n    }\n    /*get obj(): Object {\n        return this._obj;\n    }*/\n\n\n    get func(): string {\n        return this._func;\n    }\n\n    get fclass(): string {\n        return this._fclass;\n    }\n\n    get args() {\n        return this._args;\n    }\n\n    /*\n    get context() {\n        return this._context;\n    }*/\n\n    _objID:number;\n    _func:string;\n    _fclass:string;\n    _args:Array<Object>;\n    //_context:Object;\n\n    constructor(objID: number, func:string, fclass:string, args:Array<Object>) {\n        this._func = func;\n        this._args = args;\n        this._objID = objID;\n        this._fclass = fclass;\n        //this._context = context;\n    }\n}","// @flow\n\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {AGObject} from \"./AGObject.js\";\nimport {AGRoom} from \"./AGRoom.js\";\n\nimport {AGSaLo} from \"./AGSaLo.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport {g_history, g_loading, g_playing, g_references, getReferenceById} from \"./AGEngine.js\";\n\nlet debug:number = 0;\n\n/**\n * GameArea that holds several AGRooms. It can be considered as the plane on which the game is played.\n */\nexport class AGGameArea {\n\n    get audioContext() {\n        return this._audioContext;\n    }\n    // $FlowFixMe\n    set audioContext(value) {\n        this._audioContext = value;\n    }\n\n    get ID() {\n        return this._ID;\n    }\n\n    get resonanceAudioScene() {\n        return this._resonanceAudioScene;\n    }\n    // $FlowFixMe\n    set resonanceAudioScene(value) {\n        this._resonanceAudioScene = value;\n    }\n    get listener(): AGObject {\n        return this._listener;\n    }\n\n    set listener(value:number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGGameArea.prototype, 'listener').set.name, this.constructor.name, arguments);\n        this._listener = getReferenceById(value);\n    }\n    get AGRooms(): Array<AGRoom> {\n        return this._AGRooms;\n    }\n\n    set AGRooms(value: Array<AGRoom>) {\n        this._AGRooms = value;\n    }\n    _AGRooms:Array<AGRoom>;\n    _name:string;\n    _size:Vector3;\n\n    get name(): string {\n        return this._name;\n    }\n\n    set name(value: string) {\n        this._name = value;\n    }\n\n    get size(): Vector3 {\n        return this._size;\n    }\n\n    set size(value: Vector3) {\n        this._size = value;\n    }\n\n    _listener:AGObject;\n\n    // $FlowFixMe\n    _resonanceAudioScene;\n    // $FlowFixMe\n    _audioContext;\n\n    _ID:number;\n\n\n    _history:AGSaLo;\n\n    constructor(name:string, size:Vector3){\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        console.log(\"[AGGameArea] Creating AGGameArea object [ID: \" + this._ID + \"].\");\n\n        this.AGRooms = [];\n        this.name = name;\n        this.size = size;\n\n        // Create an AudioContext\n        this._audioContext = new AudioContext();\n        // Create a (first-order Ambisonic) Resonance Audio scene and pass it\n        // the AudioContext.\n        // $FlowFixMe\n        this._resonanceAudioScene = new ResonanceAudio(this._audioContext);\n        // Connect the scenes binaural output to stereo out.\n        this._resonanceAudioScene.output.connect(this._audioContext.destination);\n\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n    }\n\n    addRoom(room:number){\n        this.AGRooms.push(getReferenceById(room));\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.addRoom.name, this.constructor.name, arguments);\n    }\n\n    /**\n     * Unsolves all rooms (sets the solved attribute of all rooms to false).\n     */\n    unsolveRooms(){\n        this._AGRooms.forEach(function(element) {\n            console.log(\"[AGGameArea] Unsolving Room [ID: \" + element.ID + \"].\");\n            element.solved = false;\n        });\n    }\n\n    clearRooms(){\n        this._AGRooms = [];\n    }\n\n    /*newRoom(name:string, size:Vector3, position:Vector3):AGRoom{\n        let agRoom:AGRoom = new AGRoom(name, size, position, this);\n        this.addRoom(agRoom);\n        return agRoom;\n    }*/\n\n    draw(){\n        this._AGRooms.forEach(function(element) {\n            if(element.live){\n                element.draw();\n                if(debug) console.log(\"draw on element: \" + element.name);\n            }\n        });\n    }\n\n    stop(){\n        this._AGRooms.forEach(function(element) {\n            element.stop();\n            if(debug) console.log(\"draw on element: \" + element.name);\n        });\n    }\n}","// @flow\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {AGObject} from \"./AGObject.js\";\nimport {colliding, hitBoundingBox, isAABBInsideAABB, isAABBInsideRoom, isPointInsideAABB} from \"./AGPhysics.js\";\nimport type {Type} from \"./AGType.js\";\nimport {Collision, collisionIsInArray} from \"./Collision.js\";\nimport {AGGameArea} from \"./AGGameArea.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport {g_gamearea, g_history, g_loading, g_playing, g_references, getReferenceById} from \"./AGEngine.js\";\n\nlet debug = 0;\n\n/**\n * AGRoom is a physically separated room of a game scene (e.g., level or floor). It follows resonance audio's room idea.\n */\nexport class AGRoom {\n    get collisions() {\n        return this._collisions;\n    }\n\n    set collisions(value:Array<Collision>) {\n        this._collisions = value;\n    }\n\n    get ID() {\n        return this._ID;\n    }\n\n    get live() {\n        return this._live;\n    }\n\n    set live(value:boolean) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGRoom.prototype, 'live').set.name, this.constructor.name, arguments);\n        this._live = value;\n    }\n    get positionOnGameArea(): Vector3 {\n        return this._positionOnGameArea;\n    }\n\n    set positionOnGameArea(value: Vector3) {\n        this._positionOnGameArea = value;\n    }\n\n    get gameArea(): AGGameArea {\n        return this._gameArea;\n    }\n\n    set gameArea(value: AGGameArea) {\n        this._gameArea = value;\n    }\n    get size(): Vector3 {\n        return this._size;\n    }\n\n    set size(value: Vector3) {\n        this._size = value;\n    }\n    get type():Type {\n        return this._type;\n    }\n\n    set type(value:Type) {\n        this._type = value;\n    }\n    get listener(): AGObject {\n        return this._listener;\n    }\n\n\n    get solved(): boolean {\n        return this._solved;\n    }\n\n    set solved(value: boolean) {\n        console.log(\"[AGRoom] Room \" + this._name + (value ? \" solved.\" : \" unsolved.\"));\n        this._solved = value;\n    }\n\n    set listener(valueID: number) {\n        this._listener = getReferenceById(valueID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGRoom.prototype, 'listener').set.name, this.constructor.name, arguments);\n    }\n\n    get resonanceAudioScene() {\n        return this._resonanceAudioScene;\n    }\n    // $FlowFixMe\n    set resonanceAudioScene(value) {\n        this._resonanceAudioScene = value;\n    }\n\n    // $FlowFixMe\n    _resonanceAudioScene;\n\n    get AGobjects(): Array<AGObject> {\n        return this._AGobjects;\n    }\n    _name:string;\n    _size:Vector3;\n    _ID:number;\n\n    get name(): string {\n        return this._name;\n    }\n\n    set name(value: string) {\n        this._name = value;\n    }\n\n    roomDimensions:Object;\n    roomMaterials:Object;\n\n    _listener:AGObject;\n    _type:Type;\n\n    _positionOnGameArea:Vector3;\n    _gameArea:AGGameArea;\n    _live:boolean;\n\n    _lastTime:Date;\n\n    _solved:boolean;\n\n    /**\n     *\n     * @param name The name of the room.\n     * @param size The size of the room as Vector3.\n     * @param positionOnGrid The position of the room in the overall grid (the game 'map').\n     * @param gameArea The AGGameArea this room is part of.\n     */\n    constructor(name:string, size:Vector3, positionOnGrid:Vector3){\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        console.log(\"[AGRoom] Creating AGRoom object [ID: \" + this._ID + \"]: \" + name + \".\");\n        this._positionOnGameArea = positionOnGrid;\n        this._live = false;\n\n        // Create a (first-order Ambisonic) Resonance Audio scene and pass it\n        // the AudioContext.\n        // $FlowFixMe\n        this._resonanceAudioScene = g_gamearea.resonanceAudioScene;\n\n        this.size = size;\n\n        this.roomDimensions = {\n            width: this.size.x,\n            height: this.size.y,\n            depth: this.size.z,\n        };\n\n        this.roomMaterials = {\n            // Room wall materials\n            left: 'brick-bare',\n            right: 'curtain-heavy',\n            front: 'marble',\n            back: 'glass-thin',\n            // Room floor\n            down: 'grass',\n            // Room ceiling\n            up: 'transparent',\n        };\n\n        this._resonanceAudioScene.setRoomProperties(this.roomDimensions, this.roomMaterials);\n\n        this._name = name;\n        this._type = \"GAMEAREA\";\n\n        if(!this._collisions){\n            this._collisions = [];\n        }\n        this._size = size;\n\n        this._lastTime = new Date(0);\n\n        this._AGobjects = [];\n\n        this._solved = false;\n\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n    }\n\n    _AGobjects:Array<AGObject>;\n    _collisions:Array<Collision>;\n\n    /**\n     * Adds a AGObject to the room (and will therefore be considered with every draw loop)\n     * @param gameObject The AGObject to add.\n     */\n    add(gameObjectID :number){\n        if(!this._AGobjects){\n            this._AGobjects = [];\n        }\n        let gameObject = getReferenceById(gameObjectID);\n        this._AGobjects.push(gameObject);\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.add.name, this.constructor.name, arguments);\n        gameObject.room = this;\n    }\n\n    /**\n     * Add a collision to the room Collision array.\n     * @param obj1 The first object that is involved in a collision.\n     * @param obj2 The second object that is involved in a collision.\n     */\n    addCollision(obj1:AGObject, obj2:AGObject){\n        this._collisions.push(new Collision(obj1, obj2));\n    }\n\n    objectsRayIntersect(obj:AGObject):Array<AGObject>{\n        let returnArr:Array<AGObject> = [];\n        for(let i = 0; i < this._AGobjects.length; i++){\n           if(hitBoundingBox(this._AGobjects[i], obj) && this._AGobjects[i] !== obj) returnArr.push((this._AGobjects[i]));\n        }\n        return returnArr;\n    }\n\n    betweenPlayerObjectRayIntersect(obj:AGObject):Array<AGObject>{\n        let returnArr:Array<AGObject> = [];\n        for(let i = 0; i < this._AGobjects.length; i++){\n            //console.log(obj);\n            //console.log(hitBoundingBox(this._AGobjects[i], obj, (g_gamearea.listener.position.clone().sub(obj.position.clone())).normalize()));\n            //console.log(this._AGobjects[i] !== obj);\n            //console.log(this._AGobjects[i] !== g_gamearea.listener);\n            //console.log((g_gamearea.listener.position.distanceTo(obj.position) < obj.position.distanceTo(this._AGobjects[i])));\n            if(obj && hitBoundingBox(this._AGobjects[i], obj, (g_gamearea.listener.position.clone().sub(obj.position.clone())).normalize()) && this._AGobjects[i] !== obj && this._AGobjects[i] !== g_gamearea.listener && (g_gamearea.listener.position.distanceTo(obj.position) < obj.position.distanceTo(this._AGobjects[i]))) returnArr.push((this._AGobjects[i]));\n        }\n        return returnArr;\n    }\n\n    /*objectPartOfCollision(obj:AGObject):?AGObject {\n        return objectPartOfCollision(this._collisions, obj);\n    }*/\n\n    /**\n     * Checks if a collision is happening in the respective room. If yes, it will be added to the local room collision array.\n     */\n    checkForCollision(){\n        //Collision?\n        for(let i = 0, len = this._AGobjects.length; i < len; i++){\n            for(let j = 0; j < len; j++){\n                if(i === j) continue;\n                else {\n                    if(this._AGobjects[i].collidable && this._AGobjects[j].collidable) {\n                        if (colliding(this._AGobjects[i], this._AGobjects[j])) {\n                            if((collisionIsInArray(this._collisions, new Collision(this._AGobjects[i], this._AGobjects[j]))) === -1){\n                                //console.log(\"[AGRoom] \" + this.name + \": Collision between \" + this._AGobjects[i].name + \" and \" + this._AGobjects[j].name);\n                                this._AGobjects[i].onCollisionEnter(this._AGobjects[j]);\n                                this.addCollision(this._AGobjects[i], this._AGobjects[j]);\n                            }\n                        } else {\n                            let index:number = collisionIsInArray(this._collisions, new Collision(this._AGobjects[i], this._AGobjects[j]));\n                            if (index > -1) {\n                                //console.log(\"[AGRoom] \" + this.name + \": Collision exit on \" + this._AGobjects[i].name + \" and \" + this._AGobjects[j].name);\n                                this._AGobjects[i].onCollisionExit(this._AGobjects[j]);\n                                this._collisions.splice(index, 1);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    predictCollisionByPoint(position:Vector3):Array<AGObject>{\n        let collisionArray:Array<AGObject> = [];\n        for(let i = 0, len = this._AGobjects.length; i < len; i++){\n            if(isPointInsideAABB(position, this._AGobjects[i])) collisionArray.push(this._AGobjects[i]);\n        }\n        return collisionArray;\n    }\n\n    /**\n     * Removes the AGObject from the room.\n     * @param obj The AGObject to be removed.\n     */\n    removeAGObject(obj:AGObject){\n        let index:number = -1;\n        for(let i = 0; i < this._AGobjects.length; i++){\n            if(obj === this._AGobjects[i]) index = i;\n        }\n        if(index === -1) return;\n        this._AGobjects.splice(index, 1);\n        this.removeCollisionWithObject(obj);\n        console.log(\"[AGRoom] Removed object \" + obj.name + \" from room \" + this.name + \".\");\n    }\n\n    removeCollisionWithObject(obj:AGObject){\n        for(let i = this._collisions.length-1; i>=0; i--){\n            if(this._collisions[i].obj1 === obj || this._collisions[i].obj2 === obj) this._collisions.splice(i,1);\n        }\n    }\n\n    /**\n     * Cross AABB check if two objects intersect. Returns an array of collisions.\n     * @param position Position (Vector3) of the object.\n     * @param size Size (Vector3) of the object.\n     * @returns {Array<AGObject>} An Array of AGObjects that intersect with the position and size of the object given.\n     */\n    predictCollisionByPointAndSize(position:Vector3, size:Vector3):Array<AGObject>{\n        let collisionArray:Array<AGObject> = [];\n        for(let i = 0, len = this._AGobjects.length; i < len; i++){\n            if(isAABBInsideAABB(position, size, this._AGobjects[i])) collisionArray.push(this._AGobjects[i]);\n        }\n        return collisionArray;\n    }\n\n    /**\n     * Checks if a position is inside a room (true) or not (false)\n     * @param position The position (Vector3) to be checked.\n     * @param size The size (Vector3) of the surrounding boundary the point.\n     * @returns {boolean} True, if point is inside room, otherwise false.\n     */\n    pointInsideRoom(position:Vector3, size:Vector3):boolean{\n        return isAABBInsideRoom(position, size, this);\n    }\n\n    /**\n     * draw-loop\n     */\n    draw(){\n        if(this._lastTime.getTime() === new Date(0).getTime()) this._lastTime = new Date();\n        //console.log(this._lastTime);\n        //All objects draw\n        for(let i = 0; i < this._AGobjects.length; i++){\n            this._AGobjects[i].draw(this._lastTime);\n            if(debug) console.log(\"draw on element: \" + this._AGobjects[i].name);\n        }\n\n        this.checkForCollision();\n        /*this._resonanceAudioScene.setListenerPosition(this._listener.position.x -  this.size.x/2,\n            this._listener.position.y - this.size.y/2,\n            this._listener.position.z - this.size.z/2);*/\n\n        this._resonanceAudioScene.setListenerPosition(this._listener.position.x,\n            this._listener.position.y,\n            this._listener.position.z);\n\n        this._resonanceAudioScene.setListenerOrientation(-this._listener.direction.x, 0, this._listener.direction.z, 0, 1, 0);\n\n        this._lastTime = new Date();\n    }\n\n    /**\n     * Iteratively goes through all objects stored in AGobjects and calls their respective stop. Clears collision array too.\n     */\n    stop(){\n        this._collisions = [];\n        this._AGobjects.forEach(function(element) {\n            element.stop();\n            if(debug) console.log(\"stop on element: \" + element.name);\n        });\n    }\n\n}","// @flow\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport type {Type} from \"./AGType.js\";\nimport {AGRoom} from \"./AGRoom.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport {g_gamearea, g_history, g_loading, g_playing, g_references, getReferenceById} from \"./AGEngine.js\";\nimport {AGObject} from \"./AGObject.js\";\n\n/**\n * Class that is responsible for sound propagation related stuff.\n */\nexport class AGSoundSource\n  /*extends AGObject*/ {\n    get update(): boolean {\n        return this._update;\n    }\n\n    set update(value: boolean) {\n        this._update = value;\n    }\n    get object(): AGObject {\n        return this._object;\n    }\n\n    set object(value: AGObject) {\n        this._object = value;\n    }\n\n    get ID() {\n        return this._ID;\n    }\n\n    get room(): AGRoom {\n        return this._room;\n    }\n\n    set room(value: AGRoom) {\n        this._room = value;\n    }\n    get looping(): boolean {\n        return this._looping;\n    }\n\n    set looping(value: boolean) {\n        this._looping = value;\n    }\n\n    get playing() {\n        return this._playing;\n    }\n\n    set playing(value:boolean) {\n        this._playing = value;\n    }\n    get type():Type {\n        return this._type;\n    }\n\n    set type(value:Type) {\n        this._type = value;\n    }\n\n    get audioElement() {\n        return this._audioElement;\n    }\n\n    set audioElement(value:Object) {\n        this._audioElement = value;\n    }\n\n    get tag(): string {\n        return this._tag;\n    }\n\n    set tag(value: string) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGSoundSource.prototype, 'tag').set.name, this.constructor.name, arguments);\n        this._tag = value;\n    }\n\n    get name(): string {\n        return this._name;\n    }\n\n    set name(value: string) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGSoundSource.prototype, 'name').set.name, this.constructor.name, arguments);\n        this._name = value;\n    }\n\n    get maxDistance(): number {\n        return this._maxDistance;\n    }\n\n    set maxDistance(value: number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGSoundSource.prototype, 'maxDistance').set.name, this.constructor.name, arguments);\n        this._maxDistance = value;\n        if(this.source) this.source.setMaxDistance(this._maxDistance);\n    }\n\n    get volume(): number {\n        return this._volume;\n    }\n\n    set volume(value: number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGSoundSource.prototype, 'volume').set.name, this.constructor.name, arguments);\n        console.log(\"[AGSoundSource] Changing volume of AGSoundSource object [ID: \" + this._ID + \"] to \" + value + \".\");\n        this._volume = value;\n        if(this.source) this._gainNode.gain.value = value;\n    }\n\n    _name:string;\n    file:Object;\n\n    _looping:boolean;\n    interval:number;\n    _playing:boolean;\n    _audioElement:Object;\n    audioElementSource:Object;\n    source:Object;\n    _type:Type;\n    _ID:number;\n\n    _update:boolean;\n\n    _object:AGObject;\n\n    _room:AGRoom;\n\n    _maxDistance:number;\n    _volume:number;\n\n    // $FlowFixMe\n    audioContext;\n    // $FlowFixMe\n    resonanceAudioScene;\n\n    _gainNode:GainNode;\n\n    _obstructionFilter:BiquadFilterNode;\n\n    _tag:string;\n\n\n\n// $FlowFixMe\n    /**\n     * Creates a new sound source for the room.\n     * @param name Name of the sound source.\n     * @param file Filepath to the sound source. Uses HTML5 audio.\n     * @param looping If the sound source should be looped.\n     * @param interval ?\n     * @param room The room this sound source is going to be played.\n     */\n    constructor(name:string, file:Object, looping:boolean, interval:number, roomID:number){\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        console.log(\"[AGSoundSource] Creating AGSoundSource object [ID: \" + this._ID + \"]: \" + name + \".\");\n        this.file = file;\n        this.interval = interval;\n        this._playing = false;\n        this._update = true;\n\n        this._room = getReferenceById(roomID);\n\n        this.audioContext = g_gamearea.audioContext;\n        this.resonanceAudioScene = this._room.resonanceAudioScene;\n\n        // Create an AudioElement.\n        this._audioElement = document.createElement('audio');\n\n        // Load an audio file into the AudioElement.\n        this.audioElement.src = this.file;\n\n        this.audioElementSource = this.audioContext.createMediaElementSource(this.audioElement);\n\n        this._gainNode = this.audioContext.createGain();\n        this._gainNode.gain.value = 1;\n\n        this.source = this.resonanceAudioScene.createSource();\n\n        this._obstructionFilter = this.audioContext.createBiquadFilter();\n        this._obstructionFilter.type = \"lowpass\";\n        this._obstructionFilter.frequency.value = 300;\n        this._obstructionFilter.gain.value = -8;\n\n        //this.audioElementSource.connect(this. _obstructionFilter);\n        //this. _obstructionFilter.connect(this.source.input);\n\n        this.source.setRolloff('logarithmic');\n        this.source.setMaxDistance(8);\n\n        this.audioElementSource.connect(this._gainNode).connect(this.source.input);\n        this._name = name;\n        this._type = \"SOUNDSOURCE\";\n        this._looping = looping;\n\n        this._volume = 1;\n\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n    }\n\n    /**\n     * Sets the position of the sound source.\n     * @param position New position (Vector3) of the sound source.\n     */\n    setPosition(position: Vector3){\n        /*this.source.setPosition(position.x - this.room.positionOnGameArea.x + this.room.size.x/2,\n            position.y - this.room.positionOnGameArea.y +this.room.size.y/2,\n            position.z - this.room.positionOnGameArea.z + this.room.size.z/2);*/\n\n        this.source.setPosition(position.x, position.y, position.z);\n\n        /*console.log(new Vector3(position.x - this.room.positionOnGameArea.x + this.room.size.x/2,\n            position.y - this.room.positionOnGameArea.y +this.room.size.y/2,\n            position.z - this.room.positionOnGameArea.z + this.room.size.z/2));*/\n\n    }\n\n    /**\n     * Starts the sound source. Doesn't care if it's already playing.\n     */\n    play(){\n        if(!this._playing && this._looping){\n            this._playing = true;\n            this.audioElement.loop = this._looping;\n            this.audioElement.play();\n        }\n\n        if(!this._looping){\n            this.audioElement.currentTime = 0;\n            this.audioElement.play();\n        }\n\n        //Attenuation not working properly...\n        //check objects between sound source and player\n        //if(this._object.name.localeCompare(\"Waterfall3\")==0) console.log(this._room.betweenPlayerObjectRayIntersect(this._object));\n        if(this._room.betweenPlayerObjectRayIntersect(this._object).length>0){\n            this.audioElementSource.disconnect();\n            this.audioElementSource.connect(this._gainNode).connect(this._obstructionFilter);\n            this._obstructionFilter.connect(this.source.input);\n        } else {\n            this.audioElementSource.disconnect();\n            this.audioElementSource.connect(this._gainNode).connect(this.source.input);\n        }\n    }\n\n    /**\n     * Stops the sound source.\n     */\n    stop(){\n       this.playing = false;\n       this.audioElement.pause();\n       this.audioElement.currentTime = 0;\n    }\n\n    pause(){\n        this.audioElement.pause();\n    }\n\n    /**\n     * Plays the sound source on the given position at least once (depending on loop property of the AGSoundSource)\n     * @param pos The Vector3 position where the sound is played at\n     */\n    playOnceAtPosition(pos:Vector3){\n        console.log(\"[AGSoundSource] Playing AGSoundSource [ID: \" + this._ID + \"]: \" + this._name + \" at position \" + pos.x.toFixed(2) + \"/\" + pos.y.toFixed(2) + \"/\" + pos.z.toFixed(2) + \".\");\n        this.stop();\n        this.setPosition(pos);\n        this.play();\n    }\n\n}","// @flow\nimport {Vector3} from \"../lib/js/three/Vector3.js\";\nimport {AGSoundSource} from \"./AGSoundSource.js\";\nimport {move} from \"./AGNavigation.js\";\nimport type {Type} from \"./AGType.js\";\nimport {AGRoom} from \"./AGRoom.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport {AGInventory} from \"./AGInventory.js\";\nimport {\n    g_eventHandler,\n    g_gamearea,\n    g_history,\n    g_loading,\n    g_playing,\n    g_references,\n    getReferenceById\n} from \"./AGEngine.js\";\n\n\nlet debug = 0;\n\n/**\n * The main class that serves as basis for other objects.\n */\nexport class AGObject {\n    get deathSound(): ?AGSoundSource {\n        return this._deathSound;\n    }\n\n    set deathSound(soundID:number) {\n        let deathSound = getReferenceById(soundID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'deathSound').set.name, this.constructor.name, arguments);\n        if(this._AGSoundSources.indexOf(deathSound) === -1) this._AGSoundSources.push(deathSound);\n        this._deathSound = deathSound;\n    }\n\n    clearDeathSound(){\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.clearDeathSound.name, this.constructor.name, arguments);\n        let index:number = (this._AGSoundSources.indexOf(this._deathSound));\n        if(this._deathSound && (index !== -1)) {\n            this._AGSoundSources.splice(index, 1);\n            this._deathSound = null;\n        }\n    }\n\n    get aliveSound(): ?AGSoundSource {\n        return this._aliveSound;\n    }\n\n    set aliveSound(soundID:number) {\n        let aliveSound = getReferenceById(soundID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'aliveSound').set.name, this.constructor.name, arguments);\n        if(this._AGSoundSources.indexOf(aliveSound) === -1) this._AGSoundSources.push(aliveSound);\n        this._aliveSound = aliveSound;\n    }\n\n    clearAliveSound(){\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.clearAliveSound.name, this.constructor.name, arguments);\n        let index:number = (this._AGSoundSources.indexOf(this._aliveSound));\n        if(this._aliveSound && (index !== -1)) {\n            this._AGSoundSources.splice(index, 1);\n            this._aliveSound = null;\n        }\n    }\n\n    get interactionSound():?AGSoundSource {\n        return this._interactionSound;\n    }\n\n    set interactionSound(soundID:number) {\n        let interactionSound = getReferenceById(soundID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'interactionSound').set.name, this.constructor.name, arguments);\n        if(this._AGSoundSources.indexOf(interactionSound) === -1) this._AGSoundSources.push(interactionSound);\n        this._interactionSound = interactionSound;\n    }\n\n    clearInteractionSound(){\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.clearInteractionSound.name, this.constructor.name, arguments);\n        let index:number = (this._AGSoundSources.indexOf(this._interactionSound));\n        if(this._interactionSound && (index !== -1)) {\n            this._AGSoundSources.splice(index, 1);\n            this._interactionSound = null;\n        }\n    }\n\n    get movementSound() {\n        return this._movementSound;\n    }\n\n    set movementSound(soundID:number) {\n        let movementSound = getReferenceById(soundID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'movementSound').set.name, this.constructor.name, arguments);\n        if(this._AGSoundSources.indexOf(movementSound) === -1) this._AGSoundSources.push(movementSound);\n        this._movementSound = movementSound;\n    }\n\n    get route():Array<Vector3> {\n        return this._route;\n    }\n    get damage(): number {\n        return this._damage;\n    }\n\n    set damage(value: number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'damage').set.name, this.constructor.name, arguments);\n        this._damage = value;\n    }\n\n    get dangerous(): boolean {\n        return this._dangerous;\n    }\n\n    set dangerous(value: boolean) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'dangerous').set.name, this.constructor.name, arguments);\n        this._dangerous = value;\n    }\n    get range(): number {\n        return this._range;\n    }\n\n    set range(value: number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'range').set.name, this.constructor.name, arguments);\n        this._range = value;\n    }\n    get destructible():boolean {\n        return this._destructible;\n    }\n\n    set destructible(value:boolean) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'destructible').set.name, this.constructor.name, arguments);\n        this._destructible = value;\n    }\n\n    get health():number {\n        return this._health;\n    }\n\n    set health(value:number) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'health').set.name, this.constructor.name, arguments);\n        this._health = value;\n    }\n    get ID() {\n        return this._ID;\n    }\n\n    get inventory() {\n        return this._inventory;\n    }\n\n    get room(): AGRoom {\n        return this._room;\n    }\n\n    set room(value: AGRoom) {\n        this._room = value;\n    }\n    get collidable() {\n        return this._collidable;\n    }\n\n    set collidable(value:boolean) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'collidable').set.name, this.constructor.name, arguments);\n        this._collidable = value;\n    }\n    get blockedObjects(): Array<AGObject> {\n        return this._blockedObjects;\n    }\n\n    set blockedObjects(value: Array<AGObject>) {\n        this._blockedObjects = value;\n    }\n    get type():Type {\n        return this._type;\n    }\n\n    set type(value:Type) {\n        this._type = value;\n    }\n    get name(): string {\n        return this._name;\n    }\n\n    set name(value: string) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'name').set.name, this.constructor.name, arguments);\n        this._name = value;\n    }\n\n    get movable() {\n        return this._movable;\n    }\n\n    set movable(value:boolean) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'movable').set.name, this.constructor.name, arguments);\n        this._movable = value;\n    }\n    get size(): Vector3 {\n        return this._size;\n    }\n\n    set size(value: Vector3) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'size').set.name, this.constructor.name, arguments);\n        this._size = value;\n    }\n    get direction(): Vector3 {\n        return this._direction;\n    }\n\n    set direction(value: Vector3) {\n        this._direction = value;\n    }\n    get AGSoundSources(): AGSoundSource[] {\n        return this._AGSoundSources;\n    }\n\n    set position(value: Vector3) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'position').set.name, this.constructor.name, arguments);\n        this._position = value;\n        //console.log(this._position);\n        //console.log(this._direction);\n        //console.log(this._size);\n    }\n    get position(): Vector3 {\n        return this._position;\n    }\n\n    get speed(): Vector3 {\n        return this._speed;\n    }\n\n    set speed(value: Vector3) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'speed').set.name, this.constructor.name, arguments);\n        this._speed = value;\n    }\n\n    setSpeedSkalar(value:number){\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.setSpeedSkalar.name, this.constructor.name, arguments);\n        this.speed = new Vector3(value, value, value);\n    }\n\n    getSpeedSkalar(){\n        return this.speed.x;\n    }\n\n\n    get runaway() {\n        return this._runaway;\n    }\n\n    set runaway(value:boolean) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'runaway').set.name, this.constructor.name, arguments);\n        this._runaway = value;\n    }\n\n    get circle() {\n        return this._circle;\n    }\n\n    set circle(value:boolean) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'circle').set.name, this.constructor.name, arguments);\n        this._circle = value;\n    }\n\n    get tag(): string {\n        return this._tag;\n    }\n\n    set tag(value: string) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'tag').set.name, this.constructor.name, arguments);\n        this._tag = value;\n    }\n\n    get hitSound(): ?AGSoundSource {\n        return this._hitSound;\n    }\n\n    set hitSound(valueID: number) {\n        let value = getReferenceById(valueID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGObject.prototype, 'hitSound').set.name, this.constructor.name, arguments);\n        this._hitSound = value;\n    }\n\n\n    get interactionCooldown(): number {\n        return this._interactionCooldown;\n    }\n\n    set interactionCooldown(value: number) {\n        this._interactionCooldown = value;\n    }\n\n    _type:Type;\n\n    _room:AGRoom;\n\n    _ID:number;\n\n    _name:string;\n    _position:Vector3;\n    _direction:Vector3;\n    _size:Vector3;\n\n    _speed:Vector3;\n    _movable:boolean;\n    _route:Array<Vector3>;\n    _currentRoute:number;\n\n    _hitSound:?AGSoundSource;\n\n    _collidable:boolean;\n    _blockedObjects:Array<AGObject>;\n    _tag:string;\n\n    _inventory:AGInventory;\n\n    _destructible:boolean;\n    _health:number;\n\n    _range:number;\n\n    _damage:number;\n    _dangerous:boolean;\n\n    _interactionSound:?AGSoundSource;\n    _movementSound:AGSoundSource;\n    _deathSound: ?AGSoundSource;\n    _aliveSound: ?AGSoundSource;\n\n    _interactionCooldown:number;\n    _interactionCDTimestamp:Date;\n\n    _runaway:boolean;\n    _circle:boolean;\n\n    /**\n     * Sets the waypoints of the respective object to which the object moves (if moveable == true).\n     * @param routes The routes as rest parameter.\n     */\n    addRoute(...routes:Vector3){\n        let i;\n        for(i = 0; i < routes.length; i++) {\n            this._route.push(routes[i]);\n        }\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.addRoute.name, this.constructor.name, arguments);\n    }\n\n    /**\n     * Adds a waypoint to the route.\n     * @param node The waypoint to be added.\n     */\n    addRouteNode(node:Vector3){\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.addRouteNode.name, this.constructor.name, arguments);\n        this._route.push(node);\n    }\n\n\n    /**\n     * Clears the route.\n     */\n    clearRoute(){\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.clearRoute.name, this.constructor.name, arguments);\n        this._route = [];\n    }\n\n    /**\n     * Creates a new AGObject which is the basis of all objects the current scene has.\n     * @param name Name of the object.\n     * @param position Position (Vector3) of the object.\n     * @param direction Direction (Vector3) of the object.\n     * @param size Size (Vector3) of the object.\n     */\n    constructor(name:string, position:Vector3, direction:Vector3, size:Vector3) {\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n\n        console.log(\"[AGObject] Creating AGObject object [ID: \" + this._ID + \"]: \" + name + \" at position \" + position.x + \"/\" + position.y + \"/\" + position.z);\n        this._position = position;\n        this._direction = direction;\n        this._size = size;\n        this._currentRoute = 0;\n        this._movable = false;\n        this._speed = new Vector3(0,0,0);\n        this._name = name;\n        this._collidable = true;\n        this._type = \"OBJECT\";\n        this._AGSoundSources = [];\n        this._route = [];\n        this._blockedObjects = [];\n        this._tag = \"\";\n        this._inventory = new AGInventory(this);\n        this._destructible = false;\n        this._health = 1;\n        this._moveableSign = 1;\n\n        this._movementSoundLastPosition = this.position.clone();\n        this._interactionCDTimestamp = new Date(0);\n\n        this._aliveSound = null;\n        this._interactionSound = null;\n        this._deathSound = null;\n        this._runaway = false;\n        this._circle = true;\n    }\n\n    _AGSoundSources:Array<AGSoundSource>;\n\n    /**\n     * Adds a soundsource to the object.\n     * @param source Soundsource (AGSoundSource) to be added.\n     */\n    addSoundSource(sourceID: number){\n        let source = getReferenceById(sourceID);\n        source.setPosition(this._position);\n        source.object = this;\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.addSoundSource.name, this.constructor.name, arguments);\n        this._AGSoundSources.push(source);\n    }\n\n    clearSoundSources(){\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.clearSoundSources.name, this.constructor.name, arguments);\n        this._AGSoundSources = [];\n    }\n\n    getSoundSources(){\n        return this._AGSoundSources;\n    }\n\n    _moveableSign:number;\n    _movementSoundLastPosition:Vector3;\n\n\n\n    /**\n     * the draw-loop\n     */\n\n    draw(timeStamp:Date){\n        //as long as the draw loop is called, the sound should be played.\n        for(let i = 0, len = this._AGSoundSources.length; i < len; i++){\n            //console.log(this.position);\n            if(this._AGSoundSources[i].update) this._AGSoundSources[i].setPosition(this.position);\n            if(this._AGSoundSources[i].looping) this._AGSoundSources[i].play();\n        }\n\n        /*\n        if(this._auditoryPointer){\n            if((this.position.distanceTo(this._route[this._currentRoute]) < 0.2)){\n                //console.log(\"Object \" + this.name + \" has reached target: \" + this._route[this._currentRoute]);\n                this._currentRoute = this._currentRoute + this._moveableSign;\n                if(this._currentRoute == this._route.length || this._currentRoute < 0) {\n                    this._moveableSign *= (-1);\n                    this._currentRoute += this._moveableSign;\n\n                }\n                //console.log(\"Object \" + this.name + \" takes now route to: \" + this._route[this._currentRoute]);\n            } else {\n                //console.log(this._route[this._currentRoute].clone().sub(this.position.clone()).normalize());\n                if(g_gamearea.listener.position.distanceTo(this._position) < 2.0) {\n                    move(this, this._route[this._currentRoute].clone().sub(this.position.clone()).normalize(), timeStamp);\n                }\n            }\n        } else {\n            //moves the object depending on speed and direction if the object is movable and a route is given.\n            if(this._movable){\n                //this._auditoryPointer && (this.position.distanceTo(g_gamearea.listener.position) < 0.2)\n\n\n                if((this.position.distanceTo(this._route[this._currentRoute]) < 0.2)){\n                    //console.log(\"Object \" + this.name + \" has reached target: \" + this._route[this._currentRoute]);\n                    this._currentRoute = ++this._currentRoute % this._route.length;\n                    //console.log(\"Object \" + this.name + \" takes now route to: \" + this._route[this._currentRoute]);\n                } else {\n                    //console.log(this._route[this._currentRoute].clone().sub(this.position.clone()).normalize());\n                    move(this, this._route[this._currentRoute].clone().sub(this.position.clone()).normalize(), timeStamp);\n                }\n            }\n        }*/\n\n        if(this._movable) {\n            if ((this.position.distanceTo(this._route[this._currentRoute]) < 0.2)) {\n                if (this._circle) {\n                    this._currentRoute = ++this._currentRoute % this._route.length;\n                }\n                else {\n                    this._currentRoute = this._currentRoute + this._moveableSign;\n                    if (this._currentRoute == this._route.length || this._currentRoute < 0) {\n                        this._moveableSign *= (-1);\n                        this._currentRoute += this._moveableSign;\n                    }\n                }\n            } else {\n                if(this._runaway){\n                    if(g_gamearea.listener.position.distanceTo(this._position) < 2.0) {\n                        move(this, this._route[this._currentRoute].clone().sub(this.position.clone()).normalize(), timeStamp);\n                    }\n                } else {\n                    move(this, this._route[this._currentRoute].clone().sub(this.position.clone()).normalize(), timeStamp);\n                }\n            }\n        }\n\n\n\n        /*\n        if(this._movementSound){\n            if(this.position.clone().distanceTo(this._movementSoundLastPosition) === 0.0) {\n                this._movementSound.pause();\n            }\n            else if(!this._movementSound.playing) this._movementSound.play();\n\n            this._movementSound.setPosition(this.position.clone());\n        }*/\n\n        //What happens if the object dies\n        if(this._destructible && this._health <= 0) this.onDeath();\n\n       //this._movementSoundLastPosition = this.position.clone();\n    }\n\n    /**\n     * Stops all running sounds at the object.\n     */\n    stop(){\n        for(let i = 0, len = this._AGSoundSources.length; i < len; i++){\n            if(this._AGSoundSources[i].looping) {\n                this._AGSoundSources[i].stop();\n            }\n        }\n    }\n\n    /**\n     * OnCollisionEnter is called as soon as a Collision happens with the respective object involved.\n     * @param obj The object (AGObject) this object collided with.\n     */\n    onCollisionEnter(obj: AGObject) {\n        //console.log(\"Collision happened between: \" + this.name + \" and \" + obj.name);\n        g_eventHandler.call(this, \"ONCONTACT\");\n        //adds this object to the other object on its blocked list, so the onCollisionEnter isn't called again.\n        if(!this._blockedObjects.includes(obj)){\n            this._blockedObjects.push(obj);\n        }\n    }\n\n    /**\n     * OnCollisionExit is called as soon as a Collision ends.\n     * @param obj The object (AGobject) this object collided with before it left the Collision.\n     */\n    onCollisionExit(obj: AGObject) {\n        //console.log(\"Collision exit between: \" + this.name + \" and \" + obj.name);\n\n        //deletes the object from the blockedObjects list.\n        let index = this._blockedObjects.lastIndexOf(obj);\n        if(index > -1){\n            //console.log(\"[AGObject] Collision Exit: removing object \" + obj.name);\n            this._blockedObjects.splice(index, 1);\n        }\n    }\n\n    /**\n     * Actions to do when an AGObject dies.\n     */\n    onDeath(){\n        g_eventHandler.call(this, \"ONDEATH\");\n        if(this._deathSound) this._deathSound.play();\n        console.log(\"[AGObject] \" + this.name + \" got destroyed. Triggering death routines.\");\n        this.kill();\n    }\n\n    /**\n     * Kills the AGObject and removes it from the reference table.\n     */\n    kill(){\n        console.log(\"[AGObject] \" + this.name + \": killed.\");\n        this.stop();\n        this.room.removeAGObject(this);\n        g_eventHandler.deleteEventsContainingObjectById(this._ID);\n        g_eventHandler.deleteGlobalEventsContainingObjectById(this._ID);\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.kill.name, this.constructor.name, arguments);\n        g_references.delete(this._ID);\n    }\n\n    interact(){\n        if(this._interactionSound) this._interactionSound.play();\n    }\n\n    /**\n     * AGObject receives damage from obj.\n     * @param obj The AGObject that does damage to this AGObject.\n     */\n    doDamage(obj:AGObject){\n        if(this.destructible) {\n            this.health -= obj.damage;\n            console.log(\"[AGObject] \" + this.name + \" got \" + obj.damage + \" damage from object \" + obj.name + \" leaving me at \" + this.health + \" health.\");\n        } else {\n            console.log(\"[AGObject] \" + this.name + \" got \" + obj.damage + \" damage from object \" + obj.name + \" but cannot take any damage.\");\n        }\n    }\n\n    reset(){\n\n    }\n}","// @flow\n\nimport {AGObject} from \"./AGObject.js\";\nimport {g_history, g_loading, g_playing, g_references, getReferenceById} from \"./AGEngine.js\";\nimport {IncrementOneCounter} from \"./IDGenerator.js\";\nimport type {ConditionObject} from \"./EventType.js\";\n\n/**\n * Class for Conditions that must be fulfilled before an action can take place. (Very WIP)\n */\nexport class AGCondition {\n\n    _object:AGObject;\n    _conditionObject:ConditionObject;\n    _funcOfConditionObject:Function;\n    _funcArgs:Array<any>;\n    _value:Object;\n    //_amount:number;\n    _ID:number;\n\n    get ID() {\n        return this._ID;\n    }\n\n    get conditionObject(): any {\n        return this._conditionObject;\n    }\n\n    set conditionObject(value: any) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGCondition.prototype, 'conditionObject').set.name, this.constructor.name, arguments);\n        this._conditionObject = value;\n    }\n\n    get funcOfConditionObject(): Function {\n        return this._funcOfConditionObject;\n    }\n\n    set funcOfConditionObject(value: string) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGCondition.prototype, 'funcOfConditionObject').set.name, this.constructor.name, arguments);\n        let f:Function;\n        switch(this._conditionObject){\n            case \"INVENTORY\":\n                f = g_history.getFunction(\"AGInventory\", value);\n                break;\n        }\n        this._funcOfConditionObject = f;\n    }\n\n    get funcArgs(): Array<*> {\n        return this._funcArgs;\n    }\n\n    set funcArgs(value: Array<*>) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGCondition.prototype, 'funcArgs').set.name, this.constructor.name, arguments);\n        this._funcArgs = value;\n    }\n\n    get value(): Object {\n        return this._value;\n    }\n\n    set value(value: Object) {\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGCondition.prototype, 'value').set.name, this.constructor.name, arguments);\n        this._value = value;\n    }\n\n    get object():AGObject {\n        return this._object;\n    }\n\n    set object(objectID:number) {\n        let obj:AGObject = getReferenceById(objectID);\n        // $FlowFixMe\n        if(!g_loading && !g_playing) g_history.ike(this._ID, Object.getOwnPropertyDescriptor(AGCondition.prototype, 'object').set.name, this.constructor.name, arguments);\n        this._object = obj;\n    }\n\n    constructor(objectID: number, conditionObject:ConditionObject, funcOfConditionObject: string, funcArgs: Array<*>, value: Object) {\n        this._ID = IncrementOneCounter.next();\n        g_references.set(this._ID, this);\n        if(!g_loading && !g_playing) g_history.ike(this._ID, this.constructor.name, this.constructor.name, arguments);\n\n        this._object = getReferenceById(objectID);\n        this._conditionObject = conditionObject;\n        //this._amount = amount;\n\n        let f:Function;\n        switch(conditionObject){\n            case \"INVENTORY\":\n                f = g_history.getFunction(\"AGInventory\", funcOfConditionObject);\n                break;\n        }\n\n        this._funcOfConditionObject = f;\n        this._funcArgs = funcArgs;\n        this._value = value;\n    }\n\n    /**\n     * Evaluates the Condition.\n     * @returns {boolean} Returns true, if the condition is met, otherwise false.\n     */\n    evaluate():boolean {\n        switch(this._conditionObject) {\n            case \"INVENTORY\":\n                if (this._object.inventory) {\n                    if (this._funcOfConditionObject.apply(this._object.inventory, this._funcArgs) === this._value) {\n                        //console.log(\"[AGCondition] Condition [ID: \" + this._ID + \"] with Object [ID: \" + this._object.ID + \"] fulfilled.\");\n                        return true;\n                    }\n                }\n        }\n        return false;\n    }\n\n}\n\n/**\n * Evaluates all Conditions in an Array with AGConditions.\n * @param conditions An Array with AGConditions to be checked.\n * @returns {boolean} Returns true, if all conditions are met, otherwise false.\n */\nexport function evaluateAll(conditions:Array<AGCondition>):boolean{\n    for(let i = 0; i < conditions.length; i++){\n        if(!conditions[i].evaluate()) return false;\n    }\n    return true;\n}","/* This file defines the public api for the AG Library */\n\n// Classes\n//---------------------------------\nimport { AGCondition } from \"./AGCondition.js\";\nimport { AGEventHandler } from \"./AGEventHandler.js\";\nimport { AGGameArea } from \"./AGGameArea.js\";\nimport { AGInventory } from \"./AGInventory.js\";\nimport { AGItem } from \"./AGItem.js\";\nimport { AGNavigation } from \"./AGNavigation.js\";\nimport { AGObject } from \"./AGObject.js\";\nimport { AGPlayer } from \"./AGPlayer.js\";\nimport { AGPortal } from \"./AGPortal.js\";\nimport { AGRoom } from \"./AGRoom.js\";\nimport { AGRoomExit } from \"./AGRoomExit.js\";\nimport { AGSaLo, SaLoCommand } from \"./AGSaLo.js\";\nimport { AGSoundSource } from \"./AGSoundSource.js\";\nimport { Collision } from \"./Collision.js\";\nimport { Event } from \"./Event.js\";\nimport { GlobalEvent } from \"./GlobalEvent.js\";\n\n// Functions\n//---------------------------------\nimport {evaluateAll} from \"./AGCondition.js\";\nimport {setIAudiCom,\n    setGameArea,\n    setEventHandler,\n    deleteItem,\n    deleteCondition,\n    getOwnerIdOfItemById,\n    rebuildHandlerGameArea,\n    setControl,\n    getReferenceById,\n    getIdByReference,\n    getReferencesOfType,\n    setLoading,\n    play} from \"./AGEngine.js\";\nimport {move} from \"./AGNavigation.js\";\nimport {\n    colliding,\n    isPointInsideAABB,\n    isAABBInsideAABB,\n    isAABBInsideRoom,\n    frbIntersectionPoint,\n    hitBoundingBox\n} from \"./AGPhysics\";\nimport {collisionIsInArray, objectPartOfCollisions} from \"./Collision.js\";\n\n// Types\n//---------------------------------\n//import type {Type} from \"./AGType.js\";\nimport type {Trigger, Action, ConditionObject} from \"./EventType.js\";\nimport type {ConditionType} from \"./ConditionType.js\";\n\n// Constants\n//---------------------------------\nimport { IncrementOneCounter } from \"./IDGenerator.js\"\n\n// Variables\n//---------------------------------\nimport {\n    g_loading,\n    g_playing,\n    g_references,\n    g_history,\n    g_eventHandler,\n    g_gamearea,\n    g_controls,\n} from \"./AGEngine.js\"\n\n\n\n/* Now we define the public API by exporting what we want */\n\nexport {\n    // Classes\n    //---------------------------------\n    AGCondition,\n    AGEventHandler,\n    AGGameArea,\n    AGInventory,\n    AGItem,\n    AGNavigation,\n    AGObject,\n    AGPlayer,\n    AGPortal,\n    AGRoom,\n    AGRoomExit,\n    AGSaLo,\n    SaLoCommand,\n    AGSoundSource,\n    Collision,\n    Event,\n    GlobalEvent,\n\n    // Functions\n    //---------------------------------\n\n    // AGCondition\n    evaluateAll,\n\n    // AGEngine\n    setIAudiCom,\n    setGameArea,\n    setEventHandler,\n    deleteItem,\n    deleteCondition,\n    getOwnerIdOfItemById,\n    rebuildHandlerGameArea,\n    setControl,\n    getReferenceById,\n    getIdByReference,\n    getReferencesOfType,\n    setLoading,\n    play,\n\n    // AGNavigation\n    move,\n\n    // AGPhysics\n    colliding,\n    isPointInsideAABB,\n    isAABBInsideAABB,\n    isAABBInsideRoom,\n    frbIntersectionPoint,\n    hitBoundingBox,\n\n    // Collision\n    collisionIsInArray,\n    objectPartOfCollisions,\n\n    // Types\n    //---------------------------------\n\n    // AGType\n//    Type,\n\n    // EventType\n//    Trigger,\n//    Action,\n//    ConditionObject,\n\n    // ConditionType\n//    ConditionType,\n\n    // Constants\n    //---------------------------------\n    IncrementOneCounter,\n\n    // Variables\n    //---------------------------------\n    g_loading,\n    g_playing,\n    g_references,\n    g_history,\n    g_eventHandler,\n    g_gamearea,\n    g_controls\n}"],"sourceRoot":""}